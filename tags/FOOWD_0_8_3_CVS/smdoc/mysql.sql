#
# Default data for FOOWD v0.8.1
#
# This is the default data for the base FOOWD system "out-of-the-box",
# you will need to at least execute the create table statement below
# to be able to run FOOWD. For a first time install I'd recommend loading
# the data too to get you started.
#
# This script includes data for a Root user, and all the pages found on
# the FOOWD web site http://foowd.peej.co.uk.
#
# The Root password for the system is set as "root", you should log in to
# the site as root and change this password asap.
#

#
# Table structure for table 'tblobject'
#

CREATE TABLE `tblobject` (
  `objectid` int(11) NOT NULL default '0',
  `version` int(10) unsigned NOT NULL default '1',
  `classid` int(11) NOT NULL default '0',
  `workspaceid` int(11) NOT NULL default '0',
  `object` longblob,
  `title` varchar(255) NOT NULL default '',
  `updated` datetime NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY (`objectid`,`version`,`classid`,`workspaceid`),
  KEY `idxtblObjectTitle`(`title`),
  KEY `idxtblObjectupdated`(`updated`),
  KEY `idxtblObjectObjectid`(`objectid`),
  KEY `idxtblObjectClassid`(`classid`),
  KEY `idxtblObjectVersion`(`version`),
  KEY `idxtblObjectWorkspaceid`(`workspaceid`)
) TYPE=MyISAM COMMENT='';

#
# Dumping data for table 'tblobject'	
#

INSERT INTO `tblobject` VALUES("-2015333756","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:22:\"Writing System Classes\";s:8:\"objectid\";s:11:\"-2015333756\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1050171653\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1050315670\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:22811:\"<h1>Extending the Base Classes</h1>\n\n<p>Now we get down to the real nitty gritty, this chapter covers extending the base class to create objects that behave as you want and yet have all the properties of a FOOWD object.</p>\n\n<p class=\"nb\"><strong>Note:</strong> If you want an example of extending the base class, please read <a href=\"?object=examples\">Chapter 6</a>, however I\'d recommend reading this chapter first so that you understand the subtleties.</p>\n\n<h2>The Base Class</h2>\n\n<p>The base system class is called <a href=\"?object=base%20classes#foowd_object\">foowd_object</a> and is found in the file class.object.php. It contains all the members and methods that are required by FOOWD to create a useless object that can save itself to the database, handle its own version control, delete and clone itself, set its member variables to valid values, and generally do all the stuff that makes FOOWD worth using.</p>\n\n<p>All classes in the FOOWD system inherit these base properties from the base class foowd_object (all except <a href=\"?object=base%20classes#foowd\">foowd</a> which is the FOOWD environment object and is discussed elsewhere), it is this class that you should extend to create your own classes.</p>\n\n<p>The base class (and thus all inherited classes) is made up of a number of elements with terminology and uses which you\'ll need to understand before you can start working with it. In this section we\'ll look at the individual structural parts of the class and how and when you should extend or override them.</p>\n\n<h4>Structure</h4>\n<ul>\n<li><a href=\"#descriptor\">Class Descriptor</a></li>\n<li><a href=\"#method permissions\">Class Method Permissions</a></li>\n<li><a href=\"#passthru function\">Class Method Passthru Function</a></li>\n<li><a href=\"#class declaration\">Class Declaration</a></li>\n<li><a href=\"#member variables\">Member Variables</a></li><li><a href=\"#constructor\">Constructor</a></li>\n<li><a href=\"#serialize functions\">Serialize Functions</a></li>\n<li><a href=\"#member functions\">Member Functions</a></li>\n<li><a href=\"#class methods\">Class Methods</a></li>\n<li><a href=\"#object methods\">Object Methods</a></li>\n</ul>\n\n<a name=\"descriptor\"></a>\n<h2>The Class Descriptor</h2>\n\n<p>Every system class has to have a class descriptor. It is two entries in a global scope array that tell FOOWD the class name and a text description of the class.</p>\n\n<pre>\n<span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[</span><span class=\"code_function\">-2121421989</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'className\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'my_class\'</span><span class=\"code_structure\">;\n</span><span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[</span><span class=\"code_function\">-2121421989</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'description\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'My Class I Made\'</span><span class=\"code_structure\">;</span>\n</pre>\n\n<p>As you can see from the example, it is simply an array entry indexed on the classes ID, containing two further indexes, one for the class name and the other for the text description. The classes ID is generated by taking the class name (in this case my_class) and applying the <a href=\"http://www.php.net/crc32\">crc32</a> algorithm to it.</p>\n\n<a name=\"method permissions\"></a>\n<h2>Class Method Permissions</h2>\n\n<p>Each class method can have a user group permission set, to access that class method a user must belong to that user group.</p>\n\n<pre>\n<span class=\"code_function\">define</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'MY_CLASS_CREATE_PERMISSION\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Gods\'</span><span class=\"code_structure\">);</span>\n</pre>\n\n<p>These permissions are set via a constant defined with the class definition with a name of the class name followed by a \'_\' and then the class method name followed by \'_PERMISSION\'.</p>\n\n<a name=\"#passthru function\"></a>\n<h2>Class Method Passthru Function</h2>\n\n<p>Next a piece of housekeeping. We can call a regular function with a variable name but not a static member function (since PHP4 does not support this), so to enable us to call class methods we must define a pass through function for each class that\'ll call the static member function for us.</p>\n\n<pre>\n<span class=\"code_structure\">function </span><span class=\"code_function\">my_class_classmethod</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">) { </span><span class=\"code_function\">my_class</span><span class=\"code_structure\">::</span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'my_class\'</span><span class=\"code_structure\">); }</span>\n</pre>\n\n<p>Basically, this function must exist, full stop.</p>\n\n<a name=\"#class declaration\"></a>\n<h2>Class Declaration</h2>\n\n<pre>\n<span class=\"code_structure\">class </span><span class=\"code_function\">my_class </span><span class=\"code_structure\">extends </span><span class=\"code_function\">foowd_object </span><span class=\"code_structure\">{</span>\n</pre>\n\n<p>Finally we can define our class, remembering to extend our base foowd_object of course.</p>\n\n<a name=\"#member variables\"></a>\n<h2>Member Variables</h2>\n\n<pre>\n    <span class=\"code_structure\">var </span><span class=\"code_function\">$my_var1</span><span class=\"code_structure\">;\n    var </span><span class=\"code_function\">$my_var2 </span><span class=\"code_structure\">= </span><span class=\"code_function\">1</span><span class=\"code_structure\">;</span>\n</pre>\n\n<p>First in our class declaration we define any member variables we want our class to possess. We already inherit 15 member vars from foowd_object, to help stop incompatibility in the future any vars beginning with \"foowd\" are reserved for the base class.</p>\n\n<a name=\"#constructor\"></a>\n<h2>Constructor</h2>\n\n<pre>\n    <span class=\"code_structure\">function </span><span class=\"code_function\">my_class </span><span class=\"code_structure\">(\n        &amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$title </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$my_var1 </span><span class=\"code_structure\">= </span><span class=\"code_string\">\'Hello\'</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$my_var2 </span><span class=\"code_structure\">= </span><span class=\"code_function\">0</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$viewGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$adminGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$deleteGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL\n    </span><span class=\"code_structure\">) {\n        </span><span class=\"code_function\">parent</span><span class=\"code_structure\">::</span><span class=\"code_function\">foowd_object</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$title</span><span class=\"code_structure\">, </span><span class=\"code_function\">$viewGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">$adminGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">$deleteGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">var1 </span><span class=\"code_structure\">= </span><span class=\"code_function\">$var1</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">var2 </span><span class=\"code_structure\">= </span><span class=\"code_function\">$var2</span><span class=\"code_structure\">;\n    }</span>\n</pre>\n\n<p>The base classes constructor sets all the base member vars to sensible values, including getting a unique objectid for the object. If you have added your own member vars then you\'ll want to override this constructor with your own and make it set these values as well as call the base constructor.</p>\n\n<a name=\"#serialize functions\"></a>\n<h2>Serialize Functions</h2>\n\n<p>FOOWD objects store 3 meta arrays, these arrays are:</p>\n\n<ul>\n<li><strong>foowd_vars_meta</strong> - Array of regular expresions, one for each member variable, telling FOOWD valid values for the variable.</li>\n<li><strong>foowd_indexes</strong> - Array of database types, one for each member variable that should be an index on the database.</li>\n<li><strong>foowd_original_access_vars</strong> - Array of the original values of the four access member variables (objectid, version, classid, and workspaceid), used to find object in case these are changed during processing.</li>\n</ul>\n\n<p>These meta arrays are defined in the classes serialize functions, two special functions (__sleep() and __wakeup()) that are called by PHP just before an object is serialized and just after an object is unserialized.</p>\n\n<p class=\"nb\"><strong>Jargon Buster: </strong>Serializing is turning a PHP variable (a simple type, an array, or an object) into a text string representation. FOOWD uses this PHP functionality to serialize system objects before writing them to the database as plain text.</p>\n\n<h3>__sleep()</h3>\n\n<p>The magic sleep member function is called just before the object is serialized. FOOWD uses this function to unset (remove) the meta arrays since we don\'t want to store lots of constant data within the database.</p>\n\n<h3>__wakeup()</h3>\n\n<p>Wakeup, as the name suggests, is called just after the object is unserialized. FOOWD uses it to re-create the meta arrays, and thus the meta arrays are defined within the __wakeup() function. __wakeup() is also called from within the base classes constructor so as to create the meta arrays the when an object is first created.</p>\n\n<p>If you have added any new member variables to your object, you need to define them within the foowd_vars_meta array so that FOOWD knows what values they can take.</p>\n\n<pre>\n    <span class=\"code_structure\">function </span><span class=\"code_function\">__wakeup</span><span class=\"code_structure\">() {\n        </span><span class=\"code_function\">parent</span><span class=\"code_structure\">::</span><span class=\"code_function\">__wakeup</span><span class=\"code_structure\">();\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'my_var1\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'/^[a-zA-Z0-9]{1,20}$/\'</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'my_var2\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'/^0|1$/\'</span><span class=\"code_structure\">;\n    }</span>\n</pre>\n\n<p>As you can see by the example, we define our own __wakeup() function and use it to call our parent classes __wakeup() function. Then we define two new foowd_vars_meta indexes for our two new member variables, the regular expressions show that $my_var1 can take any single alphanumeric string up to 20 characters long, and $my_var2 can contain the value 1 or 0.</p>\n\n<a name=\"#member functions\"></a>\n<h2>Member Functions</h2>\n\n<p>Here is where you define your member functions, the only previsions are that they must not be named beginning with \"class\" or \"method\", these names are reserved for class and object methods.</p>\n\n<a name=\"#class methods\"></a>\n<h2>Class Methods</h2>\n\n<p>In FOOWD, methods are defined as member functions that are accessable via the foowd::callmethod() and foowd::callClassmethod() functions, that is they are public functions that are called by the client and return some output to the clients browser.</p>\n\n<p>Class methods are static methods, methods that are called on the class rather than an instanciated object. These are useful for defining an object create method for example, where an existing object does not exist to call the method upon. They are accessed via the foowd::callClassmethod() function.</p>\n\n<pre>\n    <span class=\"code_structure\">function </span><span class=\"code_function\">class_create</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$className</span><span class=\"code_structure\">) {\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;Create a my_class object&lt;/h1&gt;\'</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$createForm </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_form</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createForm\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'POST\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Create\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$createTitle </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createTitle\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'title\'</span><span class=\"code_structure\">], </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Object Title:\'</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$createVar1 </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createVar1\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'my_var1\'</span><span class=\"code_structure\">], </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'My Var 1:\'</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$createVar2 </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createVar2\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'my_var2\'</span><span class=\"code_structure\">], </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'My Var 2:\'</span><span class=\"code_structure\">);\n        if (!</span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">submitted</span><span class=\"code_structure\">() || </span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value </span><span class=\"code_structure\">== </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">) {\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">);\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">display</span><span class=\"code_structure\">();\n        } else {\n            </span><span class=\"code_function\">$object </span><span class=\"code_structure\">= new </span><span class=\"code_function\">$className</span><span class=\"code_structure\">(\n                </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">,\n                </span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\n                </span><span class=\"code_function\">$createVar1</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\n                </span><span class=\"code_function\">$createVar2</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value\n            </span><span class=\"code_structure\">);\n            if (</span><span class=\"code_function\">$object</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">save</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">FALSE</span><span class=\"code_structure\">)) {\n                echo </span><span class=\"code_string\">\'&lt;p&gt;Object created and saved.&lt;/p&gt;\'</span><span class=\"code_structure\">;\n            } else {\n                echo </span><span class=\"code_string\">\'&lt;p&gt;Could not create object.&lt;/p&gt;\'</span><span class=\"code_structure\">;\n            }\n        }\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n    }</span>\n</pre>\n\n<p>This example create method would be called via the method name \"create\", it displays a form to gather the data required to create our object, and then creates it.</p>\n\n<p>Notice the calls to foowd_prepend() and foowd_append(). These two functions are called at the beginning and end of each method, they allow a header and a footer to be added before and after the method output. They are included within your method rather than automatically during calling the method so as to give the flexibility to output HTML headers first or ignore them completely and output your own header and footer.</p>\n\n<a name=\"#object methods\"></a>\n<h2>Object Methods</h2>\n\n<p>object methods are non-static methods, methods that are called on an object instance. These are the main grunt of a FOOWD object, opening the internal object functionality to the outside world. They are accessed via the foowd::callMethod() function.</p>\n\n<pre>\n    <span class=\"code_structure\">function </span><span class=\"code_function\">method_view</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">) {\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;This Is A My_Class Object Called \"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">getTitle</span><span class=\"code_structure\">(), </span><span class=\"code_string\">\'\"&lt;/h1&gt;\'</span><span class=\"code_structure\">;\n        echo </span><span class=\"code_string\">\'&lt;p&gt;my_var1 = \'</span><span class=\"code_structure\">, </span><span class=\"code_function\">htmlspecialchars</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">my_var1</span><span class=\"code_structure\">), </span><span class=\"code_string\">\'&lt;/p&gt;\'</span><span class=\"code_structure\">;\n        echo </span><span class=\"code_string\">\'&lt;p&gt;my_var2 = \'</span><span class=\"code_structure\">, </span><span class=\"code_function\">htmlspecialchars</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">my_var2</span><span class=\"code_structure\">), </span><span class=\"code_string\">\'&lt;/p&gt;\'</span><span class=\"code_structure\">;\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n    }</span>\n</pre>\n\n<p>This example view method would be called via the method name \"view\", it displays the values of the two member variables we created.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Writing System Classes","2003-04-14 11:21:10");
INSERT INTO `tblobject` VALUES("-1821465150","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:11:\"Definitions\";s:8:\"objectid\";s:11:\"-1821465150\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1050229208\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1050318848\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:2554:\"<h1>FOOWD Definitions / Terminology</h1>\n\n<p>Throughout the FOOWD and its documentation we use a number of terms which may be new to you or totally made up by us, below we explain what they mean:</p>\n\n<dl>\n\n<dt>The Author Group</dt>\n<dd>A magic user group that always contains only one user, the original creator of the object in question. If a user belongs to the author group (ie. has the string \"Author\" within their $groups[] array) then the user can access all methods set to the author user group even if they are not the original creator.</dd>\n\n<dt>Class Descriptor</dt>\n<dd>The global scope array ($foowd_class_meta) that tell FOOWD the class name and a text description of the class.</dd>\n\n<dt>Class Method</dt>\n<dd>A static method, a method that is called upon an uninstantiated class.</dd>\n\n<dt>FOOWD Environment Class</dt>\n<dd>The class \"foowd\" that should have an instance created each time FOOWD is used so as to set up the FOOWD system environment.</dd>\n\n<dt>Input Class/Object</dt>\n<dd>A class that wraps up HTTP I/O into a easy to handle package. Input classes include input validation, data persistancy spanning HTTP requests, and can be complex input types derived from a number of HTML input widgets/controls.</dd>\n\n<dt>Lead-in Document</dt>\n<dd>The document that is requested by the client that loads FOOWD and initiates FOOWD requests.</dd>\n\n<dt>Method</dt>\n<dd>A member function that is accessable to connecting client via the foowd::callMethod() or foowd::callClassMethod() functions.</dd>\n\n<dt>Object Method</dt>\n<dd>A non-static method, a method that is called upon an instantiated object.</dd>\n\n<dt>Object ID</dt>\n<dd>An object id is a crc32 checksum of the objects title. This allows an object to be indexed via a numerical value that can be derived directly from the objects title.</dd>\n\n<dt>System Class/Object</dt>\n<dd>A class that extends the base system class \"foowd_object\".</dd>\n\n<dt>User Group</dt>\n<dd>A text string identifier that grants the users with that string in their $groups[] array permission access to methods secured with that that user group via their objects $permissions[] array.</dd>\n\n<dt>Workspace</dt>\n<dd>All system objects belong to a workspace, users within a workspace can only see other objects within that workspace and objects within the \"outside\" workspace (the workspace of the live system). Objects can be cloned (or created) in a new workspace, here changes can be made to them without effecting the live system until the objects are cloned back \"outside\".</dd>\n\n<dt></dt>\n<dd></dd>\n\n</dl>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Definitions","2003-04-14 12:14:08");
INSERT INTO `tblobject` VALUES("-1815216328","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"Constants\";s:8:\"objectid\";s:11:\"-1815216328\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049720275\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051698028\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:6819:\"<h1>FOOWD System Constants</h1>\n\n<p>FOOWD uses a number of constants that can be defined in the configuration file to set certain default values, effect behavour, or otherwise configure the system. They are briefly outlined below:</p>\n\n<h2>System Settings</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>PATH</td><td>Path from lead-in file to FOOWD config file.</td><td>\'\'</td></tr>\n<tr><td>FILENAME</td><td>Name of lead-in file.</td><td>$_SERVER[\'PHP_SELF\']</td></tr>\n</table>\n\n<h2>Database</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>DATABASE</td><td>Database type</td><td>\'mysql\'</td></tr>\n<tr><td>DB_HOST</td><td>Database address</td><td>\'127.0.0.1\'</td></tr>\n<tr><td>DB_NAME</td><td>Database name</td><td>\'foowd\'</td></tr>\n<tr><td>DB_USER</td><td>Database username</td><td>\'root\'</td></tr>\n<tr><td>DB_PASS</td><td>Database password</td><td>\'\'</td></tr>\n<tr><td>DB_TABLE</td><td>Default database table</td><td>\'tblObject\'</td></tr>\n<tr><td>DATABASE_DATE</td><td>Database date format (set in db.*.php)</td><td>\'Y-m-d H:i:s\'</td></tr>\n<tr><td>DATABASE_DATETIME_DATATYPE</td><td>Database datetime type (set in db.*.php)</td><td>\'DATETIME\'</td></tr>\n</table>\n\n<h2>Object Settings</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>DEFAULT_OBJECTID</td><td>Objectid of default object to retrieve</td><td>-633383736</td></tr>\n<tr><td>DEFAULT_CLASSID</td><td>Classid of default class type to retrieve</td><td>-1465013268</td></tr>\n<tr><td>DEFAULT_METHOD</td><td>Default method to call on an object.</td><td>\'view\'</td></tr>\n<tr><td>DEFAULT_CLASS_METHOD</td><td>Default method to call on a class.</td><td>\'create\'</td></tr>\n<tr><td>ALLOW_DUPLICATE_TITLE</td><td>Allow objects to have the same name</td><td>TRUE</td></tr>\n</table>\n\n<h2>Regular Expressions</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>REGEX_TITLE</td><td>Object title regex</td><td>\'/^[a-zA-Z0-9-_ ]{1,32}$/\'</td></tr>\n<tr><td>REGEX_ID</td><td>Object id regex</td><td>\'/^[0-9-]{1,10}$/\'</td></tr>\n<tr><td>REGEX_DATETIME</td><td>Datetime field regex</td><td>\'/^[0-9-]{1,10}$/\'</td></tr>\n<tr><td>REGEX_PASSWORD</td><td>User password regex</td><td>\'/^[A-Za-z0-9]{1,32}$/\'</td></tr>\n<tr><td>REGEX_EMAIL</td><td>E-mail address regex</td><td>\'/^[A-Za-z0-9._-]+@[A-Za-z0-9._-]+\\.[A-Za-z]{1,4}$/\'</td></tr>\n</table>\n\n<h2>Display Settings</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>DATETIME_FORMAT</td><td>Formatting string to format dates</td><td>\'D jS F Y \\a\\t h:ia\'</td></tr>\n<tr><td>ANONYMOUS_USER_NAME</td><td>Username to give Anonymous user (if using foowd_anonuser class).</td><td>$_SERVER[\'REMOTE_ADDR\']</td></tr>\n<tr><td>DEBUG</td><td>Turn on debugging.</td><td>FALSE</td></tr>\n<tr><td>CACHE_DIR</td><td>Directory for storing cache files.</td><td>$_ENV[\'tmp\']</td></tr>\n</table>\n\n<h2>Security Settings</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>ANON_GOD</td><td>Anonymous user is a god, set this to TRUE to set up your site then back to FALSE before going live</td><td>FALSE</td></tr>\n<tr><td>AUTH_TYPE</td><td>User auth type (\'http\' or \'cookie\').</td><td>\'cookie\'</td></tr>\n<tr><td>PASSWORD_SALT</td><td>Salt string to append to user passwords before hashing.</td><td>\'foowd\'</td></tr>\n<tr><td>ANONYMOUS_USER_ID</td><td>Objectid of user within database to use as the Anonymous user.</td><td>FALSE</td></tr>\n<tr><td>USER_CLASS_ID</td><td>Objectid of class to use as users.</td><td>425464453</td></tr>\n<tr><td>ANONYMOUS_USER_CLASS</td><td>Class name of class to use for anonymous user (ignored if ANONYMOUS_USER_ID is set).</td><td>\'foowd_anonuser\'</td></tr>\n<tr><td>SESSION_LENGTH</td><td>Number of seconds before a user session has expired and a new session is started for the user.</td><td>900</td></tr>\n<tr><td>DEFAULT_METHOD_PERMISSION</td><td>Default user group for executing methods without permissions explicitly set.</td><td>\'\'</td></tr>\n<tr><td>&lt;className&gt;_&lt;methodName&gt;_PERMISSION</td><td>Default user group for executing class method.</td><td>\'\'</td></tr>\n<tr><td>DEFAULT_VIEW_GROUP</td><td>Default user group for executing view method.</td><td>\'\'</td></tr>\n<tr><td>DEFAULT_ADMIN_GROUP</td><td>Default user group for executing admin method.</td><td>\'Gods\'</td></tr>\n<tr><td>DEFAULT_DELETE_GROUP</td><td>Default user group for executing delete method.</td><td>\'Gods\'</td></tr>\n</table>\n\n<h2>History Settings</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>DESTROY_OLDER_THAN</td><td>Time to keep an archive version of an object.</td><td>\'-1 month\'</td></tr>\n<tr><td>MINIMUM_NUMBER_OF_ARCHIVED_VERSIONS</td><td>Minimum number of archived versions of an object to keep.</td><td>3</td></tr>\n</table>\n\n<h2>Cookie Settings</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>COOKIE_EXPIRE</td><td>Number of seconds to keep cookie.</td><td>31536000</td></tr>\n<tr><td>COOKIE_PATH</td><td>Path cookie should be used for.</td><td></td></tr>\n<tr><td>COOKIE_DOMAIN</td><td>Domain cookie should be used for.</td><td></td></tr>\n<tr><td>COOKIE_SECURE</td><td>Whether to only send cookie when using https.</td><td>FALSE</td></tr>\n</table>\n\n<h2>Input Settings</h2>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>INPUT_TEXTBOX_SIZE_MIN</td><td>Minimum width of a textbox.</td><td>4</td></tr>\n<tr><td>INPUT_TEXTBOX_SIZE_MAX</td><td>Maximum width of a textbox.</td><td>50</td></tr>\n<tr><td>INPUT_TEXTAREA_WIDTH_MIN</td><td>Minimum width of a textarea.</td><td>20</td></tr>\n<tr><td>INPUT_TEXTAREA_WIDTH_MAX</td><td>Maximum width of a textarea.</td><td>100</td></tr>\n<tr><td>INPUT_TEXTAREA_HEIGHT_MIN</td><td>Minimum height of a textarea.</td><td>4</td></tr>\n<tr><td>INPUT_TEXTAREA_HEIGHT_MAX</td><td>Maximum height of a textarea.</td><td>30</td></tr>\n<tr><td>INPUT_TEXTARRAY_SIZE_MIN</td><td>Minimum width of a textarray.</td><td>4</td></tr>\n<tr><td>INPUT_TEXTARRAY_SIZE_MAX</td><td>Maximum width of a textarray.</td><td>20</td></tr>\n</table>\n\n<h2>Diff Settings</h2>\n<p>These constants are used by the plain text class for executing it\'s diff method.</p>\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\n<tr><td>DIFF_COMMAND</td><td>Path to execute external diff command.</td><td>\'diff -u3\'</td></tr>\n<tr><td>DIFF_ADD_REGEX</td><td>Regex matching added lines in diff response.</td><td>\'/^\\+(.*)/\'</td></tr>\n<tr><td>DIFF_MINUS_REGEX</td><td>Regex matching removed lines in diff response.</td><td>\'/^\\-(.*)/\'</td></tr>\n</table>\n\n<p></p>\n\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Constants","2003-04-30 11:20:28");
INSERT INTO `tblobject` VALUES("-1570786539","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:11:\"Object List\";s:8:\"objectid\";s:11:\"-1570786539\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049311991\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051706551\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:679:\"<h1>Object List</h1>\n<p>This page lists all objects within the system.</p>\n<p><table>\n<tr><th>Title</th><th>Created</th><th>Author</th><th>Object Type</th></tr>\n<?php\nglobal $foowd_class_meta;\n$objects = $foowd->getObjects(\n\tNULL,\n\tNULL,\n\tarray(\'title\', \'classid\')\n);\nforeach ($objects as $object) {\n\techo \'<tr>\';\n\techo \'<td><a href=\"\', getURI(array(\n\t\t\'objectid\' => $object->objectid,\n\t\t\'classid\' => $object->classid\n\t)), \'\">\', $object->title, \'</a></td>\';\n\techo \'<td>\', date(DATETIME_FORMAT, $object->created), \'</td>\';\n\techo \'<td>\', $object->creatorName, \'</td>\';\n\techo \'<td>\', $foowd_class_meta[(int)$object->classid][\'description\'], \'</td>\';\n\techo \'</tr>\';\n}\n?>\n</table></p>\";s:8:\"evalCode\";s:1:\"1\";s:14:\"processInclude\";s:1:\"0\";}","Object List","2003-04-30 13:42:31");
INSERT INTO `tblobject` VALUES("-1570786539","2","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:11:\"Object List\";s:8:\"objectid\";s:11:\"-1570786539\";s:7:\"version\";s:1:\"2\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049311991\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051796068\";s:9:\"updatorid\";s:11:\"-1316331025\";s:11:\"updatorName\";s:4:\"Peej\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:931:\"<h1>Object List</h1>\n<p>This page lists all objects within the system.</p>\n<p><table>\n<tr><th>Title</th><th>Created</th><th>Author</th><th>Version</th><th>Object Type</th></tr>\n<?php\nglobal $foowd_class_meta;\n$objects = $foowd->getObjects(\n\tNULL,\n\tNULL,\n\tarray(\'title\', \'classid\')\n);\nforeach ($objects as $object) {\n\techo \'<tr>\';\n\techo \'<td><a href=\"\', getURI(array(\n\t\t\'objectid\' => $object->objectid,\n\t\t\'classid\' => $object->classid,\n\t\t\'version\' => $object->version\n\t)), \'\">\', $object->title, \'</a></td>\';\n\tif (isset($object->updatorName)) {\n\t\techo \'<td>\', date(DATETIME_FORMAT, $object->updated), \'</td>\';\n\t\techo \'<td>\', $object->updatorName, \'</td>\';\n\t} else {\n\t\techo \'<td>\', date(DATETIME_FORMAT, $object->created), \'</td>\';\n\t\techo \'<td>\', $object->creatorName, \'</td>\';\n\t}\n\techo \'<td>\', $object->version, \'</td>\';\n\techo \'<td>\', $foowd_class_meta[(int)$object->classid][\'description\'], \'</td>\';\n\techo \'</tr>\';\n}\n?>\n</table></p>\";s:8:\"evalCode\";s:1:\"1\";s:14:\"processInclude\";s:1:\"0\";}","Object List","2003-05-01 14:34:28");
INSERT INTO `tblobject` VALUES("-935188991","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"ChangeLog\";s:8:\"objectid\";s:10:\"-935188991\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1050234392\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051779802\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:1922:\"<h1>Change Log</h1>\n\n<dl>\n\n<dt>Version 0.8.1, 14 April 2003</dt>\n<dd>* Changed REGEX_ID default value to allow for id lengths up to 11 chars (10 digits plus minus sign)</dd>\n<dd>* Moved DEBUG and VERSION constant definitions from lib.php to class.foowd.php</dd>\n<dd>* Changed WHERE clause taken by DB functions to new format.</dd>\n<dd>+ Added file system connectivity module. Allows using the filesystem as the storage medium rather than MySQL, it is severely limited and untested, not recommended for use in live systems.</dd>\n<dd>+ Added foowd_user::lostPassword() class method for changing user password upon forgetting it, uses user e-mail address for verification.</dd>\n<dd>- Removed group by objectid clause from foowd::getObjects() function, if you want that clause you must now pass it in explicitly.</dd>\n<dd>* input_form::display_start() and input_form::display_end() added to enable you to output form header and footer individually without form elements.</dd>\n<dd>* Line break removed from after input objects output in display() function, input_form::display() now appends new line after each object upon output. This (combined with the two new form display functions) gives you more flexibility in outputting forms if you require it.</dd>\n<dd>+ Added constant ANONYMOUS_USER_CLASS, if set the value is taken as the classname to use for the pre-execution anonymous user object.</dd>\n<dd>* Fixed input_dropdown::set() to actually work :)</dd>\n<dd>* Moved calling of foowd_session_start() to before updating user last updated time in foowd::fetchUser().</dd>\n<dd>+ Added group clause to foowd::getObjects() and fixed bug when adding workspaceid to where clause.</dd>\n<dd>+ Added global var $DBAccess that is used to count the number of database requests. Foowd::destroy() changed to show value of $DBAccess if DEBUG is set.</dd>\n\n<dt>Version 0.8, 13 April 2003</dt>\n<dd>* First public alpha of FOOWD</dd>\n\n</dl>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","ChangeLog","2003-05-01 10:03:22");
INSERT INTO `tblobject` VALUES("-935188991","2","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"ChangeLog\";s:8:\"objectid\";s:10:\"-935188991\";s:7:\"version\";s:1:\"2\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1050234392\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1051971952;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:2814:\"<h1>Change Log</h1>\r\n\r\n<dl>\r\n\r\n<dt>Version 0.8.1, 14 April 2003</dt>\r\n<dd>* Changed REGEX_ID default value to allow for id lengths up to 11 chars (10 digits plus minus sign)</dd>\r\n<dd>* Moved DEBUG and VERSION constant definitions from lib.php to class.foowd.php</dd>\r\n<dd>* Changed WHERE clause taken by DB functions to new format.</dd>\r\n<dd>+ Added file system connectivity module. Allows using the filesystem as the storage medium rather than MySQL, it is severely limited and untested, not recommended for use in live systems.</dd>\r\n<dd>+ Added foowd_user::lostPassword() class method for changing user password upon forgetting it, uses user e-mail address for verification.</dd>\r\n<dd>- Removed group by objectid clause from foowd::getObjects() function, if you want that clause you must now pass it in explicitly.</dd>\r\n<dd>* input_form::display_start() and input_form::display_end() added to enable you to output form header and footer individually without form elements.</dd>\r\n<dd>* Line break removed from after input objects output in display() function, input_form::display() now appends new line after each object upon output. This (combined with the two new form display functions) gives you more flexibility in outputting forms if you require it.</dd>\r\n<dd>+ Added constant ANONYMOUS_USER_CLASS, if set the value is taken as the classname to use for the pre-execution anonymous user object.</dd>\r\n<dd>* Fixed input_dropdown::set() to actually work :)</dd>\r\n<dd>* Moved calling of foowd_session_start() to before updating user last updated time in foowd::fetchUser().</dd>\r\n<dd>+ Added group clause to foowd::getObjects() and fixed bug when adding workspaceid to where clause.</dd>\r\n<dd>+ Added global var $DBAccess that is used to count the number of database requests. Foowd::destroy() changed to show value of $DBAccess if DEBUG is set.</dd>\r\n<dd>* Fixed problem in setVarConstOrDefault() with setting value correctly when value is FALSE.</dd>\r\n<dd>* Added check into all create class methods to check for failed object creation (ie. the constructor found a problem and baulked).</dd>\r\n<dd>* Changed input_cookie constructor to not call input_cookie::set() and thus not try to write headers, set() must now be called explicitly if you want the cookie sent to the client.</dd>\r\n<dd>+ Added XML method to foowd_object that outputs the object as an XML document suitable for use with the objtool.</dd>\r\n<dd>* Re-wrote XML load section of objtool, will now load XML documents containing large numbers of objects.</dd>\r\n<dd>+ Added third parameter to foowd_object::save() that if set FALSE will prevent updating of updatorid, updatorName and updated member variables before saving (used in within objtool save).</dd>\r\n\r\n<dt>Version 0.8, 13 April 2003</dt>\r\n<dd>* First public alpha of FOOWD</dd>\r\n\r\n</dl>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","ChangeLog","2003-05-03 15:25:52");
INSERT INTO `tblobject` VALUES("-633383736","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:5:\"FOOWD\";s:8:\"objectid\";s:10:\"-633383736\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049314341\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1049725541\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:6:\"Author\";}s:4:\"body\";s:1269:\"<h1>Framework for Object Orientated Web Development</h1>\n\n<p>FOOWD is a framework for building object orientated (OO) web applications in PHP. It is a collection of base classes ripe for extending that handle object persistency, user authorisation, security, data administration, input handling, all the things required to build OO web applications.</p>\n\n<p>A good place to start at the moment might be with the <a href=\"?object=Object List\">Object List</a>.</p>\n\n<h2>Digesting FOOWD - The Beginnings of a FOOWD Manual</h2>\n\n<ol>\n<li><a href=\"?object=introduction\">Introduction</a></li>\n<li><a href=\"?object=classes\">System Classes</a>\n<ol>\n<li><a href=\"?object=class_foowd\">Foowd</a></li>\n<li><a href=\"?object=class_foowd_object\">Foowd_Object</a></li>\n<li><a href=\"?object=class_foowd_user\">Foowd_User</a></li>\n<li><a href=\"?object=class_foowd_workspace\">Foowd_Workspace</a></li>\n<li><a href=\"?object=class_foowd_class\">Foowd_Class</a></li>\n<li><a href=\"?object=class_foowd_text_plain\">Foowd_Text_Plain</a></li>\n<li><a href=\"?object=class_foowd_text_html\">Foowd_Text_HTML</a></li>\n</ol>\n</li>\n<li><a href=\"?object=input classes\">Input Classes</a></li>\n<li><a href=\"?object=functions\">System Functions</a></li>\n<li><a href=\"?object=constants\">System Constants</a>\n</ol>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","FOOWD","2003-04-07 15:25:41");
INSERT INTO `tblobject` VALUES("-633383736","2","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:5:\"FOOWD\";s:8:\"objectid\";s:10:\"-633383736\";s:7:\"version\";s:1:\"2\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049314341\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051896669\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:3374:\"<h1>Framework for Object Orientated Web Development</h1>\n\n<p>FOOWD is a framework for building object orientated (OO) web applications in PHP. It is a collection of base classes ripe for extending that handle object persistency, user authorisation, security, data administration, input handling, all the things required to build OO web applications.</p>\n\n<p class=\"quote\">\"I was looking for a framework that allowed me to use objects in a web application like you do in a regular application, where object instances last for the length of the application not the length of the user request. I didn\'t find one, so I designed FOOWD. It\'s a set of classes for creating PHP objects that will persist within the application allowing the much easier building of OO web apps.\"</p>\n\n<p>A good place to start at the moment might be with the <a href=\"?object=Object List\">Object List</a>.</p>\n\n<h2>Digesting FOOWD - The Beginnings of a FOOWD Manual</h2>\n<dl>\n<dt>I. Getting Started</dt>\n<dd>\n1. <a href=\"?object=introduction\">Introduction</a><br />\n2. <a href=\"?object=installation\">Installation &amp; Configuration</a><br />\n3. <a href=\"?object=definitions\">Definitions / Terminology</a><br />\n</dd>\n<dt>II. Writing FOOWD Applications</dt>\n<dd>\n4. <a href=\"?object=writing system classes\">Extending the Base Classes</a><br />\n5. <a href=\"?object=writing lead-in documents\">Lead-in Documents</a><br />\n6. <a href=\"?object=writing input classes\">Writing Input Classes</a><br />\n7. <a href=\"?object=examples\">Examples</a> - In Progress<br />\n</dd>\n<dt>III. FOOWD Internals</dt>\n<dd>\n8. <a href=\"?object=environment class\">FOOWD Environment Class</a><br />\n9. <a href=\"?object=base classes\">Base Classes</a><br />\n10. <a href=\"?object=input classes\">Input Classes</a><br />\n11. <a href=\"?object=functions\">System Functions</a><br />\n12. <a href=\"?object=constants\">System Constants</a><br />\n</dd>\n<dt>IV. Using FOOWD</dt>\n<dd>\n13. <a href=\"?object=authentication\">User Authentication</a><br />\n14. <a href=\"?object=permissions\">Method Permissions &amp; User Groups</a> - To Be Written<br />\n15. <a href=\"?object=dynamic class\">Writing Dynamic Classes</a> - To Be Written<br />\n16. <a href=\"?object=workspaces\">Using Workspaces</a> - To Be Written<br />\n17. <a href=\"?object=cache\">Output Caching</a> - To Be Written<br />\n</dd>\n</dl>\n\n<h2>Whatever Happened To Wiki Type Framework (WTF)?</h2>\n<p>WTF was the prequal to FOOWD, written between Sept 2001 and July 2002, it had a much narrower scope than FOOWD, that of to create a content management system using <a href=\"http://c2.com/cgi/wiki?WikiWikiWeb\">Wiki</a> principles. FOOWD on the other hand is a OO web application framework and builds upon everything I learnt from writing WTF to create a more flexible and better rounded development framework.</p>\n\n<h2>Development Progress</h2>\n<ul>\n<li>Data Persistency - <strong>Complete</strong></li>\n<li>Object Access - <strong>Complete</strong></li>\n<li>User Authorisation - <strong>Complete</strong></li>\n<li>Security - <strong>Complete</strong></li>\n<li>Version Control - <strong>Complete</strong></li>\n<li>Workspaces - <strong>Complete</strong></li>\n<li>Input Handling - <strong>Complete</strong></li>\n<li>Output Caching - <strong>Complete</strong></li>\n<li>Dynamic Classes - TBD</li>\n</ul>\n\n<h2>Downloads</h2>\n<p><a href=\"?object=downloads\">FOOWD downloads can be found here</a>.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","FOOWD","2003-05-02 18:31:09");
INSERT INTO `tblobject` VALUES("-184527836","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:12:\"Introduction\";s:8:\"objectid\";s:10:\"-184527836\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049712473\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051785616\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:7540:\"<h1>An Introduction to FOOWD</h1>\n\n<p>FOOWD is a framework for building object orientated (OO) web applications in PHP. It is a collection of base classes ripe for extending that handle object persistency, user authorisation, security, data administration, input handling, all the things required to build OO web applications. The idea is to bring the ease of OO development and object persistance to the sporadic requests of the HTTP environment, enabling object instances to be created and used through the lifetime of the application not just the HTTP request.</p>\n\n<h3>Objects</h3>\n<p>FOOWD provides a generic data storage structure to store objects as text strings in the storage medium, allowing re-creation of object instances as required. All storage processing is handled by the base class member functions, allowing all inherited objects to save and restore themselves.</p>\n\n<h3>Methods</h3>\n<p>Methods are then defined on objects that provide some interaction between the object and the clients browser, be it outputting the objects contents, providing forms for changing the objects member variables, or whatever.</p>\n\n<img src=\"foowd diagram.jpg\" width=\"330\" height=\"330\" class=\"pic\" alt=\"Diagram of FOOWD objects\" />\n\n<h3>Base System Class</h3>\n<p>The base system class is a framework class to be extended and is what makes FOOWD work as a framework. It handles saving and restoring objects, method permissions, member variable verification, object version control, object creation, administration and destruction. All other system classes (FOOWD classes or user defined classes) inherit from this base class.</p>\n\n<h2>Features</h2>\n\n<ul>\n<li><a href=\"#Data Persistency\">Data Persistency</a></li>\n<li><a href=\"#Object Access\">Object Access</a></li>\n<li><a href=\"#User Authorisation\">User Authorisation</a></li>\n<li><a href=\"#Security\">Security</a></li>\n<li><a href=\"#Version Control\">Version Control</a></li>\n<li><a href=\"#Workspaces\">Workspaces</a></li>\n<li><a href=\"#Input Handling\">Input Handling</a></li>\n<li><a href=\"#Output Caching\">Output Caching</a></li>\n<li><a href=\"#Distributed Development\">Distributed Development</a></li>\n</ul>\n\n<a name=\"Data Persistency\"></a>\n<h3>Data Persistency</h3>\n<p>FOOWD provides a generic data storage structure to store objects as text strings in the storage medium, allowing re-creation of object instances as required. All storage processing is handled by the base class (foowd_object) member functions, allowing all inherited objects to save and restore themselves. Individual class member variables can be assigned index status (if using a storage medium that supports indexes) allowing objects to be found upon the value of their member variables. The database structure is automatically altered by FOOWD to create the new indexes as required.</p>\n\n<a name=\"Object Access\"></a>\n<h3>Object Access</h3>\n<p>The FOOWD system is set up to allow a small number of verbs to affect a large number of nouns, where the nouns are object instances within the system and the verbs are methods which can be called upon them. Methods are defined as member functions that can be evoked via a user.</p>\n<p>Objects are indexed by four values.</p>\n<h4>Object ID</h4>\n<p>All objects are given a 32-bit integer ID generated automatically from the objects Title string via the crc32 hash algorithm. Collisions (caused either by two objects having the same Title or a collision in the crc32 algorithm) are handled by incrementing the ID until a unique value is found. Objects can be retrieved by knowing either the Title or the ID, the Title being hashed to give the ID for lookup.</p>\n<h4>Class ID</h4>\n<p>The Object ID of the class of the object. This allows easy identifying of objects of a certain type, as well as allowing two objects of different classes to have the same Object ID (and thus the same Title without causing lookup problems).</p>\n<h4>Version Number</h4>\n<p>Version control is an inbuilt and integral part of FOOWD, allowing multiple versions of the same object to exist and a history of previous versions to be stored. The base object save member function handles the creation of new versions and garbage collection of previous versions automatically.</p>\n<h4>Workspace ID</h4>\n<p>All objects belong to a Workspace given by the Workspaces Object ID. A user (being an object themselves) also belong to a Workspace, thus both user and the users objects can be moved to a separate Workspace away from interfering with existing objects in the main Workspace.</p>\n<h4>Method</h4>\n<p>Once an object is retrieved and unserialized into a live object, an object method is called to carry out whatever processing is required.</p>\n\n<a name=\"Security\"></a>\n<h3>Security</h3>\n<p>Object methods are permission controlled by the system, only allowing user groups with per object permission to execute the method. One class within the base system provides user objects which are tied to incoming client requests placing the client within one or more user groups.</p>\n\n<a name=\"Version Control\"></a>\n<h3>Version Control</h3>\n<p>All objects within FOOWD automatically have previous versions archived when changes are saved back to the storage medium, this allows objects to be rolled back to previous versions.</p>\n\n<a name=\"Workspaces\"></a>\n<h3>Workspaces</h3>\n<p>Workspaces are self-contained areas within a FOOWD system where users and objects can be placed. Objects within a Workspace ca not be accessed from outside that Workspace, they do not appear to exist to any user outside the Workspace.</p>\n<p>All objects outside any Workspaces (in the space often known as the Base Workspace) can be accessed by user from within a Workspace, but objects within the Workspace with the same Object ID, Class ID and Version Number of objects outside will be visible rather than the outside objects. In this way, a user can clone objects into a Workspace and work on them as if they were live in the system but without any other users seeing his changes or being effected.</p>\n\n<a name=\"Input Handling\"></a>\n<h3>Input Handling</h3>\n<p>The standard HTTP input mechanisms (GET, POST, COOKIE) are wrapped in easy to use and extend objects that handle all elements of input capture, persistence and validation.</p>\n\n<a name=\"Output Caching\"></a>\n<h3>Output Caching</h3>\n<p>Performance is always an issue with dynamic systems, to increase performance when and where it might be needed FOOWD adds a caching layer to method calls. Commonly accessed methods (like your homepages view method for example) can be set to have their output cached by FOOWD, upon re-request the cache is accessed and returned rather than re-processing the object method. This can be particularly useful if your method does a lot of calculations and yet does not need to produce a freshly updated result each request (for example reading stock values from a remote source). The cache can be set for each object method individually and told to flush the cache after a certain amount of time.</p>\n\n<a name=\"Distributed Development\"></a>\n<h3>Distributed Development</h3>\n<p>Classes can be defined dyamically, that is there is a class within the base system that defines objects that define class definitions allowing you to create new class types dynamically in the storage medium.</p>\n<p>This coupled with workspaces, version control, and the security system, leads to a fully distributed development environment allowing many developers to work on a live web application without steping on each other toes and with instant results.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Introduction","2003-05-01 11:40:16");
INSERT INTO `tblobject` VALUES("-21706243","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:14:\"Authentication\";s:8:\"objectid\";s:9:\"-21706243\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1051783887\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051804468\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:6153:\"<h1>User Authentication</h1>\n\n<p>When we create an instance of the FOOWD environment class, as well as initialising database connections it also tries to identify who has sent the request that created it and thus load the correct user object. It does this in one of fourways depending on how you configure the system.</p>\n\n<ul>\n<li><a href=\"#http\">HTTP Authentication</a></li>\n<li><a href=\"#cookie\">Cookie</a></li>\n<li><a href=\"#ip\">IP</a></li>\n</ul>\n\n<hr />\n\n<a name=\"http\"></a>\n<h2>HTTP Authentication</h2>\n\n<p>With HTTP Authentication FOOWD will check for HTTP headers from the client containing user identification.</p>\n\n<p>When logging in (using the user::login clas method) FOOWD will issue a HTTP response to the browser asking for identification which normally results in the browser displaying a password box for the user to fill out. Once submitted, FOOWD will authenticate the given details and given they are correct the browser will continue to send the user identification details with every request until the browser is closed. In this way every incoming request can be tied to a user object.</p>\n\n<p class=\"nb\"><strong>Note:</strong> HTTP Authentication does not work using IIS when running PHP as a CGI module. This is due to a limitation of IIS.</p>\n\n<p>HTTP Authentication is the default authentication configuration for FOOWD, however to specifically enable it define the value of the constant AUTH_TYPE to \'http\'.</p>\n\n<p>\n<strong>PRO:</strong> All browsers support HTTP Auth, no reliance on certain browser technology.<br />\n<strong>CON:</strong> A user has to log in each time they start a browsing session.<br />\n<strong>CON:</strong> You have no control over the look and intergration of the password box the browser displays.<br />\n</p>\n\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Required Value</th><th>Default</th></tr>\n<tr><td>AUTH_TYPE</td><td>Tells FOOWD which type of auth to use.</td><td>\'http\'</td><td>\'http\'</td></tr>\n<tr><td>AUTH_REALM</td><td>The name of the HTTP Auth realm to use.</td><td>&lt;string&gt;</td><td>\'Framework for Object Orientated Web Development\'</td></tr>\n</table>\n\n<hr />\n\n<a name=\"cookie\"></a>\n<h2>Cookie</h2>\n\n<p>When using cookies to identify the incoming request, FOOWD will look for a cookie being sent within the HTTP request containing user identification.</p>\n\n<p>When logging in (using the user::login clas method) FOOWD will display a log in form. Once submitted, FOOWD will authenticate the given details and given they are correct send a cookie request to the browser to store the users username and encrypted password. Upon further HTTP requests from that user the cookie will also be recieved and thus the request can be tied to a user object.</p>\n\n<p class=\"nb\"><strong>Jargon Buster:</strong> A cookie is a HTTP header sent from the client that contains a number of key value pairs set previously by the domain the request is going to. A HTTP response from a site can contain headers requesting the client browser to remember a key value pair for that domain, then when a HTTP request is placed to that domain the browser sends that data in the header of the request as a cookie.</p>\n\n<p>\n<strong>PRO:</strong> A user is logged in for as long as the cookie remains on their system.<br />\n<strong>CON:</strong> Not all browsers support cookies or have cookie accepting turned on.<br />\n</p>\n\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Required Value</th><th>Default</th></tr>\n<tr><td>AUTH_TYPE</td><td>Tells FOOWD which type of auth to use.</td><td>\'cookie\'</td><td>\'http\'</td></tr>\n<tr><td>COOKIE_EXPIRE</td><td>Life of the cookie in seconds.</td><td>&lt;int&gt;</td><td>31536000</td></tr>\n<tr><td>COOKIE_PATH</td><td>The path the cookie exists for.</td><td>&lt;string&gt;</td><td>\'\'</td></tr>\n<tr><td>COOKIE_DOMAIN</td><td>The domain the cookie exists for.</td><td>&lt;string&gt;</td><td>\'\'</td></tr>\n<tr><td>COOKIE_SECURE</td><td>Whether the cookie should be sent over https connections.</td><td>0|1</td><td>0</td></tr>\n</table>\n\n<hr />\n\n<a name=\"ip\"></a>\n<h2>IP</h2>\n\n<p>With IP Authentication FOOWD will check the IP address the request is coming from and use this address to select a user.</p>\n\n<p class=\"nb\"><strong>Note:</strong> This authentication mode is suitable only for environments where you know the IP addresses of all incoming requests and where you are not wanting to dynamically create user accounts, ie. in an intranet environment.</p>\n\n<p>With this setting, uses are either always logged in or always visit the site as the anonymous user. When a request arrives, FOOWD checks the IP address the request originated from and looks for a matching constant defined within the FOOWD configuration file. If found, this constant gives the username of the user to load for that particular request. This enables you to hardcode workstations accessing the site to a single user account.</p>\n\n<p>It is also possible to use IP authentication along side the other authentication mechanisms. If FOOWD finds a defined constant that matches the incoming request, it will always be used to load a user account even if one of the other mechanisms are in use. This allows you to lock certain network addresses to a certain user accounts, for example for administrative purposes.</p>\n\n<p>\n<strong>PRO:</strong> Can be useful in an intranet environment where accounts can be created for each machine on the network and managed from the central source.<br />\n<strong>CON:</strong> Users have to be on the same network address all the time, not suitable in a dial-up situation or where users move from computer to computer.<br />\n<strong>CON:</strong> User accounts have to be made and managed by the site administrator since they need to be linked to IP addresses in the FOOWD configuration file.<br />\n</p>\n\n<table border=\"1\">\n<tr><th>Constant</th><th>Description</th><th>Required Value</th><th>Default</th></tr>\n<tr><td>AUTH_TYPE</td><td>Tells FOOWD which type of auth to use.</td><td>\'ip\'</td><td>\'http\'</td></tr>\n<tr><td>AUTH_IP_&lt;ip&gt;</td><td>Link IP address to user account.</td><td>&lt;username&gt;</td><td>N/A</td></tr>\n</table>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Authentication","2003-05-01 16:54:28");
INSERT INTO `tblobject` VALUES("1697896","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:21:\"Writing Input Classes\";s:8:\"objectid\";s:7:\"1697896\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1051654221\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051696342\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:26859:\"<h1>Writing Input Classes</h1>\n\n<p>This chapter covers input classes, they wrap up the standard HTTP input mechanisms (GET, POST, COOKIE) in easy to use and extend objects that handle all elements of input capture, persistence and validation. Most of the basic input mechanisms and widgets are covered with the existing input classes, however you may want to alter their behaviour or group them together into more complex and specific objects.</p>\n\n<pre><span class=\"code_structure\">class </span><span class=\"code_function\">input_querystring </span><span class=\"code_structure\">{\n    \n    var </span><span class=\"code_function\">$name</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// querystring name\n    </span><span class=\"code_structure\">var </span><span class=\"code_function\">$value</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// value of input\n    </span><span class=\"code_structure\">var </span><span class=\"code_function\">$regex</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// regex value must match\n    \n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_function\">$name</span><span class=\"code_structure\">, </span><span class=\"code_function\">$regex </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">$value </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">) {\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">name </span><span class=\"code_structure\">= </span><span class=\"code_function\">$name</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">regex </span><span class=\"code_structure\">= </span><span class=\"code_function\">$regex</span><span class=\"code_structure\">;\n        if (isset(</span><span class=\"code_function\">$_GET</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">])) {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">$_GET</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">]);\n        }\n        if (!isset(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)) {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value </span><span class=\"code_structure\">= </span><span class=\"code_function\">$value</span><span class=\"code_structure\">;\n        }\n    }\n    \n    function </span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">$value</span><span class=\"code_structure\">){\n        if (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">regex </span><span class=\"code_structure\">== </span><span class=\"code_function\">NULL </span><span class=\"code_structure\">|| </span><span class=\"code_function\">preg_match</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">regex</span><span class=\"code_structure\">, </span><span class=\"code_function\">$value</span><span class=\"code_structure\">)) {\n            if (</span><span class=\"code_function\">get_magic_quotes_gpc</span><span class=\"code_structure\">()) </span><span class=\"code_function\">$value </span><span class=\"code_structure\">= </span><span class=\"code_function\">stripslashes</span><span class=\"code_structure\">(</span><span class=\"code_function\">$value</span><span class=\"code_structure\">);\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value </span><span class=\"code_structure\">= </span><span class=\"code_function\">$value</span><span class=\"code_structure\">;\n            return </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">;\n        } else {\n            return </span><span class=\"code_function\">FALSE</span><span class=\"code_structure\">;\n        }\n    }\n}</span></pre>\n\n<p>This example of a querystring input object gives the general idea of how input objects work. The constructor tries to find a value from the querystring that matches the name and fits the regular expression given. In this way, each time the page is loaded, the input object contains the correct value as sent from the last HTTP request.</p>\n\n<p>Below we will run through the basic elements that make up a FOOWD input object.</p>\n\n<h2>Example</h2>\n\n<p>A good example of the power of input objects comes from the input_textarray class. This defines a collection of textboxes representing a PHP array and thus allowing keys and values to be added, updated, and deleted via a HTML form.</p>\n\n<pre><span class=\"code_structure\">class </span><span class=\"code_function\">input_textarray </span><span class=\"code_structure\">{\n    \n    var </span><span class=\"code_function\">$name</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// textarray name\n    </span><span class=\"code_structure\">var </span><span class=\"code_function\">$items</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// items in textarray\n    </span><span class=\"code_structure\">var </span><span class=\"code_function\">$regex</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// regex value must match\n    </span><span class=\"code_structure\">var </span><span class=\"code_function\">$caption</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// caption to place next to textarray\n    </span><span class=\"code_structure\">var </span><span class=\"code_function\">$size</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// size of textarray\n    </span><span class=\"code_structure\">var </span><span class=\"code_function\">$maxlength</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// maxlength of text allowed\n    </span><span class=\"code_structure\">var </span><span class=\"code_function\">$class</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// css class\n    \n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">input_textarray</span><span class=\"code_structure\">(</span><span class=\"code_function\">$name</span><span class=\"code_structure\">, </span><span class=\"code_function\">$regex </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">$items </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">$caption </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">$size </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">$maxlength </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">$class </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">) {\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">name </span><span class=\"code_structure\">= </span><span class=\"code_function\">$name</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">regex </span><span class=\"code_structure\">= </span><span class=\"code_function\">$regex</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$index </span><span class=\"code_structure\">= </span><span class=\"code_function\">0</span><span class=\"code_structure\">;\n        while (isset(</span><span class=\"code_function\">$_POST</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_key_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$index</span><span class=\"code_structure\">]) || isset(</span><span class=\"code_function\">$_GET</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_key_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$index</span><span class=\"code_structure\">])) {\n            if (isset(</span><span class=\"code_function\">$_POST</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_key_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$index</span><span class=\"code_structure\">])) {\n                </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">$_POST</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_key_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$index</span><span class=\"code_structure\">], </span><span class=\"code_function\">$_POST</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_value_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$index</span><span class=\"code_structure\">]);\n            } elseif (isset(</span><span class=\"code_function\">$_GET</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_key_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$index</span><span class=\"code_structure\">])) {\n                </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">$_GET</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_key_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$index</span><span class=\"code_structure\">], </span><span class=\"code_function\">$_GET</span><span class=\"code_structure\">[</span><span class=\"code_function\">$name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_value_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$index</span><span class=\"code_structure\">]);\n            }\n            </span><span class=\"code_function\">$index</span><span class=\"code_structure\">++;\n        }</span>\n</pre>\n\n<p>Here in the classes constructor we try to read our objects values from firstly the HTTP POST mechanism (a form submission), and if that fails, from the HTTP GET mechanism (the querystring).</p>\n\n<pre>\n        <span class=\"code_structure\">if (!isset(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">items</span><span class=\"code_structure\">)) {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">items </span><span class=\"code_structure\">= </span><span class=\"code_function\">$items</span><span class=\"code_structure\">;\n        }</span>\n</pre>\n\n<p>If that fails then no data has been submitted and this is the first time our object has been loaded, so we read in the default data passed to the constructor.</p>\n\n<pre>\n        <span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">caption </span><span class=\"code_structure\">= </span><span class=\"code_function\">$caption</span><span class=\"code_structure\">;\n        if (isset(</span><span class=\"code_function\">$maxlength</span><span class=\"code_structure\">)) {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">maxlength </span><span class=\"code_structure\">= </span><span class=\"code_function\">$maxlength</span><span class=\"code_structure\">;\n        } else {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">maxlength </span><span class=\"code_structure\">= </span><span class=\"code_function\">getRegexLength</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">regex</span><span class=\"code_structure\">, </span><span class=\"code_function\">16</span><span class=\"code_structure\">);\n        }\n        if (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">maxlength </span><span class=\"code_structure\">== </span><span class=\"code_function\">0</span><span class=\"code_structure\">) </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">maxlength </span><span class=\"code_structure\">= </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">;\n        if (</span><span class=\"code_function\">$size</span><span class=\"code_structure\">) {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size </span><span class=\"code_structure\">= </span><span class=\"code_function\">$size</span><span class=\"code_structure\">;\n        } elseif (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">maxlength </span><span class=\"code_structure\">== </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">) {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size </span><span class=\"code_structure\">= </span><span class=\"code_function\">INPUT_TEXTARRAY_SIZE_MAX</span><span class=\"code_structure\">;\n        } else {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size </span><span class=\"code_structure\">= </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">maxlength </span><span class=\"code_structure\">* </span><span class=\"code_function\">1.5</span><span class=\"code_structure\">;\n            if (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size </span><span class=\"code_structure\">&lt; </span><span class=\"code_function\">INPUT_TEXTARRAY_SIZE_MIN</span><span class=\"code_structure\">) </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size </span><span class=\"code_structure\">= </span><span class=\"code_function\">INPUT_TEXTARRAY_SIZE_MIN</span><span class=\"code_structure\">;\n            if (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size </span><span class=\"code_structure\">&gt; </span><span class=\"code_function\">INPUT_TEXTARRAY_SIZE_MAX</span><span class=\"code_structure\">) </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size </span><span class=\"code_structure\">= </span><span class=\"code_function\">INPUT_TEXTARRAY_SIZE_MAX</span><span class=\"code_structure\">;\n        }\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">class </span><span class=\"code_structure\">= </span><span class=\"code_function\">$class</span><span class=\"code_structure\">;\n    }\n    \n    function </span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">$key</span><span class=\"code_structure\">, </span><span class=\"code_function\">$value</span><span class=\"code_structure\">) {\n        if (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">regex </span><span class=\"code_structure\">== </span><span class=\"code_function\">NULL </span><span class=\"code_structure\">|| </span><span class=\"code_function\">preg_match</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">regex</span><span class=\"code_structure\">, </span><span class=\"code_function\">$value</span><span class=\"code_structure\">)) {\n            if (</span><span class=\"code_function\">get_magic_quotes_gpc</span><span class=\"code_structure\">()) </span><span class=\"code_function\">$value </span><span class=\"code_structure\">= </span><span class=\"code_function\">stripslashes</span><span class=\"code_structure\">(</span><span class=\"code_function\">$value</span><span class=\"code_structure\">);\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">items</span><span class=\"code_structure\">[</span><span class=\"code_function\">$key</span><span class=\"code_structure\">] = </span><span class=\"code_function\">$value</span><span class=\"code_structure\">;\n            return </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">;\n        } else {\n            return </span><span class=\"code_function\">FALSE</span><span class=\"code_structure\">;\n        }\n    }</span>\n</pre>\n\n<p>The set function does our assignment operations on the object, setting keys of our array to values. Firstly we check that our new value matches our regular expression defining what is a valid value. If it is valid we can do the assignment updating our array.</p>\n\n<p>Not how we don\'t need a delete key function. When the page is submitted and the object is loaded for the second time, our objects array will be built from the submitted data within the HTTP request. So to delete a key, we simply fail to pass that key on with the submitted data, ie. by setting it\'s value to the empty string so that PHP treats it as unset and it won\'t get added to our array.</p>\n\n<pre>\n    <span class=\"code_structure\">function </span><span class=\"code_function\">display</span><span class=\"code_structure\">() {\n        echo </span><span class=\"code_string\">\'&lt;table&gt;\'</span><span class=\"code_structure\">;\n        echo </span><span class=\"code_string\">\'&lt;tr&gt;&lt;td&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">caption</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;/td&gt;\'</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$foo </span><span class=\"code_structure\">= </span><span class=\"code_function\">0</span><span class=\"code_structure\">;\n        foreach (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">items </span><span class=\"code_structure\">as </span><span class=\"code_function\">$key </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">$value</span><span class=\"code_structure\">) {\n            if (</span><span class=\"code_function\">$foo </span><span class=\"code_structure\">&gt; </span><span class=\"code_function\">0</span><span class=\"code_structure\">) echo </span><span class=\"code_string\">\'&lt;tr&gt;&lt;td&gt;&lt;/td&gt;\'</span><span class=\"code_structure\">;\n            echo </span><span class=\"code_string\">\'&lt;td&gt;&lt;input name=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_key_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$foo</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" type=\"text\" value=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">htmlentities</span><span class=\"code_structure\">(</span><span class=\"code_function\">$key</span><span class=\"code_structure\">), </span><span class=\"code_string\">\'\" size=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" class=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">class</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" /&gt;&lt;/td&gt;\'</span><span class=\"code_structure\">;\n            echo </span><span class=\"code_string\">\'&lt;td&gt;&lt;input name=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_value_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$foo</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" type=\"text\" value=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">htmlentities</span><span class=\"code_structure\">(</span><span class=\"code_function\">$value</span><span class=\"code_structure\">), </span><span class=\"code_string\">\'\" size=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" maxlength=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">maxlength</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" class=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">class</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" /&gt;&lt;/td&gt;\'</span><span class=\"code_structure\">;\n            echo </span><span class=\"code_string\">\'&lt;/tr&gt;\'</span><span class=\"code_structure\">;\n            </span><span class=\"code_function\">$foo</span><span class=\"code_structure\">++;\n        }\n        if (</span><span class=\"code_function\">$foo </span><span class=\"code_structure\">&gt; </span><span class=\"code_function\">0</span><span class=\"code_structure\">) echo </span><span class=\"code_string\">\'&lt;tr&gt;&lt;td&gt;&lt;/td&gt;\'</span><span class=\"code_structure\">;\n        echo </span><span class=\"code_string\">\'&lt;td&gt;&lt;input name=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_key_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$foo</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" type=\"text\" value=\"\" size=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" class=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">class</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" /&gt;&lt;/td&gt;\'</span><span class=\"code_structure\">;\n        echo </span><span class=\"code_string\">\'&lt;td&gt;&lt;input name=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">name</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'_value_\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$foo</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" type=\"text\" value=\"\" size=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">size</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" maxlength=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">maxlength</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" class=\"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">class</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\" /&gt;&lt;/td&gt;\'</span><span class=\"code_structure\">;\n        echo </span><span class=\"code_string\">\'&lt;/tr&gt;\'</span><span class=\"code_structure\">;\n        echo </span><span class=\"code_string\">\'&lt;/table&gt;\'</span><span class=\"code_structure\">;\n    }\n}</span></pre>\n\n<p>Finally we have our display function. All input objects that are going to be used with the input_form object (ie. they output part of a HTML form and need to be wrapped in the HTML form tags) must have a display function. This function is called by input_form upon the calling of it\'s display function and is used to output the object to the browser. In this example our display function loops through each array item and outputs two HTML textboxes, one for the array key and one for the array value. We also output a blank two textboxes at the foot of the text array to be used to add a new key/value pair to our array.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Writing Input Classes","2003-04-30 10:52:22");
INSERT INTO `tblobject` VALUES("283651714","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:17:\"Environment Class\";s:8:\"objectid\";s:9:\"283651714\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1051698274\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051702169\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:8690:\"<h1>FOOWD Environment Class</h1>\n\n<p>The FOOWD environment is set up by creating an instance of the FOOWD environment class, below gives a brief overview of the class and it\'s member functions:</p>\n\n<ul>\n<li><a href=\"#class overview\">Class Overview</a></li>\n<li><a href=\"#usage example\">Usage Example</a></li>\n<li><a href=\"#getobjects\">GetObjects Clauses</a></li>\n</ul>\n\n<hr />\n\n<a name=\"class overview\"></a>\n<h2>Class Overview</h2>\n\n<h3>Member Variables</h3>\n<p class=\"membervars\">\nmixed <strong>conn</strong> - Database connection resource<br />\nobject <strong>user</strong> - Loaded user object<br />\nstring <strong>dbhost</strong> - Database hostname<br />\nstring <strong>dbuser</strong> - Database username<br />\nstring <strong>dbpass</strong> - Database password<br />\nstring <strong>dbname</strong> - Database name<br />\nstring <strong>dbtable</strong> - Database table name<br />\n</p>\n<h3>Constructor</h3>\n<p><strong>foowd</strong> ( array database [, array user ] )</p>\n<p class=\"para\">\narray <strong>database</strong> - Array of database settings.<br />\narray <strong>user</strong> - Array of user details.<br />\n</p>\n<h3>Member Functions</h3>\n<p><strong>destroy</strong> () - Destructor, close database connection and unset object instance.</p>\n<p>object <strong>fetchUser</strong> ( int userid ) - Get a user from the database.</p>\n<p class=\"para\">\nint <strong>userid</strong> - Objectid of user to retrieve.<br />\n</p>\n<p>object <strong>fetchObject</strong> ( array objectDetails ) - Get particular version of an object from the database (if no version given, latest is retrieved).</p>\n<p class=\"para\">\narray <strong>objectDetails</strong> - Array of object details.<br />\n</p>\n<p>array <strong>getObject</strong> ( array objectDetails ) - Get all versions of object from the database.</p>\n<p class=\"para\">\narray <strong>objectDetails</strong> - Array of object details.<br />\n</p>\n<p>array <strong>getObjects</strong> ( array whereClause [, array groupClause [, array orderClause [, int limit [, int workspaceid ]]]] ) - Get objects from the database.</p>\n<p class=\"para\">\narray <strong>whereClause</strong> - Array of SQL where clause.<br />\narray <strong>groupClause</strong> - Array of SQL group clause.<br />\narray <strong>orderClause</strong> - Array of SQL order clause.<br />\nint <strong>limit</strong> - Maximum number of objects to return.<br />\nint <strong>workspaceid</strong> - Workspace to get objects from, if empty uses current user workspace.<br />\n</p>\n<p class=\"nb\"><strong>Note:</strong> You can find out more about <a href=\"#getobjects\">the array structures of the first three parameters below</a>.</p>\n<p>object <strong>callMethod</strong> ( object object [, string methodName ] ) - Call a method on an object.</p>\n<p class=\"para\">\nobject <strong>object</strong> - Object to call the method on.<br />\nstring <strong>methodName</strong> - Name of method to call.<br />\n</p>\n<p>object <strong>callClassMethod</strong> ( string className [, string methodName ] ) - Call a method on a class.</p>\n<p class=\"para\">\nstring <strong>className</strong> - Name of class to call the method on.<br />\nstring <strong>methodName</strong> - Name of method to call.<br />\n</p>\n\n<hr />\n\n<a name=\"usage example\"></a>\n<h2>Usage Example</h2>\n\n<p>This example show you how to create the FOOWD environment and access objects within it.</p>\n\n<p class=\"nb\"><strong>Note:</strong> To find out more about initialising the FOOWD environment read the chapter on <a href=\"?object=writing lead-in documents\">Lead-in Documents</a>.</p>\n\n<pre><span class=\"code_comment\">// get name of object to fetch\n</span><span class=\"code_function\">$objectName </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'object\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">REGEX_TITLE</span><span class=\"code_structure\">);\n\n</span><span class=\"code_comment\">// get name of method to call\n</span><span class=\"code_function\">$method </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'method\'</span><span class=\"code_structure\">);\n\n</span><span class=\"code_comment\">// load FOOWD environment\n</span><span class=\"code_function\">$foowd </span><span class=\"code_structure\">= new </span><span class=\"code_function\">foowd</span><span class=\"code_structure\">();\n\nif (</span><span class=\"code_function\">$objectName</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value </span><span class=\"code_structure\">&amp;&amp; </span><span class=\"code_function\">$object </span><span class=\"code_structure\">= </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">fetchObject</span><span class=\"code_structure\">(\n    array(\n        </span><span class=\"code_string\">\'objectid\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">crc32</span><span class=\"code_structure\">(</span><span class=\"code_function\">strtolower</span><span class=\"code_structure\">(</span><span class=\"code_function\">$objectName</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)),\n    )\n)) { </span><span class=\"code_comment\">// we have the object\n    </span><span class=\"code_structure\">if (</span><span class=\"code_function\">$methodError </span><span class=\"code_structure\">= </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">callMethod</span><span class=\"code_structure\">(</span><span class=\"code_function\">$object</span><span class=\"code_structure\">, </span><span class=\"code_function\">$method</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)) { </span><span class=\"code_comment\">// call object method\n        </span><span class=\"code_structure\">echo </span><span class=\"code_string\">\'&lt;p&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$methodError</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;/p&gt;\'</span><span class=\"code_structure\">; </span><span class=\"code_comment\">// failed, so display error\n    </span><span class=\"code_structure\">}\n} else { </span><span class=\"code_comment\">// could not find object\n    </span><span class=\"code_structure\">echo </span><span class=\"code_string\">\'&lt;p&gt;Object not found.&lt;/p&gt;\'</span><span class=\"code_structure\">;\n}\n\n</span><span class=\"code_comment\">// destroy Foowd\n</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">destroy</span><span class=\"code_structure\">();</span></pre>\n\n<hr />\n\n<a name=\"getobjects\"></a>\n<h2>GetObjects Clauses</h2>\n\n<p>The getObjects member function takes three arrays which it passes directly to the FOOWD database layer. GetObjects is your route to accessing the database when you need to retrieve a group of objects depending on certain selecton criteria.</p>\n\n<p class=\"nb\"><strong>Note:</strong> It is possible to place calls to FOOWDs database layer directly if more control is needed, however this behaviour is undocumented and as with any direct database manipulation, not fool proof. See the file \"lib/db.mysql.php\" for more information.</p>\n\n<p>We\'ll run through each of the three parameters in order demonstrating how the arrays should be formatted:</p>\n\n<h3>Where Clause</h3>\n\n<p>The where clause is structured in operator grouped chunks, the best way to explain it is with an example.</p>\n\n<p>To use the WHERE clause of SQL string below with getObjects, the where clause array should be structured as shown:</p>\n\n<pre>SELECT object FROM tblObject WHERE (objectid = 123456789 OR title = \'Foo\') AND classid = 987654321</pre>\n\n<pre>$whereClause = array(\n    \'AND\',\n    array(\n        \'OR\',\n        \'objectid = 123456789\',\n        \'title = Foo\'\n    ),\n    \'classid = 987654321\'\n)</pre>\n\n<p>If only one condition is required then the array should contain only one element without an initial operator.</p>\n\n<h3>Group Clause</h3>\n\n<p>The group clause just takes an array of field names to group on.</p>\n\n<pre>SELECT object FROM tblObject GROUP BY version, classid</pre>\n\n<pre>$groupClause = array(\n    \'version\',\n    \'classid\'\n)</pre>\n\n<h3>Order By Clause</h3>\n\n<p>The order clause just takes an array of field names to order by.</p>\n\n<pre>SELECT object FROM tblObject ORDER BY title, version DESC</pre>\n\n<pre>$orderClause = array(\n    \'title\',\n    \'version DESC\'\n)</pre>\n\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Environment Class","2003-04-30 12:29:29");
INSERT INTO `tblobject` VALUES("385153371","1","425464453","0","O:10:\"foowd_user\":15:{s:5:\"title\";s:4:\"Root\";s:8:\"objectid\";s:9:\"385153371\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:9:\"425464453\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049287437\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1051975252;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:6:\"update\";s:6:\"Author\";s:5:\"clone\";s:4:\"Gods\";}s:8:\"password\";s:32:\"63a9f0ea7bb98050796b649e85481845\";s:5:\"email\";s:16:\"root@example.org\";s:6:\"groups\";a:2:{s:2:\":0\";s:4:\"Gods\";s:2:\":1\";s:7:\"Authors\";}}","Root","2003-05-03 16:20:52");
INSERT INTO `tblobject` VALUES("481979057","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:12:\"Installation\";s:8:\"objectid\";s:9:\"481979057\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049820390\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1050227946\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:7705:\"<h1>Installing &amp Configuring FOOWD</h1>\n\n<p>This chapter covers installing the FOOWD source and setting up your application. It\'s most likely if you\'re reading this that you are new to FOOWD and thus will just want to get it up and running first to see what it can do, so we\'ll concentrate on getting the base install working \"out of the box\". This will in effect create a clone of this site including a collection of initial objects.</p>\n\n<p class=\"nb\"><strong>Note:</strong> FOOWD is a PHP development framework so this document expects that you are prolific at writing PHP code and working with PHP source. You don\'t need to be a PHP guru to use FOOWD, but it might help.</p>\n\n<h2>What Do I Need?</h2>\n\n<p>Firstly you\'ll need a web server running PHP 4.2.0 or above. Setting up a server is beyond the scope of this document, but you can find out more about the <a href=\"http://httpd.apache.org\">Apache web server here</a> and about <a href=\"http://www.php.net/manual/en/\">installing and configuring PHP here</a>.</p>\n\n<p>Next you\'ll need a database server, currently FOOWD only supports MySQL, again the installation and configuration of MySQL is outside the scope of this document, but you can find <a href=\"http://www.mysql.com/documentation/\">how to install and configure MySQL here</a>.</p>\n\n<p>Finally you need the FOOWD source code and data, this is available <a href=\"?object=downloads\">from this site</a> in tar/gzip format.</p>\n\n<h2>Installation</h2>\n\n<h3>Extract FOOWD Files</h3>\n\n<p>Extract the archive into the web root of your web server keeping the directory structure in tact, the archive will create a directory called \"foowd\" which should look something like this:</p>\n\n<pre>\nfoowd\n|-config.default.php        Default config file\n|-index.php                 Default of the box lead-in file\n|-header.php                Document header\n|-footer.php                Document footer\n|-style.css                 Style sheet\n|-mysql.sql                 MySQL database create script\n|-lib\n| |-class.foowd.php         FOOWD environment class\n| |-class.object.php        Base system class\n| |-class.text.html.php     HTML text class\n| |-class.text.plain.php    Plain text class\n| |-class.user.php          User class\n| |-db.mysql.php            MySQL database layer\n| |-input.checkbox.php    \\\n| |-input.checkgroup.php  |\n| |-input.cookie.php      |\n| |-input.dropdown.php    |\n| |-input.file.php        \\\n| |-input.form.php         >Input classes\n| |-input.querystring.php /\n| |-input.radio.php       |\n| |-input.textarea.php    |\n| |-input.textarray.php   |\n| |-input.textbox.php     /\n| \\-lib.php                 FOOWD system functions\n\\-objects\n  \\-objtool.php             XML object import/export/backup tool\n</pre>\n\n<h3>Create Database</h3>\n\n<p>With the source unpacked, the next set is to set up the database.</p>\n\n<p>Connect to your MySQL server using your favourite client with a user with the appropriate privileges and either create yourself a new database or use an existing one you already have lying around ready. Use the database creation script mysql.sql to create the FOOWD table tlbObject and populate it with the initial data.</p>\n\n<p class=\"nb\"><strong>Note:</strong> If you are hiring database services you may only have one database available to use. FOOWD is very happy to share a database with other applications, it only uses a single table \"out of the box\" which can be named in the config file.</p>\n\n<p>Next, if you feel like it, create a database user for FOOWD to use and give it the privileges it requires to access the database.</p>\n\n<p class=\"nb\"><strong>Note:</strong> To get full functionality your database user will require the following privileges: Select, Insert, Update, Delete, Index, Alter. Many sysadmins are wary about giving users Alter privilege, without it FOOWD can not automatically restructure the data when objects of new classes are added to the system.</p>\n\n<h2>Configuration</h2>\n\n<p>Now that we have the database and the web server set up, we can configure FOOWD and get things rolling.</p>\n\n<h3>Creating The Config</h3>\n\n<p>Make a copy of config.default.php and open it in your favourite PHP editor. Most settings can be ignored for the purpose of this introduction, all you need to worry about are the database connection constants at the top of the file. Set the database server hostname, etc. and save the file.</p>\n\n<p class=\"nb\"><strong>Note:</strong> There are a number of system constants that effect the way FOOWD behaves, a full list of them <a href=\"?object=constants\">can be found here</a>.</p>\n\n<h3>Adjusting The Lead-In</h3>\n\n<p>Next open the lead-in document, index.php. The lead-in document is the document that the clients load and which then loads FOOWD and starts the ball rolling. You can write your own lead-in document specific for your own application, but for this guide the one included in the archive will do nicely. The lead-in does five things:</p>\n\n<ol>\n<li>Define system path and load config file (and FOOWD system files).</li>\n<li>Get data about object and method to request from HTTP request.</li>\n<li>Initialise the FOOWD environment.</li>\n<li>Load the object and call the required method.</li>\n<li>Clean up.</li>\n</ol>\n\n<p>We need to tell it to use your config file rather than config.default.php. So change the second line to point to your config.</p>\n\n<blockquote>require(\'config.myconf.php\');</blockquote>\n\n<p>And that should do it. Fire up a web browser and navigate to your new site, you should be greated by a congratulations page.</p>\n\n<h3>Setting Up Users</h3>\n\n<p>Now that FOOWD is up and running and you can access it, you need to take ownership of the system. The data within the archive comes with a single predefined user called \'root\' to help get you started. Use the menu at the foot of the page to execute the log in method on the user class (User::Login) and you will see the log in form. Log in with the username \'root\' giving the password \'root\' and you should find yourself logged in to the site.</p>\n\n<p>Firstly, before we change your password, we\'ll check out the root user using the object administration method. Click on the new \'Root\' link that has appeared at the foot of the page, this will call the default method on the user (view) which shows you some information about the user (if it\'s not there you are not logged in correctly, make sure your browser is accepting cookies and try again). Then find and click the \'Admin\' method again in the menu at the foot of the page, this will take you to the admin method and display you a huge form with a form widget for each member variable. The interesting thing to notice are the Permissions and Groups textbox arrays. The Permissions array defines which user groups (on the right) have access to which of the objects methods (on the left), you\'ll notice that the update method has permission by the user group \"Author\", a magical user group that contains just the original author of an object. The Groups array lists which user groups the user is a member of, in this case the \'Gods\' group. In FOOWD, user groups are simply text strings, a user belongs to a group if its name is in the groups array.</p>\n\n<p>Right, with that done we need to change roots password to something less obvious, so click on the \'Update\' method again in the menu at the foot of the page. This will display the user update form and allow you to change the password. Once changed you will be required to log in again with the new password.</p>\n\n<h2>All Done</h2>\n\n<p>And that\'s it for this little tutorial. You should have a working FOOWD application like this one. Now it\'s time for you to have a little play and then start making your own classes.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Installation","2003-04-13 10:59:06");
INSERT INTO `tblobject` VALUES("822396767","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:25:\"Writing Lead-in Documents\";s:8:\"objectid\";s:9:\"822396767\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1050318562\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1050342246\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:30184:\"<h1>Writing Lead-in Documents</h1>\n\n<p>This chapter covers the lead-in document, what it is, what it does, and how you can write your own it to suit your application.</p>\n\n<h2>Lead What?</h2>\n\n<tt>\"You can lead a horse to water, but you can\'t make him waterski.\"</tt>\n\n<p>The lead-in document is the document that is requested by the client, it is the entry point for requests to the FOOWD system, it is the PHP file you write to load FOOWD, get object details from the users request, load an object and call a method.</p>\n\n<p>The \"out-of-the-box\" install comes with one lead-in document called \"index.php\". This document does the basics and will probably be suitable for most people to use or at least use as a base.</p>\n\n<h2>Lead-in Outline</h2>\n\n<p>The lead-in does a number of things which we\'ll cover one at a time below. But first, here\'s what the default lead-in document looks like:</p>\n\n<pre>\n<span class=\"code_function\">&lt;?php</span><span class=\"code_function\">\n\ndefine</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'PATH\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// application path\n\n</span><span class=\"code_structure\">require(</span><span class=\"code_string\">\'config.default.php\'</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// include config and Foowd functions\n\n// get object details\n</span><span class=\"code_function\">$objectName </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'object\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">REGEX_TITLE</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$objectid </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'objectid\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'/^[0-9-]*$/\'</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$version </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'version\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'/^[0-9]*$/\'</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$className </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'class\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">REGEX_TITLE</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$classid </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'classid\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'/^[0-9-]*$/\'</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$method </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'method\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">);\n\n</span><span class=\"code_comment\">// convert object name into id (if name given rather than id)\n</span><span class=\"code_structure\">if (!isset(</span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">) &amp;&amp; isset(</span><span class=\"code_function\">$objectName</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)) {\n    </span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">crc32</span><span class=\"code_structure\">(</span><span class=\"code_function\">strtolower</span><span class=\"code_structure\">(</span><span class=\"code_function\">$objectName</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)));\n}\n</span><span class=\"code_comment\">// convert class name into id (if name given rather than id)\n</span><span class=\"code_structure\">if (!isset(</span><span class=\"code_function\">$classid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">) &amp;&amp; isset(</span><span class=\"code_function\">$className</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)) {\n    </span><span class=\"code_function\">$classid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">crc32</span><span class=\"code_structure\">(</span><span class=\"code_function\">strtolower</span><span class=\"code_structure\">(</span><span class=\"code_function\">$className</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)));\n}\n\n</span><span class=\"code_comment\">// init Foowd\n</span><span class=\"code_function\">$foowd </span><span class=\"code_structure\">= new </span><span class=\"code_function\">foowd</span><span class=\"code_structure\">();\n\n</span><span class=\"code_comment\">// fetch object / call methods\n</span><span class=\"code_structure\">if (isset(</span><span class=\"code_function\">$className</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">) &amp;&amp; !isset(</span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">) &amp;&amp; !isset(</span><span class=\"code_function\">$objectName</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)) { </span><span class=\"code_comment\">// call class method\n    </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">callClassMethod</span><span class=\"code_structure\">(</span><span class=\"code_function\">$className</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">, </span><span class=\"code_function\">$method</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">);\n} else { </span><span class=\"code_comment\">// fetch object\n\n    </span><span class=\"code_function\">$cacheName </span><span class=\"code_structure\">= </span><span class=\"code_function\">getCacheName</span><span class=\"code_structure\">(</span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">, </span><span class=\"code_function\">$classid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">, </span><span class=\"code_function\">$method</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// check cache settings\n    </span><span class=\"code_structure\">if (!</span><span class=\"code_function\">readCache</span><span class=\"code_structure\">(</span><span class=\"code_function\">$cacheName</span><span class=\"code_structure\">)) { </span><span class=\"code_comment\">// if couldn\'t read cache go fetch object\n        </span><span class=\"code_structure\">if (</span><span class=\"code_function\">$object </span><span class=\"code_structure\">= </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">fetchObject</span><span class=\"code_structure\">(\n            array(\n                </span><span class=\"code_string\">\'objectid\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\n                </span><span class=\"code_string\">\'version\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">$version</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\n                </span><span class=\"code_string\">\'classid\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">$classid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value\n            </span><span class=\"code_structure\">)\n        )) {\n            if (</span><span class=\"code_function\">$methodError </span><span class=\"code_structure\">= </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">callMethod</span><span class=\"code_structure\">(</span><span class=\"code_function\">$object</span><span class=\"code_structure\">, </span><span class=\"code_function\">$method</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">, </span><span class=\"code_function\">$cacheName</span><span class=\"code_structure\">)) { </span><span class=\"code_comment\">// call object method\n                </span><span class=\"code_structure\">echo </span><span class=\"code_string\">\'&lt;p&gt;\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$methodError</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'&lt;/p&gt;\'</span><span class=\"code_structure\">;\n            }\n        } else {\n            echo </span><span class=\"code_string\">\'&lt;p&gt;Object not found.&lt;/p&gt;\'</span><span class=\"code_structure\">;\n        }\n    }\n\n}\n\n</span><span class=\"code_comment\">// destroy Foowd\n</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">destroy</span><span class=\"code_structure\">();\n\n</span><span class=\"code_comment\">// prepend function\n</span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, &amp;</span><span class=\"code_function\">$object</span><span class=\"code_structure\">) {\n    @include(</span><span class=\"code_string\">\'header.php\'</span><span class=\"code_structure\">);\n}\n\n</span><span class=\"code_comment\">// append function\n</span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, &amp;</span><span class=\"code_function\">$object</span><span class=\"code_structure\">) {\n    @include(</span><span class=\"code_string\">\'footer.php\'</span><span class=\"code_structure\">);\n}\n\n</span><span class=\"code_function\">?&gt;</span>\n</pre>\n\n<h3>Include The FOOWD Library</h3>\n\n<p>Firstly we need to include the FOOWD files themselves. This is all done by including your config file in the lead-in, since the config file then includes the FOOWD system files your application requires.</p>\n\n<pre>\n<span class=\"code_function\">define</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'PATH\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// application path\n\n</span><span class=\"code_structure\">require(</span><span class=\"code_string\">\'config.default.php\'</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// include config and Foowd functions</span>\n</pre>\n\n<p>To make this a little easier, I always define a constant \"PATH\" that holds the path to the config file from the lead-in, just in case I want to move everything around or whatever. The PATH constant is only used in the lead-in and the config file, so if you don\'t feel the need you can always skip it.</p>\n\n<h3>Get Object Details From Request</h3>\n\n<p>Depending on what it is you want to do, your lead-in document will contain different code. However most of the time you\'ll be wanting to fetch an object from the system and call a method upon it where the object and method are passed into your application by the incoming HTTP request.</p>\n\n<pre>\n<span class=\"code_comment\">// get object details\n</span><span class=\"code_function\">$objectName </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'object\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">REGEX_TITLE</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$objectid </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'objectid\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'/^[0-9-]*$/\'</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$version </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'version\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'/^[0-9]*$/\'</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$className </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'class\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">REGEX_TITLE</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$classid </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'classid\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'/^[0-9-]*$/\'</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$method </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_querystring</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'method\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">);\n\n</span><span class=\"code_comment\">// convert object name into id (if name given rather than id)\n</span><span class=\"code_structure\">if (!isset(</span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">) &amp;&amp; isset(</span><span class=\"code_function\">$objectName</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)) {\n    </span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">crc32</span><span class=\"code_structure\">(</span><span class=\"code_function\">strtolower</span><span class=\"code_structure\">(</span><span class=\"code_function\">$objectName</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)));\n}\n</span><span class=\"code_comment\">// convert class name into id (if name given rather than id)\n</span><span class=\"code_structure\">if (!isset(</span><span class=\"code_function\">$classid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">) &amp;&amp; isset(</span><span class=\"code_function\">$className</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)) {\n    </span><span class=\"code_function\">$classid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">set</span><span class=\"code_structure\">(</span><span class=\"code_function\">crc32</span><span class=\"code_structure\">(</span><span class=\"code_function\">strtolower</span><span class=\"code_structure\">(</span><span class=\"code_function\">$className</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)));\n}</span>\n</pre>\n\n<p>Here we are creating six instances of the <a href=\"?object=input classes#input_querystring\">input_querystring</a> input object, they will each be receiving an important piece of information about what it is we want to do from the HTTP GET mechanism (aka. the querystring). There are four crucial pieces of information we need to access an object method:</p>\n\n<ul>\n<li>Object ID - The ID of the object.</li>\n<li>Object Version - The version of the object to get.</li>\n<li>Class ID - The ID of the class the object is a type of.</li>\n<li>Method Name - The name of the method to call.</li>\n</ul>\n\n<p>However FOOWD can guess the version (it will get the latest one) and class ID (it will return the first found matching object regardless of type) if we don\'t get given them, so really we just need an object ID and a method name.</p>\n\n<p>Accessing objects via ID is annoying, who can remember a 10 digit number for every object they want to access? Not me. So we also access object and class names from our request, we then use these to generate our object and class IDs if non were given explicitly.</p>\n\n<p>If for example you always wanted this lead-in document to work with objects of a certain type, or call a specific method, then you could hardcode these values into your lead-in document rather than fetch them from the querystring, or maybe you want to fetch them from HTTP POST, or cookie information, or a remote source, the choices are yours.</p>\n\n<h3>Create FOOWD Environment</h3>\n\n<pre>\n<span class=\"code_comment\">// init Foowd\n</span><span class=\"code_function\">$foowd </span><span class=\"code_structure\">= new </span><span class=\"code_function\">foowd</span><span class=\"code_structure\">();</span>\n</pre>\n\n<p>Next we initiate FOOWD itself, creating an instance of <a href=\"?object=base classes#foowd\">the FOOWD object</a>. Its constructor takes two parameters, both arrays, and infact neither required. The first is an array of database connection settings, but since we have set them in the config file we can just pass in an empty array and FOOWD will take the values from there. The second is an array of user details, again which we don\'t need since the user will be passing that.</p>\n\n<p>However, if we wanted, we could initiate FOOWD with a full set of database and user details forcing a certain database table or user.</p>\n\n<pre>\n<span class=\"code_comment\">// init Foowd\n</span><span class=\"code_function\">$foowd </span><span class=\"code_structure\">= new </span><span class=\"code_function\">foowd</span><span class=\"code_structure\">(\n    array(\n        </span><span class=\"code_string\">\'host\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_string\">\'myHostName\'</span><span class=\"code_structure\">,\n        </span><span class=\"code_string\">\'name\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_string\">\'myDatabaseName\'</span><span class=\"code_structure\">,\n        </span><span class=\"code_string\">\'user\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_string\">\'myUser\'</span><span class=\"code_structure\">,\n        </span><span class=\"code_string\">\'password\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_string\">\'myPassword\'</span><span class=\"code_structure\">,\n        </span><span class=\"code_string\">\'table\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_string\">\'myTable\'\n    </span><span class=\"code_structure\">),\n    array(\n        </span><span class=\"code_string\">\'loadUser\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">,\n        </span><span class=\"code_string\">\'username\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_string\">\'myUser\'</span><span class=\"code_structure\">,\n        </span><span class=\"code_string\">\'password\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_string\">\'myPassword\'\n    </span><span class=\"code_structure\">)\n);</span>\n</pre>\n\n<p>The other interesting option is setting \"loadUser\" to FALSE, this will ignore the username and password details given and always load the anonymous user.</p>\n\n<h3>Call Class Method</h3>\n\n<pre>\n<span class=\"code_structure\">if (isset(</span><span class=\"code_function\">$className</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">) &amp;&amp; !isset(</span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">) &amp;&amp; !isset(</span><span class=\"code_function\">$objectName</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">)) { </span><span class=\"code_comment\">// call class method\n    </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">callClassMethod</span><span class=\"code_structure\">(</span><span class=\"code_function\">$className</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">, </span><span class=\"code_function\">$method</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">);</span>\n</pre>\n\n<p>Given the object access details and having initiated FOOWD we\'re ready to do our real work. First our lead-in checks to see if we have been asked to call a class method, and if so we call the \"<a href=\"?object=base classes#foowd\">callClassMethod</a>\" member of our FOOWD object passing it the class and method names.</p>\n\n<h3>Handle Cache</h3>\n\n<p>If we are not looking for a class method then we must be looking for an object method. But before fetching the object we are first going to check for a cached copy of the method output which we can dish up instead and save ourselves some work.</p>\n\n<pre>\n<span class=\"code_structure\">} else { </span><span class=\"code_comment\">// fetch object\n    </span><span class=\"code_function\">$cacheName </span><span class=\"code_structure\">= </span><span class=\"code_function\">getCacheName</span><span class=\"code_structure\">(</span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">, </span><span class=\"code_function\">$classid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">, </span><span class=\"code_function\">$method</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// check cache settings\n    </span><span class=\"code_structure\">if (!</span><span class=\"code_function\">readCache</span><span class=\"code_structure\">(</span><span class=\"code_function\">$cacheName</span><span class=\"code_structure\">)) { </span>\n</pre>\n\n<p>The first statement calls the \"<a href=\"?object=functions#getcachename\">getCacheName</a>\" which checks our config settings to see if we are caching this object/method results, and if we are returns the name of the cache file to use. Next \"<a href=\"?object=functions#readcache\">readCache</a>\" tries to read that cachefile and if it exists outputs its contents. For more information on method caching read <a href=\"?object=cache\">the chapter on output caching</a>.</p>\n\n<h3>Fetch Object</h3>\n\n<pre>\n<span class=\"code_function\">        </span><span class=\"code_structure\">if (</span><span class=\"code_function\">$object </span><span class=\"code_structure\">= </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">fetchObject</span><span class=\"code_structure\">(\n            array(\n                </span><span class=\"code_string\">\'objectid\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">$objectid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\n                </span><span class=\"code_string\">\'version\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">$version</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\n                </span><span class=\"code_string\">\'classid\' </span><span class=\"code_structure\">=&gt; </span><span class=\"code_function\">$classid</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value\n            </span><span class=\"code_structure\">)\n        )) {</span>\n</pre>\n\n<p>Now we are finally ready to fetch our object from the database. We pass the \"<a href=\"?object=base classes#foowd\">fetchObject</a>\" member function an array of our object details and hope that the object exists.</p>\n\n<h3>Call Object Method</h3>\n\n<pre>\n<span class=\"code_function\">            </span><span class=\"code_structure\">if (</span><span class=\"code_function\">$methodError </span><span class=\"code_structure\">= </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">callMethod</span><span class=\"code_structure\">(</span><span class=\"code_function\">$object</span><span class=\"code_structure\">, </span><span class=\"code_function\">$method</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">, </span><span class=\"code_function\">$cacheName</span><span class=\"code_structure\">)) { </span><span class=\"code_comment\">// call object method\n                </span><span class=\"code_structure\">echo </span><span class=\"code_string\">\'&lt;p&gt;\'</span><span class=\"code_structure\">.</span><span class=\"code_function\">$methodError</span><span class=\"code_structure\">.</span><span class=\"code_string\">\'&lt;/p&gt;\'</span><span class=\"code_structure\">;\n            }</span>\n</pre>\n\n<p>If we get a valid object back we can call our method upon it.</p>\n\n<p>If earlier we got a cache filename back from our cache check, \"<a href=\"?object=base classes#foowd\">callMethod</a>\" will check if the cache file is out of date and if it is grab our method output and write a newer version of the cache file.</p>\n\n<pre>\n<span class=\"code_comment\">// destroy Foowd\n</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">destroy</span><span class=\"code_structure\">();</span>\n</pre>\n\n<p>And so finally we can dispose of our FOOWD environment and finish execution. The \"<a href=\"?object=base classes#foowd\">destroy</a>\" member function will close our database connection, and output any debug data if we set our DEBUG constant.</p>\n\n<p>That is the execution of our line-in document delt with, but we still have a couple of functions to look at.</p>\n\n<h3>Prepend &amp; Append</h3>\n\n<p>In our line-in (or in our config file, which ever you prefer) we can also define our prepend and append functions. These are two functions (as their names suggest) are called at the beginning and end of every method and are there to let you add a consistant header and footer to everything outputted by FOOWD.</p>\n\n<pre>\n<span class=\"code_comment\">// prepend function\n</span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, &amp;</span><span class=\"code_function\">$object</span><span class=\"code_structure\">) {\n    @include(</span><span class=\"code_string\">\'header.php\'</span><span class=\"code_structure\">);\n}\n\n</span><span class=\"code_comment\">// append function\n</span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, &amp;</span><span class=\"code_function\">$object</span><span class=\"code_structure\">) {\n    @include(</span><span class=\"code_string\">\'footer.php\'</span><span class=\"code_structure\">);\n}</span>\n</pre>\n\n<p>In the default line-in we simply include the files header.php and footer.php in these functions.</p>\n\n<p class=\"nb\"><strong>Note:</strong>These functions have to be called explicitly from within the method so user defined methods may not necessarily call them.</p>\n\n<h3>Session Start</h3>\n\n<p>You can also define a function called \"foowd_session_start\" that will be called upon a new user session being started.</p>\n\n<pre>\n<span class=\"code_comment\">// session start</span>\n<span class=\"code_structure\">function </span><span class=\"code_function\">foowd_session_start</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">) {\n    </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">user</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">hits</span><span class=\"code_structure\">++;\n}</span>\n</pre>\n\n<p>For more information on this, read <a href=\"?object=authentication\">the chapter on user authentication</a>.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Writing Lead-in Documents","2003-04-14 18:44:06");
INSERT INTO `tblobject` VALUES("936075699","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:7:\"Welcome\";s:8:\"objectid\";s:9:\"936075699\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1050232200\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1050232446\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:675:\"<h1>Congratulations!</h1>\n\n<h2>If you can see this page then FOOWD is working, well done.</h2>\n\n<p>You will now probably want to <a href=\"?class=foowd_user&method=login\">log in</a> as the \'Root\' user and change your password.</p>\n\n<p>A good place to start might be with the <a href=\"?object=FOOWD\">Main FOOWD Page</a> or the <a href=\"?object=Object List\">Object List</a>.</p>\n\n<p><strong>Broken Links?:</strong> If the links are not working, these pages expect index.php to be a default document on your server. You can fix the links by making sure index.php is a default document (by changing your server config or renaming index.php to a correct default document name).</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Welcome","2003-04-13 12:14:06");
INSERT INTO `tblobject` VALUES("1134249117","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:12:\"Base Classes\";s:8:\"objectid\";s:10:\"1134249117\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049712907\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051698217\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:12093:\"<h1>FOOWD Base Classes</h1>\n\n<p>The FOOWD system is made up of a number of classes, below gives a brief overview of each system class:</p>\n\n<ul>\n<li><a href=\"#foowd_object\">Foowd_Object</a> - Base system class</li>\n<li><a href=\"#foowd_user\">Foowd_User</a> - User class</li>\n<li><a href=\"#foowd_workspace\">Foowd_Workspace</a> - Workspace class</li>\n<li><a href=\"#foowd_class\">Foowd_Class</a> - Dynamic class definition class</li>\n<li><a href=\"#foowd_text_plain\">Foowd_Text_Plain</a> - Plain text class</li>\n<li><a href=\"#foowd_text_html\">Foowd_Text_HTML</a> - HTML text class</li>\n</ul>\n\n<hr />\n\n<a name=\"foowd_object\"></a>\n<h2>Foowd_Object</h2>\n<p>The FOOWD base system class, this class is the base class for all other system classes. It has member functions for saving objects to the storage medium, administrating objects, etc. all the base FOOWD object functionality.</p>\n<h3>Member Variables</h3>\n<p class=\"membervars\">\narray <strong>foowd_vars_meta</strong> - Member variable meta array<br />\narray <strong>foowd_indexes</strong> - Index meta array<br />\nstring <strong>title</strong> - Title<br />\nint <strong>objectid</strong> - Objectid<br />\nint <strong>version</strong> - Version number<br />\nint <strong>classid</strong> - Classid<br />\nint <strong>workspaceid</strong> - Workspaceid<br />\nint <strong>created</strong> - Creation timestamp<br />\nint <strong>creatorid</strong> - Creator objectid<br />\nint <strong>creatorName</strong> - Creator name<br />\nint <strong>updated</strong> - Updated timestamp<br />\nint <strong>updatorid</strong> - Updator objectid<br />\nint <strong>updatorName</strong> - Updator name<br />\narray <strong>permissions</strong> - Method permission list<br />\n</p>\n<h3>Constructor</h3>\n<p><strong>foowd_object</strong> ( object foowd [, title [, viewGroup [, adminGroup [, deleteGroup [, allowDuplicateTitle ]]]]] )</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>title</strong> - Title of object.<br />\nstring <strong>adminGroup</strong> - Admin group to set.<br />\nstring <strong>deleteGroup</strong> - Delete group to set.<br />\nbool <strong>allowDuplicateTitle</strong> - Whether to allow object to be created if another object with the same title already exists.<br />\n</p>\n<h3>Serialize Functions</h3>\n<p><strong>__sleep</strong> () - Magic serialization function, stop variable meta array and index array from being serialized.</p>\n<p><strong>__wakeup</strong> () - Magic serialization function, recreate variable meta array and index array whe unserialized.</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( object foowd, string member [, mixed value ] ) - Set a member variable.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>member</strong> - Name of member variable to set.<br />\nmixed <strong>value</strong> - Value to set member variable to.<br />\n</p>\n<p>bool <strong>save</strong> ( object foowd [, bool incrementVersion ] ) - Save object to database.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nbool <strong>incrementVersion</strong> - Create a new version of the object.<br />\n</p>\n<p>bool <strong>delete</strong> ( object foowd ) - Delete object from the database.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p class=\"nb\"><strong>Note:</strong> The object will still exist in memory until the end of execution (or it is unset), so if after deleting the save() member function si called the object will be recreated within the database.</p>\n<p>bool <strong>tidyArchive</strong> ( object foowd ) - Tidy up the objects archived versions.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p class=\"nb\"><strong>Note:</strong> This member function is called from within save() at the appropriate time and should not need to be called explicitly.</p>\n<h3>Class Methods</h3>\n<p><strong>class_create</strong> ( object foowd, string className ) - Create an instance of the class.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\n</p>\n<h3>Methods</h3>\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_history</strong> ( object foowd ) - View history of the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_admin</strong> ( object foowd ) - Administrate the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_revert</strong> ( object foowd ) - Revert the object to a previous version.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_delete</strong> ( object foowd ) - Delete the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_clone</strong> ( object foowd ) - Clone the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n\n<hr />\n\n<a name=\"foowd_user\"></a>\n<h2>Foowd_User extends Foowd_Object</h2>\n<p>FOOWD user class.</p>\n<h3>Member Variables</h3>\n<p class=\"membervars\">\nstring <strong>password</strong> - MD5 hash of user password<br />\nstring <strong>email</strong> - User e-mail address<br />\narray <strong>groups</strong> - Array of user groups user belongs to<br />\n</p>\n<h3>Constructor</h3>\n<p><strong>foowd_user</strong> ( object foowd [, string username [, string password [, string email [, array groups ]]]] )</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>username</strong> - Username of new user.<br />\nstring <strong>password</strong> - Password of new user.<br />\nstring <strong>email</strong> - E-mail address of new user.<br />\narray <strong>groups</strong> - Array of user groups of new user.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>inGroup</strong> ( string groupName ) - Is a user in a group.</p>\n<p class=\"para\">\nstring <strong>groupName</strong> - Name of group to check.<br />\n</p>\n<h3>Class Methods</h3>\n<p><strong>class_create</strong> ( object foowd, string className ) - Create an instance of the class.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\n</p>\n<p><strong>class_login</strong> ( object foowd, string className ) - Log in user.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\n</p>\n<p><strong>class_logout</strong> ( object foowd, string className ) - Log out user.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\n</p>\n<p><strong>class_lostPassword</strong> ( object foowd, string className ) - E-mail user and generate new random password.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\n</p>\n<h3>Methods</h3>\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_update</strong> ( object foowd ) - Update a users details.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n\n<hr />\n\n<a name=\"foowd_workspace\"></a>\n<h2>Foowd_Workspace extends Foowd_Object</h2>\n<p>Workspace class.</p>\n<h3>Member Variables</h3>\n<p class=\"membervars\">\nstring <strong>description</strong> - Text description of workspace<br />\n</p>\n<h3>Constructor</h3>\n<p><strong>foowd_workspace</strong> ( object foowd [, string title [, string description [, string viewGroup [, string adminGroup [, string deleteGroup [, string enterGroup ]]]]]] )</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>title</strong> - Title of new object.<br />\nstring <strong>description</strong> - Description of new object.<br />\nstring <strong>viewGroup</strong> - View method permission.<br />\nstring <strong>adminGroup</strong> - Admin method permission.<br />\nstring <strong>deleteGroup</strong> - Delete method permission.<br />\nstring <strong>enterGroup</strong> - Enter method permission.<br />\n</p>\n<h3>Class Methods</h3>\n<p><strong>class_create</strong> ( object foowd, string className ) - Create an instance of the class.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\n</p>\n<h3>Methods</h3>\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_enter</strong> ( object foowd ) - Enter the workspace.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n\n<hr />\n\n<a name=\"foowd_class\"></a>\n<h2>Foowd_Class extends Foowd_Object</h2>\n<p>TBD.</p>\n\n<hr />\n\n<a name=\"foowd_text_plain\"></a>\n<h2>Foowd_Text_Plain extends Foowd_Object</h2>\n<p>FOOWD plain text class.</p>\n<h3>Member Variables</h3>\n<p class=\"membervars\">\nstring <strong>body</strong> - Text content<br />\n</p>\n<h3>Constructor</h3>\n<p><strong>foowd_text_plain</strong> ( object foowd [, string title [, string body [, string viewGroup [, string adminGroup [, string deleteGroup [, string editGroup ]]]]]] )</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>title</strong> - Title of new object.<br />\nstring <strong>body</strong> - Text content of new object.<br />\nstring <strong>viewGroup</strong> - View method permission.<br />\nstring <strong>adminGroup</strong> - Admin method permission.<br />\nstring <strong>deleteGroup</strong> - Delete method permission.<br />\nstring <strong>editGroup</strong> - Edit method permission.<br />\n</p>\n<h3>Class Methods</h3>\n<p><strong>class_create</strong> ( object foowd, string className ) - Create an instance of the class.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\n</p>\n<h3>Methods</h3>\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_edit</strong> ( object foowd ) - Edit the objects text content.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n<p><strong>method_diff</strong> ( object foowd ) - Calculate differences between text content versions.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\n\n<hr />\n\n<a name=\"foowd_text_html\"></a>\n<h2>Foowd_Text_HTML extends Foowd_Text_Plain</h2>\n<p>FOOWD HTML text class.</p>\n<h3>Member Variables</h3>\n<p class=\"membervars\">\nbool <strong>evalCode</strong> - Should view method process embedded PHP processing instructions?<br />\nbool <strong>processInclude</strong> - Should view method process embedded include processing instructions?<br />\n</p>\n<h3>Member Functions</h3>\n<p>string <strong>processPIs</strong> ( object foowd, string str ) - Process embedded processing instructions.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\nstring <strong>str</strong> - Content text to process.<br />\n</p>\n<h3>Methods</h3>\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\n<p class=\"para\">\nobject <strong>foowd</strong> - FOOWD object.<br />\n</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Base Classes","2003-04-30 11:23:37");
INSERT INTO `tblobject` VALUES("1135357196","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"Functions\";s:8:\"objectid\";s:10:\"1135357196\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049718933\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1050342176\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:5593:\"<h1>FOOWD System Functions</h1>\n\n<p>FOOWD uses a number of additional system functions over the member functions of the FOOWD environment object and the system objects, these are included in the file lib.php and should be used whenever applicable. They are briefly outlined below:</p>\n\n<ul>\n<li><a href=\"#dbtrack\">DBTrack</a></li>\n<li><a href=\"#error\">Error</a></li>\n<li><a href=\"#show\">Show</a></li>\n<li><a href=\"#setvarconstordefault\">SetVarConstOrDefault</a></li>\n<li><a href=\"#setconstordefault\">SetConstOrDefault</a></li>\n<li><a href=\"#getregexlength\">GetRegexLength</a></li>\n<li><a href=\"#getcachename\">GetCacheName</a></li>\n<li><a href=\"#readcache\">ReadCache</a></li>\n<li><a href=\"#writecache\">WriteCache</a></li>\n<li><a href=\"#geturi\">GetURI</a></li>\n<li><a href=\"#splitpath\">SplitPath</a></li>\n<li><a href=\"#mungemail\">MungEmail</a></li>\n<li><a href=\"#starttime\">StartTime</a></li>\n<li><a href=\"#endtime\">EndTime</a></li>\n</ul>\n\n<hr />\n\n<h2>Debugging Functions</h2>\n\n<a name=\"#dbtrack\"></a>\n<h3>DBTrack</h3>\n<p>Used by storage medium layer, when debugging is enabled this function will output SQL strings to the user.</p>\n<p>void <strong>dbtrack</strong> ( string SQL )</p>\n<p class=\"para\">\nstring <strong>SQL</strong> - SQL statement to dump to output.<br />\n</p>\n\n<a name=\"#error\"></a>\n<h3>Error</h3>\n<p>Terminal error, prints message and stops execution.</p>\n<p>void <strong>error</strong> ( string error )</p>\n<p class=\"para\">\nstring <strong>error</strong> - Error message.<br />\n</p>\n\n<a name=\"#show\"></a>\n<h3>Show</h3>\n<p>Output an object or array with formatting.</p>\n<p>void <strong>show</strong> ( mixed variable )</p>\n<p class=\"para\">\nmixed <strong>variable</strong> - Variable to dump to output.<br />\n</p>\n\n<hr />\n\n<h2>System Functions</h2>\n\n<a name=\"#setvarconstordefault\"></a>\n<h3>SetVarConstOrDefault</h3>\n<p>Return the value if set and not null, or else the constant if defined, or else the given default value.</p>\n<p>mixed <strong>setVarConstOrDefault</strong> ( mixed value, string constant, mixed default )</p>\n<p class=\"para\">\nmixed <strong>value</strong> - Value to return if is set and not NULL.<br />\nstring <strong>constant</strong> - Name of constant to return if defined and value not returned.<br />\nmixed <strong>default</strong> - Default value to return if neither value or constant are returned.<br />\n</p>\n\n<a name=\"#setconstordefault\"></a>\n<h3>SetConstOrDefault</h3>\n<p>Return the constant if defined, or else the given default value.</p>\n<p>mixed <strong>setConstOrDefault</strong> ( string constant, mixed default )</p>\n<p class=\"para\">\nstring <strong>constant</strong> - Name of constant to return if defined and value not returned.<br />\nmixed <strong>default</strong> - Default value to return if neither value or constant are returned.<br />\n</p>\n\n<a name=\"#getregexlength\"></a>\n<h3>GetRegexLength</h3>\n<p>Find the max length of string allowed by the given regular expression. Returns zero if infinite length is allowed.</p>\n<p>int <strong>getRegexLength</strong> ( string regex, int default )</p>\n<p class=\"para\">\nstring <strong>regex</strong> - Regular expression to check.<br />\nint <strong>default</strong> - Default value to return if no length expression found in regular expression.<br />\n</p>\n\n<hr />\n\n<h2>Cache Functions</h2>\n\n<a name=\"#getcachename\"></a>\n<h3>GetCacheName</h3>\n<p>Check object access vars against cache settings to see if we should be read/writing a cache file for this request. If so, get cache file name and cache timeout.</p>\n<p>array <strong>getCacheName</strong> ( string objectid [, string classid [, string method ]] )</p>\n<p class=\"para\">\nstring <strong>objectid</strong> - Objectid of object in request.<br />\nstring <strong>classid</strong> - Classid of object in request.<br />\nstring <strong>method</strong> - Method in request.<br />\n</p>\n\n<a name=\"#readcache\"></a>\n<h3>ReadCache</h3>\n<p>Read a cache file and output the contents.</p>\n<p>bool <strong>readCache</strong> ( array cacheName )</p>\n<p class=\"para\">\narray <strong>cacheName</strong> - Array returned from getCacheName().<br />\n</p>\n\n<a name=\"#writecache\"></a>\n<h3>WriteCache</h3>\n<p>Write a new cache file from the given text.</p>\n<p>bool <strong>writeCache</strong> ( array cacheName , string text )</p>\n<p class=\"para\">\narray <strong>cacheName</strong> - Array returned from getCacheName().<br />\nstring <strong>text</strong> - Text string to write to cache.<br />\n</p>\n\n<hr />\n\n<h2>URI Functions</h2>\n\n<a name=\"#geturi\"></a>\n<h3>GetURI</h3>\n<p>Create an internal URI given object details and a method.</p>\n<p>string <strong>getURI</strong> ( array parameters )</p>\n<p class=\"para\">\narray <strong>parameters</strong> - Name value pairs to build up URI querystring.<br />\n</p>\n\n<a name=\"#splitpath\"></a>\n<h3>SplitPath</h3>\n<p>Slice up path and return sections as an array.</p>\n<p>array <strong>splitPath</strong> ()</p>\n\n<hr />\n\n<h2>Display Functions</h2>\n\n<a name=\"#mungemail\"></a>\n<h3>MungEmail</h3>\n<p>Randomly spam proof an e-mail address.</p>\n<p>string <strong>mungEmail</strong> ( string emailAddress )</p>\n<p class=\"para\">\nstring <strong>emailAddress</strong> - E-mail address to mung.<br />\n</p>\n\n<hr />\n\n<h2>Execution Time</h2>\n\n<a name=\"#starttime\"></a>\n<h3>StartTime</h3>\n<p>Return start time of execution.</p>\n<p>int <strong>startTime</strong> ()</p>\n\n<a name=\"#endtime\"></a>\n<h3>EndTime</h3>\n<p>Given the start time, calculate and return execution time in seconds.</p>\n<p>int <strong>endTime</strong> ( int startTime )</p>\n<p class=\"para\">\nint <strong>startTime</strong> - Start time integer as returned by startTime().<br />\n</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Functions","2003-04-14 18:42:56");
INSERT INTO `tblobject` VALUES("1265870005","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"Downloads\";s:8:\"objectid\";s:10:\"1265870005\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1050078501\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1050234318\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:464:\"<h1>Download FOOWD</h1>\n<h2>Latest Version Of FOOWD</h2>\n\n<ul>\n<li><a href=\"http://foowd.peej.co.uk/files/foowd-0.8.tar.bz2\">FOOWD 0.8 (tar.bz2)</a> [72Kb] - 13 April 2003</li>\n<li><a href=\"http://foowd.peej.co.uk/files/foowd-0.8.tar.gz\">FOOWD 0.8 (tar.gz)</a> [75Kb] - 13 April 2003</li>\n</ul>\n\n<p>For more information on this release see the <a href=\"?object=changelog\">ChangeLog</a>.</p>\n\n<hr />\n\n<h2>Older Versions Of FOOWD</h2>\n\n<p>Sorry nothing here yet.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Downloads","2003-04-13 12:45:18");
INSERT INTO `tblobject` VALUES("1653302329","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:13:\"Input Classes\";s:8:\"objectid\";s:10:\"1653302329\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049715984\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1051697866\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:13105:\"<h1>FOOWD Input Classes</h1>\n\n<p>The FOOWD system handles user input via a number of input classes that wrap up all elements of input capture, persistence and validation. Below gives a brief overview of each input class:</p>\n\n<ul>\n<li><a href=\"#input_cookie\">Input_Cookie</a> - HTTP cookie class</li>\n<li><a href=\"#input_form\">Input_Form</a> - HTML form class</li>\n<ul>\n<li><a href=\"#input_checkbox\">Input_Checkbox</a> - HTML checkbox class</li>\n<li><a href=\"#input_checkgroup\">Input_Checkgroup</a> - HTML checkbox group class</li>\n<li><a href=\"#input_dropdown\">Input_Dropdown</a> - HTML dropdown box class</li>\n<li><a href=\"#input_file\">Input_File</a> - HTML file upload class</li>\n<li><a href=\"#input_radio\">Input_Radio</a> - HTML radio button group class</li>\n<li><a href=\"#input_textarea\">Input_Textarea</a> - HTML textarea class</li>\n<li><a href=\"#input_textarray\">Input_Textarray</a> - HTML textbox array class</li>\n<li><a href=\"#input_textbox\">Input_Textbox</a> - HTML textbox class</li>\n</ul>\n<li><a href=\"#input_querystring\">Input_Querystring</a> - HTTP GET class</li>\n</ul>\n\n<hr />\n\n<a name=\"input_cookie\"></a>\n<h2>Input_Cookie</h2>\n<p class=\"nb\"><strong>Note:</strong> Cookies must be created, set, and/or deleted before any output is sent to the client (as you\'d expect).</p>\n<h3>Constructor</h3>\n<p><strong>input_cookie</strong> ( string name [, string regex [, string value [, int expire [, string path [, string domain [, bool secure ]]]]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>regex</strong> - Regular expression value must match to be valid.<br />\nstring <strong>value</strong> - Initial value of object.<br />\nstring <strong>expire</strong> - Seconds until cookie expires.<br />\nstring <strong>path</strong> - The path on the server in which the cookie will be available on.<br />\nstring <strong>domain</strong> - The domain that the cookie is available.<br />\nbool <strong>secure</strong> - Indicates that the cookie should only be transmitted over a secure HTTPS connection.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( string value ) - Set the value of the cookie.</p>\n<p class=\"para\">\nstring <strong>value</strong> - Value to set object to.<br />\n</p>\n<p>bool <strong>delete</strong> () - Delete the cookie from the client.</p>\n<hr />\n\n<a name=\"input_form\"></a>\n<h2>Input_Form</h2>\n<p>To create a HTML form, a form object is created and then one or more input objects attached to it.</p>\n<p><strong>Example:</strong></p>\n<pre>\n<span class=\"code_function\">$form </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_form</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'form\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'POST\'</span><span class=\"code_structure\">);\n</span><span class=\"code_function\">$name </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'name\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'/[a-zA-Z]+/\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Enter your name:\'</span><span class=\"code_structure\">);\nif (</span><span class=\"code_function\">$form</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">submitted</span><span class=\"code_structure\">()) {\n    echo </span><span class=\"code_string\">\'Welcome \'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$name</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">;\n} else {\n    </span><span class=\"code_function\">$form</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$name</span><span class=\"code_structure\">);\n    </span><span class=\"code_function\">$form</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">display</span><span class=\"code_structure\">();\n}</span>\n</pre>\n<h3>Constructor</h3>\n<p><strong>input_form</strong> (string name [, string location [, string method [, string submit [, string reset [, string preview ]]]]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>location</strong> - URI form submits to.<br />\nstring <strong>method</strong> - Method for form to use (\"GET\"/\"POST\").<br />\nstring <strong>submit</strong> - Text on submit button (unset hides submit button).<br />\nstring <strong>reset</strong> - Text on reset button (unset hides reset button).<br />\nstring <strong>preview</strong> - Text on preview button (unset hides preview button).<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>addObject</strong> ( object inputObject ) - Add an input object to the form.</p>\n<p class=\"para\">\nobject <strong>inputObject</strong> - Object to add.<br />\n</p>\n<p>bool <strong>submitted</strong> () - Returns TRUE if data has been submitted to the form and its input objects.</p>\n<p>bool <strong>previewed</strong> () - Returns TRUE if data has been submitted to the form via the preview button.</p>\n<p>void <strong>display</strong> () - Displays the form.</p>\n<p>void <strong>display_start</strong> () - Displays the form header (does not display form objects).</p>\n<p>void <strong>display_end</strong> () - Displays the form footer (does not display form objects).</p>\n<hr />\n\n<a name=\"input_checkbox\"></a>\n<h2>Input_Checkbox</h2>\n<h3>Constructor</h3>\n<p><strong>input_checkbox</strong> ( string name [, bool checked [, string caption ]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nbool <strong>checked</strong> - Initial value of the checkbox.<br />\nstring <strong>caption</strong> - Caption to place next to checkbox.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( bool value ) - Set the value of the checkbox.</p>\n<p class=\"para\">\nbool <strong>value</strong> - Value to set object to.<br />\n</p>\n<p>void <strong>display</strong> () - Display the object.</p>\n<hr />\n\n<a name=\"input_checkgroup\"></a>\n<h2>Input_Checkgroup</h2>\n<h3>Constructor</h3>\n<p><strong>input_checkgroup</strong> ( string name [, int value [, array checks ]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nint <strong>value</strong> - Initial value of the checkgroup.<br />\narray <strong>checks</strong> - Array of values for the checkgroup, with array value as checkbox caption.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( bool value ) - Set the value of the checkgroup.</p>\n<p class=\"para\">\nbool <strong>value</strong> - Value to set object to.<br />\n</p>\n<p>bool <strong>isChecked</strong> ( string checkName ) - See if a check item is checked.</p>\n<p class=\"para\">\nstring <strong>checkName</strong> - Which checkbox to see is checked.<br />\n</p>\n<p>void <strong>display</strong> () - Display the object.</p>\n<hr />\n\n<a name=\"input_dropdown\"></a>\n<h2>Input_Dropdown</h2>\n<h3>Constructor</h3>\n<p><strong>input_dropdown</strong> ( string name [, string value [, array items [, string caption [, int height ]]]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>value</strong> - Initial value of the dropdown box.<br />\narray <strong>items</strong> - Array of values for the dropdown box, with array index as value and array value as dropdown item.<br />\nstring <strong>caption</strong> - Caption to place next to dropdown box.<br />\nint <strong>height</strong> - Height of dropdown box.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( string value ) - Set the value of the dropdown box.</p>\n<p class=\"para\">\nstring <strong>value</strong> - Value to set object to.<br />\n</p>\n<p>void <strong>display</strong> () - Display the object.</p>\n<hr />\n\n<a name=\"input_file\"></a>\n<h2>Input_File</h2>\n<h3>Constructor</h3>\n<p><strong>input_file</strong> ( string name [, string caption [, int size [, int maxsize ]]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>caption</strong> - Caption to display next to file upload box.<br />\nint <strong>size</strong> - Width of file upload box.<br />\nint <strong>maxsize</strong> - Maximum filesize of uploaded file allowed.<br />\n</p>\n<h3>Member Functions</h3>\n<p>void <strong>display</strong> () - Display the object.</p>\n<hr />\n\n<a name=\"input_radio\"></a>\n<h2>Input_Radio</h2>\n<p><strong>input_radio</strong> ( string name [, string value [, array $buttons ]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>value</strong> - Initial value of the radio group.<br />\narray <strong>buttons</strong> - Array of values for the radio group, with array index as value and array value as radio caption.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( string value ) - Set the value of the radio group.</p>\n<p class=\"para\">\nstring <strong>value</strong> - Value to set object to.<br />\n</p>\n<p>void <strong>display</strong> () - Display the object.</p>\n<hr />\n\n<a name=\"input_textarea\"></a>\n<h2>Input_Textarea</h2>\n<p><strong>input_textarea</strong> ( string name [, string regex [, string value [, string caption [, int width [, int height [, int maxlength ]]]]]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>regex</strong> - Regular expression value must match to be valid.<br />\nstring <strong>value</strong> - Initial value of the textarea.<br />\nstring <strong>caption</strong> - Caption to place next to textarea.<br />\nint <strong>width</strong> - Width of textarea.<br />\nint <strong>height</strong> - Height of textarea.<br />\nint <strong>maxlength</strong> - Maximum length of value allowed.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( string value ) - Set the value of the textarea.</p>\n<p class=\"para\">\nstring <strong>value</strong> - Value to set object to.<br />\n</p>\n<p>void <strong>display</strong> () - Display the object.</p>\n<hr />\n\n<a name=\"input_textarray\"></a>\n<h2>Input_Textarray</h2>\n<p><strong>input_textarray</strong> ( string name, [string regex [, array items [, string caption [, int size [, int maxlength ]]]]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>regex</strong> - Regular expression values must match to be valid.<br />\narray <strong>items</strong> - Array of values for the textarray, with array index as value and array value as textbox value.<br />.<br />\nstring <strong>caption</strong> - Caption to place next to textarray.<br />\nint <strong>size</strong> - Width of textarray textboxes.<br />\nint <strong>maxlength</strong> - Maximum length of value allowed.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( string key, string value ) - Set a key value pair in the textarray.</p>\n<p class=\"para\">\nstring <strong>key</strong> - Key of value to set, if key doesn\'t exist it is added.<br />\nstring <strong>value</strong> - Value to set key to, if NULL key value pair is dropped from textarray.<br />\n</p>\n<p>void <strong>display</strong> () - Display the object.</p>\n<hr />\n\n<a name=\"input_textbox\"></a>\n<h2>Input_Textbox</h2>\n<p><strong>input_textbox</strong> ( string name [, string regex [, string value [, string caption [, int size [, int maxlength ]]]]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>regex</strong> - Regular expression value must match to be valid.<br />\nstring <strong>value</strong> - Initial value of the textbox.<br />\nstring <strong>caption</strong> - Caption to place next to textbox.<br />\nint <strong>size</strong> - Width of textbox.<br />\nint <strong>maxlength</strong> - Maximum length of value allowed.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( string value ) - Set the value of the textbox.</p>\n<p class=\"para\">\nstring <strong>value</strong> - Value to set object to.<br />\n</p>\n<p>void <strong>display</strong> () - Display the object.</p>\n<hr />\n\n<a name=\"input_querystring\"></a>\n<h2>Input_Querystring</h2>\n<p class=\"nb\"><strong>Note:</strong> Cookies must be created, set, and/or deleted before any output is sent to the client (as you\'d expect).</p>\n<h3>Constructor</h3>\n<p><strong>input_querystring</strong> ( string name [, string regex [, string value ]] )</p>\n<p class=\"para\">\nstring <strong>name</strong> - Name of object.<br />\nstring <strong>regex</strong> - Regular expression value must match to be valid.<br />\nstring <strong>value</strong> - Initial value of object.<br />\n</p>\n<h3>Member Functions</h3>\n<p>bool <strong>set</strong> ( string value ) - Set the value of the querystring.</p>\n<p class=\"para\">\nstring <strong>value</strong> - Value to set object to.<br />\n</p>\n<p>string <strong>urlattach</strong> ( string url ) - Attaches the objects value to the given URL.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Input Classes","2003-04-30 11:17:46");
INSERT INTO `tblobject` VALUES("1794239473","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"Test Page\";s:8:\"objectid\";s:10:\"1794239473\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049726941\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1049971891\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:36:\"This page is to be used for testing.\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Test Page","2003-04-10 11:51:31");
INSERT INTO `tblobject` VALUES("2077273413","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:8:\"Examples\";s:8:\"objectid\";s:10:\"2077273413\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049880285\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";s:10:\"1050315475\";s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:4:{s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:36424:\"<h1>Examples</h1>\n\n<p>This chapter contains a number of examples of how to write new FOOWD system classes, new lead-in documents to refect your applications architecture, and new input classes.</p>\n\n<p class=\"nb\"><strong>Note:</strong> The source of these example can be found in the FOOWD archive in the \"examples/\" directory.</p>\n\n<h2>Example 1. Creating A Hello World Class</h2>\n\n<p>In time honoured fashion, here\'s a rather pointless \"Hello World\" example. It defines a new class, foowd_hello that once instanciated will output \"Hello World\" from it\'s view method. Look at the next example for a clearer description of what makes up a FOOWD system class.</p>\n\n<pre>\n<span class=\"code_comment\">/** CLASS DESCRIPTOR **/\n</span><span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[-</span><span class=\"code_function\">1537808423</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'className\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'foowd_hello\'</span><span class=\"code_structure\">;\n</span><span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[-</span><span class=\"code_function\">1537808423</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'description\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'Hello World Object\'</span><span class=\"code_structure\">;\n\n</span><span class=\"code_comment\">/** CLASS METHOD PERMISSIONS **/\n</span><span class=\"code_function\">define</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'FOOWD_HELLO_CREATE_PERMISSION\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Gods\'</span><span class=\"code_structure\">);\n\n</span><span class=\"code_comment\">/** CLASS METHOD PASSTHRU FUNCTION **/\n</span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_hello_classmethod</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">) { </span><span class=\"code_function\">foowd_hello</span><span class=\"code_structure\">::</span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'foowd_hello\'</span><span class=\"code_structure\">); }\n\n</span><span class=\"code_comment\">/** CLASS DECLARATION **/\n</span><span class=\"code_structure\">class </span><span class=\"code_function\">foowd_hello </span><span class=\"code_structure\">extends </span><span class=\"code_function\">foowd_object </span><span class=\"code_structure\">{\n\n</span><span class=\"code_comment\">/*** METHODS ***/\n\n/* view object */\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">method_view</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">) {\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;Hello World!&lt;/h1&gt;\'</span><span class=\"code_structure\">;\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n    }\n\n}</span>\n</pre>\n\n<p>This class is obviously totally useless as no matter how many instances we make, they all do the same thing, output \"Hello World\" upon calling their view method.</p>\n\n<h2>Example 2. Creating A UBB Page Class</h2>\n\n<p>In this example we are going to write a new system class for making documents that can be formatted by using the markup language used on UBB message forums.</p>\n\n<p>We will create a new class that extends the base system class foowd_object to add a new member variable to hold the content body, a new member function to do the UBB code to HTML translation, and 3 new methods allowing us to create, view and edit instances of the class.</p>\n\n<p class=\"nb\"><strong>Note:</strong> We could have extended the foowd_text_plain class and borrowed some of it\'s functionality, however I wanted to demonstrate extending the base class so you can see everything involved in it.</p>\n\n<pre>\n<span class=\"code_other\"><span class=\"code_function\">&lt;?php\n</span><span class=\"code_comment\">/*\nclass.ubb.php\nUBB code example class\n*/\n\n/** CLASS DESCRIPTOR **/\n</span><span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[-</span><span class=\"code_function\">218942863</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'className\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'foowd_ubb\'</span><span class=\"code_structure\">;\n</span><span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[-</span><span class=\"code_function\">218942863</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'description\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'UBB Text Object\'</span><span class=\"code_structure\">;</span></span>\n</pre>\n\n<p>Firstly, before we even define a new class, we must add it to the FOOWD <a href=\"?object=writing system classes#descriptor\">class descriptor</a> array. This array allows FOOWD to get the class name and a text description of any system class. The first index on the array is the classes objectid number, otherwise known as a crc32 of its class name. We\'re going to call our class \"foowd_ubb\", so its objectid is going to be -218942863.</p>\n\n<pre>\n<span class=\"code_comment\">/** CLASS METHOD PERMISSIONS **/\n</span><span class=\"code_function\">define</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'FOOWD_UBB_CREATE_PERMISSION\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Authors\'</span><span class=\"code_structure\">);</span>\n</pre>\n\n<p>Next we define the <a href=\"?object=writing system classes#method permissions\">permissions</a> of any class methods we will define within the class. We\'re going to have a create class method (a method that is called on the class and not on an instantiated object) and I only want people in the Authors group to be able to access that method.</p>\n\n<pre>\n<span class=\"code_comment\">/** CLASS METHOD PASSTHRU FUNCTION **/\n</span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_ubb_classmethod</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">) { </span><span class=\"code_function\">foowd_ubb</span><span class=\"code_structure\">::</span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'foowd_ubb\'</span><span class=\"code_structure\">); }</span>\n</pre>\n\n<p>This <a href=\"?object=writing system classes#passthru function\">passthru function</a> must be defined for all classes that has class methods. This function is used to call the class methods within the class, in PHP it is not possible to have variable class names in static member calls, so this function gets around that limitation. Basically, we need one and all we need to do to it is make sure all the references to our class are set correctly (to foowd_ubb).</p>\n\n<pre>\n<span class=\"code_comment\">/** CLASS DECLARATION **/\n</span><span class=\"code_structure\">class </span><span class=\"code_function\">foowd_ubb </span><span class=\"code_structure\">extends </span><span class=\"code_function\">foowd_object </span><span class=\"code_structure\">{</span>\n</pre>\n\n<p>Right, with all that done we can actually start <a href=\"?object=writing system classes#class declaration\">defining our class</a>. We are extending the base class foowd_object, this gives our class all the base functionality of the FOOWD system class including its all important save() member function.</p>\n\n<pre>\n    <span class=\"code_structure\">var </span><span class=\"code_function\">$body</span><span class=\"code_structure\">;</span>\n</pre>\n\n<p>We\'re going to add one new <a href=\"?object=writing system classes#member variables\">member variable</a> to our class and its going to hold our pages content text. Later we\'ll define the meta data for this variable so FOOWD knows what type of data it can contain.</p>\n\n<pre>\n<span class=\"code_comment\">/*** CONSTRUCTOR ***/\n\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_ubb</span><span class=\"code_structure\">(\n        &amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$title </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$body </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$viewGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$adminGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$deleteGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\n        </span><span class=\"code_function\">$editGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL\n    </span><span class=\"code_structure\">) {\n\n</span><span class=\"code_comment\">// base object constructor\n        </span><span class=\"code_function\">parent</span><span class=\"code_structure\">::</span><span class=\"code_function\">foowd_object</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$title</span><span class=\"code_structure\">, </span><span class=\"code_function\">$viewGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">$adminGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">$deleteGroup</span><span class=\"code_structure\">);\n\n</span><span class=\"code_comment\">/* set object vars */\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">body </span><span class=\"code_structure\">= </span><span class=\"code_function\">$body</span><span class=\"code_structure\">;\n\n</span><span class=\"code_comment\">/* set method permissions */\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">permissions</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'edit\'</span><span class=\"code_structure\">] = </span><span class=\"code_function\">setVarConstOrDefault</span><span class=\"code_structure\">(</span><span class=\"code_function\">$editGroup</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'DEFAULT_EDIT_GROUP\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">);\n\n    }</span>\n</pre>\n\n<p>We\'re going to overwrite the existing foowd_object <a href=\"?object=writing system classes#constructor\">constructor</a> and write our own since we\'re got a new piece of data and a new permission to set. Firstly our constructor calls the foowd_object constructor which does the bulk of the initialisation for us, and then we set our $body member variable to the passed in value (we\'re not checking its validity, we\'ll leave that to our create method). Finally we\'re setting up a new permission in the objects permissions array for our new edit() method which we\'ll be writing soon. I\'m using setVarConstOrDefault(), one of FOOWDs library functions that\'ll return one of the three parameters depending on which are set and non-zero.</p>\n\n<pre\n><span class=\"code_comment\">/*** SERIALIZE FUNCTIONS ***/\n\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">__wakeup</span><span class=\"code_structure\">() {\n        </span><span class=\"code_function\">parent</span><span class=\"code_structure\">::</span><span class=\"code_function\">__wakeup</span><span class=\"code_structure\">();\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'body\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">;\n    }</span>\n</pre>\n\n<p>FOOWD needs to know about all member variables so that it knows to include them in object serialization (what happens when an object is saved) and what values they are allowed to contain (see <a href=\"?object=writing system classes#serialize functions\">serialize functions</a> for more). We do this by setting an item in the foowd_vars_meta array with the index matching the member variable and the value of a regular expression matching values allowed within the member variable. In this case we want our body variable to contain any value, so we set the value to the empty string.</p>\n\n<p>We define our new meta array entry in the special __wakeup() function. Since we don\'t need to save all these meta variables when we save our object to the database, they are dropped upon serialization and re-created (by this special function) upon retrieval and unserialization. If we don\'t have any new items to add to our meta arrays we don\'t need to define a __wakeup() function, but if we do define one the first line must call the parent objects __wakeup() function so that all meta array entries are re-created.</p>\n\n<pre>\n<span class=\"code_comment\">/*** MEMBER FUNCTIONS ***/\n\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">processUBB</span><span class=\"code_structure\">(</span><span class=\"code_function\">$text</span><span class=\"code_structure\">) {\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">htmlspecialchars</span><span class=\"code_structure\">(</span><span class=\"code_function\">$text</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// replace special HTML chars with HTML entities\n        \n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'|\\[b\\](.*)\\[/b\\]|U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;b&gt;$1&lt;/b&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'|\\[i\\](.*)\\[/i\\]|U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;i&gt;$1&lt;/i&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'|\\[u\\](.*)\\[/u\\]|U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;u&gt;$1&lt;/u&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[img\\]((http|ftp):\\/\\/[a-zA-Z0-9._\\/ -]+)\\[\\/img\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;img src=\"$1\" alt=\"$1\" /&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[img\\]([a-zA-Z0-9._\\/ -]+)\\[\\/img\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;img src=\"http://$1\" alt=\"$1\" /&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[((http|ftp|mailto):\\/\\/[a-zA-Z0-9._\\/ -]+)\\|([A-Za-z0-9 ]+)\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;a href=\"$1\"&gt;$3&lt;/a&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[(ftp.[a-zA-Z0-9._\\/ -]+)\\|([A-Za-z0-9 ]+)\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;a href=\"ftp://$1\"&gt;$2&lt;/a&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[([a-zA-Z0-9._\\/ -]+)\\|([A-Za-z0-9 ]+)\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;a href=\"http://$1\"&gt;$2&lt;/a&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/(\\s)((http|ftp|mailto):\\/\\/[a-zA-Z0-9._\\/ -]+)(\\s)/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'$1&lt;a href=\"$2\"&gt;$2&lt;/a&gt;$4\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\n        \n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">str_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\"\\n\"</span><span class=\"code_structure\">, </span><span class=\"code_string\">\"&lt;br /&gt;\\n\"</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// replace new lines with BR tags\n        </span><span class=\"code_structure\">return </span><span class=\"code_function\">$text</span><span class=\"code_structure\">;\n    }</span>\n</pre>\n\n<p>We have one new <a href=\"?object=writing system classes#member functions\">member function</a> to define, a function that\'ll change the UBB code in our body variable to HTML we can output.</p>\n\n<pre>\n<span class=\"code_comment\">/*** CLASS METHODS ***/\n\n/* create object */\n\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">class_create</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$className</span><span class=\"code_structure\">) {\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;Create new UBB page&lt;/h1&gt;\'</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$createForm </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_form</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createForm\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'POST\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Create\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$createTitle </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createTitle\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">REGEX_TITLE</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Title:\'</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$createBody </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textarea</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createBody\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">80</span><span class=\"code_structure\">, </span><span class=\"code_function\">20</span><span class=\"code_structure\">);\n        if (!</span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">submitted</span><span class=\"code_structure\">() || </span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value </span><span class=\"code_structure\">== </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">) {\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">);\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$createBody</span><span class=\"code_structure\">);\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">display</span><span class=\"code_structure\">();\n        } else {\n            </span><span class=\"code_function\">$object </span><span class=\"code_structure\">= new </span><span class=\"code_function\">$className</span><span class=\"code_structure\">(\n                </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">,\n                </span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\n                </span><span class=\"code_function\">$createBody</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value\n            </span><span class=\"code_structure\">);\n            if (</span><span class=\"code_function\">$object</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">save</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">FALSE</span><span class=\"code_structure\">)) {\n                echo </span><span class=\"code_string\">\'&lt;p&gt;UBB page created and saved.&lt;/p&gt;\'</span><span class=\"code_structure\">;\n            } else {\n                echo </span><span class=\"code_string\">\'&lt;p&gt;Could not create UBB page.&lt;/p&gt;\'</span><span class=\"code_structure\">;\n            }\n        }\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n    }\n</span>\n</pre>\n\n<p>We have to enable people to create our object, so we need a <a href=\"?object=writing system classes#class methods\">class method</a> to display a form and get a title and content for our page, then call our constructor to create the instance and to finally save our new object. Class methods (aka. static member functions that can be accessed via the FOOWD environment) are defined with the prefix \"class_\" before their name.</p>\n\n<p>One thing you may notice are the two function calls to foowd_prepend() and foowd_append() at the head and the foot of the method. These functions you\'ll find in your configuration file, all classes call these two functions at the beginning and end of their methods allowing use to add a standard header and footer to all of our output.</p>\n\n<pre>\n<span class=\"code_comment\">/*** METHODS ***/</span>\n</pre>\n\n<p>Last but not least we have two <a href=\"?object=writing system classes#object methods\">object methods</a> to define, one for viewing our new object and one for editing its content.</p>\n\n<pre>\n<span class=\"code_comment\">/* view object */\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">method_view</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">) {\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">htmlspecialchars</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">title</span><span class=\"code_structure\">), </span><span class=\"code_string\">\'&lt;/h1&gt;\'</span><span class=\"code_structure\">;\n        echo </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">processUBB</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">body</span><span class=\"code_structure\">);\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n    }</span>\n</pre>\n\n<p>Our view method writes the object title and then calls our processUBB() function on the page content. Object methods (aka. non-static member functions that can be accessed via the FOOWD environment) are defined with the prefix \"method_\" before their name.</p>\n\n<pre>\n<span class=\"code_comment\">/* edit object */\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">method_edit</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">) {\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;Editing version \'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">version</span><span class=\"code_structure\">, </span><span class=\"code_string\">\' of \"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">title</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\"&lt;/h1&gt;\'</span><span class=\"code_structure\">;\n        </span><span class=\"code_function\">$editForm </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_form</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'editForm\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'POST\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Save\'</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$editArea </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textarea</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'editArea\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">body</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">80</span><span class=\"code_structure\">, </span><span class=\"code_function\">20</span><span class=\"code_structure\">);\n        </span><span class=\"code_function\">$editForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$editArea</span><span class=\"code_structure\">);\n        if (isset(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">user</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">objectid</span><span class=\"code_structure\">) &amp;&amp; </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">updatorid </span><span class=\"code_structure\">== </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">user</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">objectid</span><span class=\"code_structure\">) { </span><span class=\"code_comment\">// author is same as last author and not anonymous, so can just update\n            </span><span class=\"code_function\">$newVersion </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_checkbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'newVersion\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Do not archive previous version?\'</span><span class=\"code_structure\">);\n            </span><span class=\"code_function\">$editForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$newVersion</span><span class=\"code_structure\">);\n        }\n        </span><span class=\"code_function\">$editForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">display</span><span class=\"code_structure\">();\n        \n        echo </span><span class=\"code_string\">\'&lt;p&gt;[b]bold[/b] [i]italic[/i] [u]underline[/u]&lt;br /&gt;[http://www.example.com|hyperlink]&lt;br /&gt;[img]http://www.example.com/image.jpg[/img]&lt;/p&gt;\'</span><span class=\"code_structure\">;\n\n        if (</span><span class=\"code_function\">$editForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">submitted</span><span class=\"code_structure\">()) {\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">body </span><span class=\"code_structure\">= </span><span class=\"code_function\">$editArea</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">;\n            if (isset(</span><span class=\"code_function\">$newVersion</span><span class=\"code_structure\">)) {\n                </span><span class=\"code_function\">$createNewVersion </span><span class=\"code_structure\">= !</span><span class=\"code_function\">$newVersion</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">;\n            } else {\n                </span><span class=\"code_function\">$createNewVersion </span><span class=\"code_structure\">= </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">;\n            }\n            if (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">save</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$createNewVersion</span><span class=\"code_structure\">)) {\n                echo </span><span class=\"code_string\">\'&lt;p&gt;UBB page updated and saved.&lt;/p&gt;\'</span><span class=\"code_structure\">;\n            } else {\n                echo </span><span class=\"code_string\">\'&lt;p&gt;Could not save UBB page.&lt;/p&gt;\'</span><span class=\"code_structure\">;\n            }\n        }\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\n    }\n</span>\n</pre>\n\n<p>Finally our edit method displays an edit form and handles updating the object.</p>\n\n<pre>\n<span class=\"code_structure\">}\n\n</span><span class=\"code_function\">?&gt;</span>\n</pre>\n\n<p>Now that our class is written, we need to load it into our FOOWD system and test it out. So we open up our configuration file and add a line to include the new classes file. This then makes the new class and its methods available for use.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Examples","2003-04-14 11:17:55");
