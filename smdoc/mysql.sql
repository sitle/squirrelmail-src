#
# Default data for FOOWD v0.8
#
# This is the default data for the base FOOWD system "out-of-the-box",
# you will need to at least execute the create table statement below
# to be able to run FOOWD. For a first time install I'd recommend loading
# the data too to get you started.
#
# This script includes data for a Root user, and all the pages found on
# the FOOWD web site http://foowd.peej.co.uk.
#
# The Root password for the system is set as "root", you should log in to
# the site as root and change this password asap.
#

#
# Table structure for table 'tblobject'
#

CREATE TABLE `sm2Object` (
  `objectid` int(11) NOT NULL default '0',
  `version` int(10) unsigned NOT NULL default '1',
  `classid` int(11) NOT NULL default '0',
  `workspaceid` int(11) NOT NULL default '0',
  `object` text,
  `title` varchar(255) NOT NULL default '',
  `updated` datetime NOT NULL default '0000-00-00 00:00:00',
  `sectionid` int(10) default '0',
  PRIMARY KEY (`objectid`,`version`,`classid`,`workspaceid`),
  KEY `idxtblObjectTitle`(`title`),
  KEY `idxtblObjectupdated`(`updated`),
  KEY `idxtblObjectsectionid` (`sectionid`)
) TYPE=MyISAM COMMENT='';

#
# Dumping data for table 'tblobject'
#
INSERT INTO `sm2Object` VALUES("936075699","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:7:\"Welcome\";s:8:\"objectid\";i:936075699;s:7:\"version\";i:1;s:7:\"classid\";i:1158898744;s:11:\"workspaceid\";i:0;s:7:\"created\";i:1050232200;s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050232446;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:8:\"Everyone\";}s:4:\"body\";s:683:\"<h1>Congratulations!</h1>\r\n\r\n<h2>If you can see this page then FOOWD is working, well done.</h2>\r\n\r\n<p>You will now probably want to <a href=\"?class=foowd_user&method=login\">log in</a> as the \'Root\' user and change your password.</p>\r\n\r\n<p>A good place to start might be with the <a href=\"?object=FOOWD\">Main FOOWD Page</a> or the <a href=\"?object=Object List\">Object List</a>.</p>\r\n\r\n<p><strong>Broken Links?:</strong> If the links are not working, these pages expect index.php to be a default document on your server. You can fix the links by making sure index.php is a default document (by changing your server config or renaming index.php to a correct default document name).</p>\";s:8:\"evalCode\";i:0;s:14:\"processInclude\";i:0;}","Welcome","2003-04-13 12:14:06","0");
INSERT INTO `sm2Object` VALUES("1653302329","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:13:\"Input Classes\";s:8:\"objectid\";s:10:\"1653302329\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049715984\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050228005;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:13134:\"<h1>FOOWD Input Classes</h1>\r\n\r\n<p>The FOOWD system handles user input via a number of input classes that wrap up all elements of input capture, persistence and validation. Below gives a brief overview of each input class:</p>\r\n\r\n<ul>\r\n<li><a href=\"#input_cookie\">Input_Cookie</a> - HTTP cookie class</li>\r\n<li><a href=\"#input_form\">Input_Form</a> - HTML form class</li>\r\n<ul>\r\n<li><a href=\"#input_checkbox\">Input_Checkbox</a> - HTML checkbox class</li>\r\n<li><a href=\"#input_checkgroup\">Input_Checkgroup</a> - HTML checkbox group class</li>\r\n<li><a href=\"#input_dropdown\">Input_Dropdown</a> - HTML dropdown box class</li>\r\n<li><a href=\"#input_file\">Input_File</a> - HTML file upload class</li>\r\n<li><a href=\"#input_radio\">Input_Radio</a> - HTML radio button group class</li>\r\n<li><a href=\"#input_textarea\">Input_Textarea</a> - HTML textarea class</li>\r\n<li><a href=\"#input_textarray\">Input_Textarray</a> - HTML textbox array class</li>\r\n<li><a href=\"#input_textbox\">Input_Textbox</a> - HTML textbox class</li>\r\n</ul>\r\n<li><a href=\"#input_querystring\">Input_Querystring</a> - HTTP GET class</li>\r\n</ul>\r\n\r\n<hr />\r\n\r\n<a name=\"input_cookie\"></a>\r\n<h2>Input_Cookie</h2>\r\n<p class=\"nb\"><strong>Note:</strong> Cookies must be created, set, and/or deleted before any output is sent to the client (as you\'d expect).</p>\r\n<h3>Constructor</h3>\r\n<p><strong>input_cookie</strong> ( string name [, string regex [, string value [, int expire [, string path [, string domain [, bool secure ]]]]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>regex</strong> - Regular expression value must match to be valid.<br />\r\nstring <strong>value</strong> - Initial value of object.<br />\r\nstring <strong>expire</strong> - Seconds until cookie expires.<br />\r\nstring <strong>path</strong> - The path on the server in which the cookie will be available on.<br />\r\nstring <strong>domain</strong> - The domain that the cookie is available.<br />\r\nbool <strong>secure</strong> - Indicates that the cookie should only be transmitted over a secure HTTPS connection.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( string value ) - Set the value of the cookie.</p>\r\n<p class=\"para\">\r\nstring <strong>value</strong> - Value to set object to.<br />\r\n</p>\r\n<p>bool <strong>delete</strong> () - Delete the cookie from the client.</p>\r\n<hr />\r\n\r\n<a name=\"input_form\"></a>\r\n<h2>Input_Form</h2>\r\n<p>To create a HTML form, a form object is created and then one or more input objects attached to it.</p>\r\n<p><strong>Example:</strong></p>\r\n<pre>\r\n<span class=\"code_function\">$form </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_form</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'form\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'POST\'</span><span class=\"code_structure\">);\r\n</span><span class=\"code_function\">$name </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'name\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'/[a-zA-Z]+/\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Enter your name:\'</span><span class=\"code_structure\">);\r\nif (</span><span class=\"code_function\">$form</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">submitted</span><span class=\"code_structure\">()) {\r\n    echo </span><span class=\"code_string\">\'Welcome \'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$name</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">;\r\n} else {\r\n    </span><span class=\"code_function\">$form</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$name</span><span class=\"code_structure\">);\r\n    </span><span class=\"code_function\">$form</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">display</span><span class=\"code_structure\">();\r\n}</span>\r\n</pre>\r\n<h3>Constructor</h3>\r\n<p><strong>input_form</strong> (string name [, string location [, string method [, string submit [, string reset [, string preview ]]]]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>location</strong> - URI form submits to.<br />\r\nstring <strong>method</strong> - Method for form to use (\"GET\"/\"POST\").<br />\r\nstring <strong>submit</strong> - Text on submit button (unset hides submit button).<br />\r\nstring <strong>reset</strong> - Text on reset button (unset hides reset button).<br />\r\nstring <strong>preview</strong> - Text on preview button (unset hides preview button).<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>addObject</strong> ( object inputObject ) - Add an input object to the form.</p>\r\n<p class=\"para\">\r\nobject <strong>inputObject</strong> - Object to add.<br />\r\n</p>\r\n<p>bool <strong>submitted</strong> () - Returns TRUE if data has been submitted to the form and its input objects.</p>\r\n<p>bool <strong>previewed</strong> () - Returns TRUE if data has been submitted to the form via the preview button.</p>\r\n<p>void <strong>display</strong> () - Displays the form.</p>\r\n<hr />\r\n\r\n<a name=\"input_checkbox\"></a>\r\n<h2>Input_Checkbox</h2>\r\n<h3>Constructor</h3>\r\n<p><strong>input_checkbox</strong> ( string name [, bool checked [, string caption ]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nbool <strong>checked</strong> - Initial value of the checkbox.<br />\r\nstring <strong>caption</strong> - Caption to place next to checkbox.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( bool value ) - Set the value of the checkbox.</p>\r\n<p class=\"para\">\r\nbool <strong>value</strong> - Value to set object to.<br />\r\n</p>\r\n<p>void <strong>display</strong> () - Display the object.</p>\r\n<hr />\r\n\r\n<a name=\"input_checkgroup\"></a>\r\n<h2>Input_Checkgroup</h2>\r\n<h3>Constructor</h3>\r\n<p><strong>input_checkgroup</strong> ( string name [, int value [, array checks ]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nint <strong>value</strong> - Initial value of the checkgroup.<br />\r\narray <strong>checks</strong> - Array of values for the checkgroup, with array value as checkbox caption.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( bool value ) - Set the value of the checkgroup.</p>\r\n<p class=\"para\">\r\nbool <strong>value</strong> - Value to set object to.<br />\r\n</p>\r\n<p>bool <strong>isChecked</strong> ( string checkName ) - See if a check item is checked.</p>\r\n<p class=\"para\">\r\nstring <strong>checkName</strong> - Which checkbox to see is checked.<br />\r\n</p>\r\n<p>void <strong>display</strong> () - Display the object.</p>\r\n<hr />\r\n\r\n<a name=\"input_dropdown\"></a>\r\n<h2>Input_Dropdown</h2>\r\n<h3>Constructor</h3>\r\n<p><strong>input_dropdown</strong> ( string name [, string value [, array items [, string caption [, int height ]]]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>value</strong> - Initial value of the dropdown box.<br />\r\narray <strong>items</strong> - Array of values for the dropdown box, with array index as value and array value as dropdown item.<br />\r\nstring <strong>caption</strong> - Caption to place next to dropdown box.<br />\r\nint <strong>height</strong> - Height of dropdown box.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( string value ) - Set the value of the dropdown box.</p>\r\n<p class=\"para\">\r\nstring <strong>value</strong> - Value to set object to.<br />\r\n</p>\r\n<p>void <strong>display</strong> () - Display the object.</p>\r\n<hr />\r\n\r\n<a name=\"input_file\"></a>\r\n<h2>Input_File</h2>\r\n<h3>Constructor</h3>\r\n<p><strong>input_file</strong> ( string name [, string caption [, int size [, int maxsize ]]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>caption</strong> - Caption to display next to file upload box.<br />\r\nint <strong>size</strong> - Width of file upload box.<br />\r\nint <strong>maxsize</strong> - Maximum filesize of uploaded file allowed.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>void <strong>display</strong> () - Display the object.</p>\r\n<hr />\r\n\r\n<a name=\"input_radio\"></a>\r\n<h2>Input_Radio</h2>\r\n<p><strong>input_radio</strong> ( string name [, string value [, array $buttons ]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>value</strong> - Initial value of the radio group.<br />\r\narray <strong>buttons</strong> - Array of values for the radio group, with array index as value and array value as radio caption.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( string value ) - Set the value of the radio group.</p>\r\n<p class=\"para\">\r\nstring <strong>value</strong> - Value to set object to.<br />\r\n</p>\r\n<p>void <strong>display</strong> () - Display the object.</p>\r\n<hr />\r\n\r\n<a name=\"input_textarea\"></a>\r\n<h2>Input_Textarea</h2>\r\n<p><strong>input_textarea</strong> ( string name [, string regex [, string value [, string caption [, int width [, int height [, int maxlength ]]]]]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>regex</strong> - Regular expression value must match to be valid.<br />\r\nstring <strong>value</strong> - Initial value of the textarea.<br />\r\nstring <strong>caption</strong> - Caption to place next to textarea.<br />\r\nint <strong>width</strong> - Width of textarea.<br />\r\nint <strong>height</strong> - Height of textarea.<br />\r\nint <strong>maxlength</strong> - Maximum length of value allowed.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( string value ) - Set the value of the textarea.</p>\r\n<p class=\"para\">\r\nstring <strong>value</strong> - Value to set object to.<br />\r\n</p>\r\n<p>void <strong>display</strong> () - Display the object.</p>\r\n<hr />\r\n\r\n<a name=\"input_textarray\"></a>\r\n<h2>Input_Textarray</h2>\r\n<p><strong>input_textarray</strong> ( string name, [string regex [, array items [, string caption [, int size [, int maxlength ]]]]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>regex</strong> - Regular expression values must match to be valid.<br />\r\narray <strong>items</strong> - Array of values for the textarray, with array index as value and array value as textbox value.<br />.<br />\r\nstring <strong>caption</strong> - Caption to place next to textarray.<br />\r\nint <strong>size</strong> - Width of textarray textboxes.<br />\r\nint <strong>maxlength</strong> - Maximum length of value allowed.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( string key, string value ) - Set a key value pair in the textarray.</p>\r\n<p class=\"para\">\r\nstring <strong>key</strong> - Key of value to set, if key doesn\'t exist it is added.<br />\r\nstring <strong>value</strong> - Value to set key to, if NULL key value pair is dropped from textarray.<br />\r\n</p>\r\n<p>void <strong>display</strong> () - Display the object.</p>\r\n<hr />\r\n\r\n<a name=\"input_textbox\"></a>\r\n<h2>Input_Textbox</h2>\r\n<p><strong>input_textbox</strong> ( string name [, string regex [, string value [, string caption [, int size [, int maxlength ]]]]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>regex</strong> - Regular expression value must match to be valid.<br />\r\nstring <strong>value</strong> - Initial value of the textbox.<br />\r\nstring <strong>caption</strong> - Caption to place next to textbox.<br />\r\nint <strong>size</strong> - Width of textbox.<br />\r\nint <strong>maxlength</strong> - Maximum length of value allowed.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( string value ) - Set the value of the textbox.</p>\r\n<p class=\"para\">\r\nstring <strong>value</strong> - Value to set object to.<br />\r\n</p>\r\n<p>void <strong>display</strong> () - Display the object.</p>\r\n<hr />\r\n\r\n<a name=\"input_querystring\"></a>\r\n<h2>Input_Querystring</h2>\r\n<p class=\"nb\"><strong>Note:</strong> Cookies must be created, set, and/or deleted before any output is sent to the client (as you\'d expect).</p>\r\n<h3>Constructor</h3>\r\n<p><strong>input_querystring</strong> ( string name [, string regex [, string value ]] )</p>\r\n<p class=\"para\">\r\nstring <strong>name</strong> - Name of object.<br />\r\nstring <strong>regex</strong> - Regular expression value must match to be valid.<br />\r\nstring <strong>value</strong> - Initial value of object.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( string value ) - Set the value of the querystring.</p>\r\n<p class=\"para\">\r\nstring <strong>value</strong> - Value to set object to.<br />\r\n</p>\r\n<p>string <strong>urlattach</strong> ( string url ) - Attaches the objects value to the given URL.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Input Classes","2003-04-13 11:00:05","0");
INSERT INTO `sm2Object` VALUES("1135357196","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"Functions\";s:8:\"objectid\";s:10:\"1135357196\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049718933\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050228018;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:4690:\"<h1>FOOWD System Functions</h1>\r\n\r\n<p>FOOWD uses a number of additional system functions over the member functions of the FOOWD environment object and the system objects, these are included in the file lib.php and should be used whenever applicable. They are briefly outlined below:</p>\r\n\r\n<hr />\r\n\r\n<h2>Debugging Functions</h2>\r\n\r\n<h3>DBTrack</h3>\r\n<p>Used by storage medium layer, when debugging is enabled this function will output SQL strings to the user.</p>\r\n<p>void <strong>dbtrack</strong> ( string SQL )</p>\r\n<p class=\"para\">\r\nstring <strong>SQL</strong> - SQL statement to dump to output.<br />\r\n</p>\r\n\r\n<h3>Error</h3>\r\n<p>Terminal error, prints message and stops execution.</p>\r\n<p>void <strong>error</strong> ( string error )</p>\r\n<p class=\"para\">\r\nstring <strong>error</strong> - Error message.<br />\r\n</p>\r\n\r\n<h3>Show</h3>\r\n<p>Output an object or array with formatting.</p>\r\n<p>void <strong>show</strong> ( mixed variable )</p>\r\n<p class=\"para\">\r\nmixed <strong>variable</strong> - Variable to dump to output.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<h2>System Functions</h2>\r\n\r\n<h3>SetVarConstOrDefault</h3>\r\n<p>Return the value if set and not null, or else the constant if defined, or else the given default value.</p>\r\n<p>mixed <strong>setVarConstOrDefault</strong> ( mixed value, string constant, mixed default )</p>\r\n<p class=\"para\">\r\nmixed <strong>value</strong> - Value to return if is set and not NULL.<br />\r\nstring <strong>constant</strong> - Name of constant to return if defined and value not returned.<br />\r\nmixed <strong>default</strong> - Default value to return if neither value or constant are returned.<br />\r\n</p>\r\n\r\n<h3>SetConstOrDefault</h3>\r\n<p>Return the constant if defined, or else the given default value.</p>\r\n<p>mixed <strong>setConstOrDefault</strong> ( string constant, mixed default )</p>\r\n<p class=\"para\">\r\nstring <strong>constant</strong> - Name of constant to return if defined and value not returned.<br />\r\nmixed <strong>default</strong> - Default value to return if neither value or constant are returned.<br />\r\n</p>\r\n\r\n<h3>GetRegexLength</h3>\r\n<p>Find the max length of string allowed by the given regular expression. Returns zero if infinite length is allowed.</p>\r\n<p>int <strong>getRegexLength</strong> ( string regex, int default )</p>\r\n<p class=\"para\">\r\nstring <strong>regex</strong> - Regular expression to check.<br />\r\nint <strong>default</strong> - Default value to return if no length expression found in regular expression.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<h2>Cache Functions</h2>\r\n\r\n<h3>GetCacheName</h3>\r\n<p>Check object access vars against cache settings to see if we should be read/writing a cache file for this request. If so, get cache file name and cache timeout.</p>\r\n<p>array <strong>getCacheName</strong> ( string objectid [, string classid [, string method ]] )</p>\r\n<p class=\"para\">\r\nstring <strong>objectid</strong> - Objectid of object in request.<br />\r\nstring <strong>classid</strong> - Classid of object in request.<br />\r\nstring <strong>method</strong> - Method in request.<br />\r\n</p>\r\n\r\n<h3>ReadCache</h3>\r\n<p>Read a cache file and output the contents.</p>\r\n<p>bool <strong>readCache</strong> ( array cacheName )</p>\r\n<p class=\"para\">\r\narray <strong>cacheName</strong> - Array returned from getCacheName().<br />\r\n</p>\r\n\r\n<h3>WriteCache</h3>\r\n<p>Write a new cache file from the given text.</p>\r\n<p>bool <strong>writeCache</strong> ( array cacheName , string text )</p>\r\n<p class=\"para\">\r\narray <strong>cacheName</strong> - Array returned from getCacheName().<br />\r\nstring <strong>text</strong> - Text string to write to cache.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<h2>URI Functions</h2>\r\n\r\n<h3>GetURI</h3>\r\n<p>Create an internal URI given object details and a method.</p>\r\n<p>string <strong>getURI</strong> ( array parameters )</p>\r\n<p class=\"para\">\r\narray <strong>parameters</strong> - Name value pairs to build up URI querystring.<br />\r\n</p>\r\n\r\n<h3>SplitPath</h3>\r\n<p>Slice up path and return sections as an array.</p>\r\n<p>array <strong>splitPath</strong> ()</p>\r\n\r\n<hr />\r\n\r\n<h2>Display Functions</h2>\r\n\r\n<h3>MungEmail</h3>\r\n<p>Randomly spam proof an e-mail address.</p>\r\n<p>string <strong>mungEmail</strong> ( string emailAddress )</p>\r\n<p class=\"para\">\r\nstring <strong>emailAddress</strong> - E-mail address to mung.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<h2>Execution Time</h2>\r\n\r\n<h3>StartTime</h3>\r\n<p>Return start time of execution.</p>\r\n<p>int <strong>startTime</strong> ()</p>\r\n\r\n<h3>EndTime</h3>\r\n<p>Given the start time, calculate and return execution time in seconds.</p>\r\n<p>int <strong>endTime</strong> ( int startTime )</p>\r\n<p class=\"para\">\r\nint <strong>startTime</strong> - Start time integer as returned by startTime().<br />\r\n</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Functions","2003-04-13 11:00:18","0");
INSERT INTO `sm2Object` VALUES("-633383736","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:5:\"FOOWD\";s:8:\"objectid\";s:10:\"-633383736\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049314341\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1049725541;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:6:\"Author\";}s:4:\"body\";s:1293:\"<h1>Framework for Object Orientated Web Development</h1>\r\n\r\n<p>FOOWD is a framework for building object orientated (OO) web applications in PHP. It is a collection of base classes ripe for extending that handle object persistency, user authorisation, security, data administration, input handling, all the things required to build OO web applications.</p>\r\n\r\n<p>A good place to start at the moment might be with the <a href=\"?object=Object List\">Object List</a>.</p>\r\n\r\n<h2>Digesting FOOWD - The Beginnings of a FOOWD Manual</h2>\r\n\r\n<ol>\r\n<li><a href=\"?object=introduction\">Introduction</a></li>\r\n<li><a href=\"?object=classes\">System Classes</a>\r\n<ol>\r\n<li><a href=\"?object=class_foowd\">Foowd</a></li>\r\n<li><a href=\"?object=class_foowd_object\">Foowd_Object</a></li>\r\n<li><a href=\"?object=class_foowd_user\">Foowd_User</a></li>\r\n<li><a href=\"?object=class_foowd_workspace\">Foowd_Workspace</a></li>\r\n<li><a href=\"?object=class_foowd_class\">Foowd_Class</a></li>\r\n<li><a href=\"?object=class_foowd_text_plain\">Foowd_Text_Plain</a></li>\r\n<li><a href=\"?object=class_foowd_text_html\">Foowd_Text_HTML</a></li>\r\n</ol>\r\n</li>\r\n<li><a href=\"?object=input classes\">Input Classes</a></li>\r\n<li><a href=\"?object=functions\">System Functions</a></li>\r\n<li><a href=\"?object=constants\">System Constants</a>\r\n</ol>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","FOOWD","2003-04-07 15:25:41","0");
INSERT INTO `sm2Object` VALUES("1134249117","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:12:\"Base Classes\";s:8:\"objectid\";s:10:\"1134249117\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049712907\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050227992;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:15060:\"<h1>FOOWD Base Classes</h1>\r\n\r\n<p>The FOOWD system is made up of a number of classes, below gives a brief overview of each system class:</p>\r\n\r\n<ul>\r\n<li><a href=\"#foowd\">Foowd</a> - FOOWD environment class</li>\r\n<li><a href=\"#foowd_object\">Foowd_Object</a> - Base system class</li>\r\n<li><a href=\"#foowd_user\">Foowd_User</a> - User class</li>\r\n<li><a href=\"#foowd_workspace\">Foowd_Workspace</a> - Workspace class</li>\r\n<li><a href=\"#foowd_class\">Foowd_Class</a> - Dynamic class definition class</li>\r\n<li><a href=\"#foowd_text_plain\">Foowd_Text_Plain</a> - Plain text class</li>\r\n<li><a href=\"#foowd_text_html\">Foowd_Text_HTML</a> - HTML text class</li>\r\n</ul>\r\n\r\n<hr />\r\n\r\n<a name=\"foowd\"></a>\r\n<h2>Foowd</h2>\r\n<p>The FOOWD environment class, and the only class not to extend the base class foowd_object. The FOOWD class sets up the FOOWD environment and storage medium data connection, and has a number of member functions for retrieving system objects.</p>\r\n<h3>Member Variables</h3>\r\n<p class=\"membervars\">\r\nmixed <strong>conn</strong> - Database connection resource<br />\r\nobject <strong>user</strong> - Loaded user object<br />\r\nstring <strong>dbhost</strong> - Database hostname<br />\r\nstring <strong>dbuser</strong> - Database username<br />\r\nstring <strong>dbpass</strong> - Database password<br />\r\nstring <strong>dbname</strong> - Database name<br />\r\nstring <strong>dbtable</strong> - Database table name<br />\r\n</p>\r\n<h3>Constructor</h3>\r\n<p><strong>foowd</strong> ( array database [, array user ] )</p>\r\n<p class=\"para\">\r\narray <strong>database</strong> - Array of database settings.<br />\r\narray <strong>user</strong> - Array of user details.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p><strong>destroy</strong> () - Destructor, close database connection and unset object instance.</p>\r\n<p>object <strong>fetchUser</strong> ( int userid ) - Get a user from the database.</p>\r\n<p class=\"para\">\r\nint <strong>userid</strong> - Objectid of user to retrieve.<br />\r\n</p>\r\n<p>object <strong>fetchObject</strong> ( array objectDetails ) - Get particular version of an object from the database (if no version given, latest is retrieved).</p>\r\n<p class=\"para\">\r\narray <strong>objectDetails</strong> - Array of object details.<br />\r\n</p>\r\n<p>array <strong>getObject</strong> ( array objectDetails ) - Get all versions of object from the database.</p>\r\n<p class=\"para\">\r\narray <strong>objectDetails</strong> - Array of object details.<br />\r\n</p>\r\n<p>array <strong>getObjects</strong> ( array whereClause [, array orderClause [, int limit [, int workspaceid ]]] ) - Get objects from the database.</p>\r\n<p class=\"para\">\r\narray <strong>whereClause</strong> - Array of SQL where clause.<br />\r\narray <strong>orderClause</strong> - Array of SQL order clause.<br />\r\nint <strong>limit</strong> - Maximum number of objects to return.<br />\r\nint <strong>workspaceid</strong> - Workspace to get objects from, if empty uses current user workspace.<br />\r\n</p>\r\n<p class=\"nb\"><strong>Note:</strong> The whereClause and orderClause arrays should have one expression or operator per element.</p>\r\n<p>object <strong>callMethod</strong> ( object object [, string methodName ] ) - Call a method on an object.</p>\r\n<p class=\"para\">\r\nobject <strong>object</strong> - Object to call the method on.<br />\r\nstring <strong>methodName</strong> - Name of method to call.<br />\r\n</p>\r\n<p>object <strong>callClassMethod</strong> ( string className [, string methodName ] ) - Call a method on a class.</p>\r\n<p class=\"para\">\r\nstring <strong>className</strong> - Name of class to call the method on.<br />\r\nstring <strong>methodName</strong> - Name of method to call.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<a name=\"foowd_object\"></a>\r\n<h2>Foowd_Object</h2>\r\n<p>The FOOWD base system class, this class is the base class for all other system classes. It has member functions for saving objects to the storage medium, administrating objects, etc. all the base FOOWD object functionality.</p>\r\n<h3>Member Variables</h3>\r\n<p class=\"membervars\">\r\narray <strong>foowd_vars_meta</strong> - Member variable meta array<br />\r\narray <strong>foowd_indexes</strong> - Index meta array<br />\r\nstring <strong>title</strong> - Title<br />\r\nint <strong>objectid</strong> - Objectid<br />\r\nint <strong>version</strong> - Version number<br />\r\nint <strong>classid</strong> - Classid<br />\r\nint <strong>workspaceid</strong> - Workspaceid<br />\r\nint <strong>created</strong> - Creation timestamp<br />\r\nint <strong>creatorid</strong> - Creator objectid<br />\r\nint <strong>creatorName</strong> - Creator name<br />\r\nint <strong>updated</strong> - Updated timestamp<br />\r\nint <strong>updatorid</strong> - Updator objectid<br />\r\nint <strong>updatorName</strong> - Updator name<br />\r\narray <strong>permissions</strong> - Method permission list<br />\r\n</p>\r\n<h3>Constructor</h3>\r\n<p><strong>foowd_object</strong> ( object foowd [, title [, viewGroup [, adminGroup [, deleteGroup [, allowDuplicateTitle ]]]]] )</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>title</strong> - Title of object.<br />\r\nstring <strong>adminGroup</strong> - Admin group to set.<br />\r\nstring <strong>deleteGroup</strong> - Delete group to set.<br />\r\nbool <strong>allowDuplicateTitle</strong> - Whether to allow object to be created if another object with the same title already exists.<br />\r\n</p>\r\n<h3>Serialize Functions</h3>\r\n<p><strong>__sleep</strong> () - Magic serialization function, stop variable meta array and index array from being serialized.</p>\r\n<p><strong>__wakeup</strong> () - Magic serialization function, recreate variable meta array and index array whe unserialized.</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>set</strong> ( object foowd, string member [, mixed value ] ) - Set a member variable.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>member</strong> - Name of member variable to set.<br />\r\nmixed <strong>value</strong> - Value to set member variable to.<br />\r\n</p>\r\n<p>bool <strong>save</strong> ( object foowd [, bool incrementVersion ] ) - Save object to database.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nbool <strong>incrementVersion</strong> - Create a new version of the object.<br />\r\n</p>\r\n<p>bool <strong>delete</strong> ( object foowd ) - Delete object from the database.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p class=\"nb\"><strong>Note:</strong> The object will still exist in memory until the end of execution (or it is unset), so if after deleting the save() member function si called the object will be recreated within the database.</p>\r\n<p>bool <strong>tidyArchive</strong> ( object foowd ) - Tidy up the objects archived versions.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p class=\"nb\"><strong>Note:</strong> This member function is called from within save() at the appropriate time and should not need to be called explicitly.</p>\r\n<h3>Class Methods</h3>\r\n<p><strong>class_create</strong> ( object foowd, string className ) - Create an instance of the class.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\r\n</p>\r\n<h3>Methods</h3>\r\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_history</strong> ( object foowd ) - View history of the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_admin</strong> ( object foowd ) - Administrate the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_revert</strong> ( object foowd ) - Revert the object to a previous version.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_delete</strong> ( object foowd ) - Delete the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_clone</strong> ( object foowd ) - Clone the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<a name=\"foowd_user\"></a>\r\n<h2>Foowd_User extends Foowd_Object</h2>\r\n<p>FOOWD user class.</p>\r\n<h3>Member Variables</h3>\r\n<p class=\"membervars\">\r\nstring <strong>password</strong> - MD5 hash of user password<br />\r\nstring <strong>email</strong> - User e-mail address<br />\r\narray <strong>groups</strong> - Array of user groups user belongs to<br />\r\n</p>\r\n<h3>Constructor</h3>\r\n<p><strong>foowd_user</strong> ( object foowd [, string username [, string password [, string email [, array groups ]]]] )</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>username</strong> - Username of new user.<br />\r\nstring <strong>password</strong> - Password of new user.<br />\r\nstring <strong>email</strong> - E-mail address of new user.<br />\r\narray <strong>groups</strong> - Array of user groups of new user.<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>bool <strong>inGroup</strong> ( string groupName ) - Is a user in a group.</p>\r\n<p class=\"para\">\r\nstring <strong>groupName</strong> - Name of group to check.<br />\r\n</p>\r\n<h3>Class Methods</h3>\r\n<p><strong>class_create</strong> ( object foowd, string className ) - Create an instance of the class.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\r\n</p>\r\n<p><strong>class_login</strong> ( object foowd, string className ) - Log in user.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\r\n</p>\r\n<p><strong>class_logout</strong> ( object foowd, string className ) - Log out user.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\r\n</p>\r\n<h3>Methods</h3>\r\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_update</strong> ( object foowd ) - Update a users details.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<a name=\"foowd_workspace\"></a>\r\n<h2>Foowd_Workspace extends Foowd_Object</h2>\r\n<p>Workspace class.</p>\r\n<h3>Member Variables</h3>\r\n<p class=\"membervars\">\r\nstring <strong>description</strong> - Text description of workspace<br />\r\n</p>\r\n<h3>Constructor</h3>\r\n<p><strong>foowd_workspace</strong> ( object foowd [, string title [, string description [, string viewGroup [, string adminGroup [, string deleteGroup [, string enterGroup ]]]]]] )</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>title</strong> - Title of new object.<br />\r\nstring <strong>description</strong> - Description of new object.<br />\r\nstring <strong>viewGroup</strong> - View method permission.<br />\r\nstring <strong>adminGroup</strong> - Admin method permission.<br />\r\nstring <strong>deleteGroup</strong> - Delete method permission.<br />\r\nstring <strong>enterGroup</strong> - Enter method permission.<br />\r\n</p>\r\n<h3>Class Methods</h3>\r\n<p><strong>class_create</strong> ( object foowd, string className ) - Create an instance of the class.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\r\n</p>\r\n<h3>Methods</h3>\r\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_enter</strong> ( object foowd ) - Enter the workspace.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<a name=\"foowd_class\"></a>\r\n<h2>Foowd_Class extends Foowd_Object</h2>\r\n<p>TBD.</p>\r\n\r\n<hr />\r\n\r\n<a name=\"foowd_text_plain\"></a>\r\n<h2>Foowd_Text_Plain extends Foowd_Object</h2>\r\n<p>FOOWD plain text class.</p>\r\n<h3>Member Variables</h3>\r\n<p class=\"membervars\">\r\nstring <strong>body</strong> - Text content<br />\r\n</p>\r\n<h3>Constructor</h3>\r\n<p><strong>foowd_text_plain</strong> ( object foowd [, string title [, string body [, string viewGroup [, string adminGroup [, string deleteGroup [, string editGroup ]]]]]] )</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>title</strong> - Title of new object.<br />\r\nstring <strong>body</strong> - Text content of new object.<br />\r\nstring <strong>viewGroup</strong> - View method permission.<br />\r\nstring <strong>adminGroup</strong> - Admin method permission.<br />\r\nstring <strong>deleteGroup</strong> - Delete method permission.<br />\r\nstring <strong>editGroup</strong> - Edit method permission.<br />\r\n</p>\r\n<h3>Class Methods</h3>\r\n<p><strong>class_create</strong> ( object foowd, string className ) - Create an instance of the class.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>className</strong> - Name of class to create instance of (this is passed in purely to enable inheritance of class methods).<br />\r\n</p>\r\n<h3>Methods</h3>\r\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_edit</strong> ( object foowd ) - Edit the objects text content.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n<p><strong>method_diff</strong> ( object foowd ) - Calculate differences between text content versions.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\r\n\r\n<hr />\r\n\r\n<a name=\"foowd_text_html\"></a>\r\n<h2>Foowd_Text_HTML extends Foowd_Text_Plain</h2>\r\n<p>FOOWD HTML text class.</p>\r\n<h3>Member Variables</h3>\r\n<p class=\"membervars\">\r\nbool <strong>evalCode</strong> - Should view method process embedded PHP processing instructions?<br />\r\nbool <strong>processInclude</strong> - Should view method process embedded include processing instructions?<br />\r\n</p>\r\n<h3>Member Functions</h3>\r\n<p>string <strong>processPIs</strong> ( object foowd, string str ) - Process embedded processing instructions.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\nstring <strong>str</strong> - Content text to process.<br />\r\n</p>\r\n<h3>Methods</h3>\r\n<p><strong>method_view</strong> ( object foowd ) - View the object.</p>\r\n<p class=\"para\">\r\nobject <strong>foowd</strong> - FOOWD object.<br />\r\n</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Base Classes","2003-04-13 10:59:52","0");
INSERT INTO `sm2Object` VALUES("385153371","1","425464453","0","O:10:\"foowd_user\":15:{s:5:\"title\";s:4:\"Root\";s:8:\"objectid\";s:9:\"385153371\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:9:\"425464453\";s:11:\"workspaceid\";i:0;s:7:\"created\";s:10:\"1049287437\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050230201;s:9:\"updatorid\";N;s:11:\"updatorName\";N;s:11:\"permissions\";a:4:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:6:\"update\";s:6:\"Author\";}s:8:\"password\";s:32:\"63a9f0ea7bb98050796b649e85481845\";s:5:\"email\";s:22:\"foowd@foowd.peej.co.uk\";s:6:\"groups\";a:2:{i:0;s:8:\"Everyone\";i:1;s:4:\"Gods\";}}","Root","2003-04-13 11:36:41","0");
INSERT INTO `sm2Object` VALUES("-1570786539","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:11:\"Object List\";s:8:\"objectid\";i:-1570786539;s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049311991\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1049365284;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:694:\"<h1>Object List</h1>\r\n<p>This page lists all objects within the system.</p>\r\n<p><table>\r\n<tr><th>Title</th><th>Created</th><th>Author</th><th>Object Type</th></tr>\r\n<?php\r\nglobal $foowd_class_meta;\r\n$objects = $foowd->getObjects(\r\n\tNULL,\r\n\tarray(\'title\', \'classid\')\r\n);\r\nforeach ($objects as $object) {\r\n\techo \'<tr>\';\r\n\techo \'<td><a href=\"\', getURI(array(\r\n\t\t\'objectid\' => $object->objectid,\r\n\t\t\'classid\' => $object->classid\r\n\t)), \'\">\', $object->title, \'</a></td>\';\r\n\techo \'<td>\', date(DATETIME_FORMAT, $object->created), \'</td>\';\r\n\techo \'<td>\', $object->creatorName, \'</td>\';\r\n\techo \'<td>\', $foowd_class_meta[(int)$object->classid][\'description\'], \'</td>\';\r\n\techo \'</tr>\';\r\n}\r\n?>\r\n</table></p>\";s:8:\"evalCode\";s:1:\"1\";s:14:\"processInclude\";s:1:\"0\";}","Object List","2003-04-03 11:21:24","0");
INSERT INTO `sm2Object` VALUES("-184527836","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:12:\"Introduction\";s:8:\"objectid\";s:10:\"-184527836\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049712473\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050227933;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:7375:\"<h1>An Introduction to FOOWD</h1>\r\n\r\n<p>FOOWD is a framework for building object orientated (OO) web applications in PHP. It is a collection of base classes ripe for extending that handle object persistency, user authorisation, security, data administration, input handling, all the things required to build OO web applications.</p>\r\n\r\n<h3>Objects</h3>\r\n<p>FOOWD provides a generic data storage structure to store objects as text strings in the storage medium, allowing re-creation of object instances as required. All storage processing is handled by the base class member functions, allowing all inherited objects to save and restore themselves.</p>\r\n\r\n<h3>Methods</h3>\r\n<p>Methods are then defined on objects that provide some interaction between the object and the clients browser, be it outputting the objects contents, providing forms for changing the objects member variables, or whatever.</p>\r\n\r\n<img src=\"foowd diagram.jpg\" width=\"330\" height=\"330\" class=\"pic\" alt=\"Diagram of FOOWD objects\" />\r\n\r\n<h3>Base System Class</h3>\r\n<p>The base system class is a framework class to be extended and is what makes FOOWD work as a framework. It handles saving and restoring objects, method permissions, member variable verification, object version control, object creation, administration and destruction. All other system classes (FOOWD classes or user defined classes) inherit from this base class.</p>\r\n\r\n<h2>Features</h2>\r\n\r\n<ul>\r\n<li><a href=\"#Data Persistency\">Data Persistency</a></li>\r\n<li><a href=\"#Object Access\">Object Access</a></li>\r\n<li><a href=\"#User Authorisation\">User Authorisation</a></li>\r\n<li><a href=\"#Security\">Security</a></li>\r\n<li><a href=\"#Version Control\">Version Control</a></li>\r\n<li><a href=\"#Workspaces\">Workspaces</a></li>\r\n<li><a href=\"#Input Handling\">Input Handling</a></li>\r\n<li><a href=\"#Output Caching\">Output Caching</a></li>\r\n<li><a href=\"#Distributed Development\">Distributed Development</a></li>\r\n</ul>\r\n\r\n<a name=\"Data Persistency\"></a>\r\n<h3>Data Persistency</h3>\r\n<p>FOOWD provides a generic data storage structure to store objects as text strings in the storage medium, allowing re-creation of object instances as required. All storage processing is handled by the base class (foowd_object) member functions, allowing all inherited objects to save and restore themselves. Individual class member variables can be assigned index status (if using a storage medium that supports indexes) allowing objects to be found upon the value of their member variables. The database structure is automatically altered by FOOWD to create the new indexes as required.</p>\r\n\r\n<a name=\"Object Access\"></a>\r\n<h3>Object Access</h3>\r\n<p>The FOOWD system is set up to allow a small number of “verbs” to affect a large number of “nouns”, where the nouns are object instances within the system and the verbs are methods which can be called upon them. Methods are defined as member functions that can be evoked via a user.</p>\r\n<p>Objects are indexed by four values.</p>\r\n<h4>Object ID</h4>\r\n<p>All objects are given a 32-bit integer ID generated automatically from the objects Title string via the crc32 hash algorithm. Collisions (caused either by two objects having the same Title or a collision in the crc32 algorithm) are handled by incrementing the ID until a unique value is found. Objects can be retrieved by knowing either the Title or the ID, the Title being hashed to give the ID for lookup.</p>\r\n<h4>Class ID</h4>\r\n<p>The Object ID of the class of the object. This allows easy identifying of objects of a certain type, as well as allowing two objects of different classes to have the same Object ID (and thus the same Title without causing lookup problems).</p>\r\n<h4>Version Number</h4>\r\n<p>Version control is an inbuilt and integral part of FOOWD, allowing multiple versions of the same object to exist and a history of previous versions to be stored. The base object save member function handles the creation of new versions and garbage collection of previous versions automatically.</p>\r\n<h4>Workspace ID</h4>\r\n<p>All objects belong to a Workspace given by the Workspaces Object ID. A user (being an object themselves) also belong to a Workspace, thus both user and the users objects can be moved to a separate Workspace away from interfering with existing objects in the main Workspace.</p>\r\n<h4>Method</h4>\r\n<p>Once an object is retrieved and unserialized into a live object, an object method is called to carry out whatever processing is required.</p>\r\n\r\n<a name=\"Security\"></a>\r\n<h3>Security</h3>\r\n<p>Object methods are permission controlled by the system, only allowing user groups with per object permission to execute the method. One class within the base system provides user objects which are tied to incoming client requests placing the client within one or more user groups.</p>\r\n\r\n<a name=\"Version Control\"></a>\r\n<h3>Version Control</h3>\r\n<p>All objects within FOOWD automatically have previous versions archived when changes are saved back to the storage medium, this allows objects to be rolled back to previous versions.</p>\r\n\r\n<a name=\"Workspaces\"></a>\r\n<h3>Workspaces</h3>\r\n<p>Workspaces are self-contained areas within a FOOWD system where users and objects can be placed. Objects within a Workspace ca not be accessed from outside that Workspace, they do not appear to exist to any user outside the Workspace.</p>\r\n<p>All objects outside any Workspaces (in the space often known as the Base Workspace) can be accessed by user from within a Workspace, but objects within the Workspace with the same Object ID, Class ID and Version Number of objects outside will be visible rather than the outside objects. In this way, a user can clone objects into a Workspace and work on them as if they were live in the system but without any other users seeing his changes or being effected.</p>\r\n\r\n<a name=\"Input Handling\"></a>\r\n<h3>Input Handling</h3>\r\n<p>The standard HTTP input mechanisms (GET, POST, COOKIE) are wrapped in easy to use and extend objects that handle all elements of input capture, persistence and validation.</p>\r\n\r\n<a name=\"Output Caching\"></a>\r\n<h3>Output Caching</h3>\r\n<p>Performance is always an issue with dynamic systems, to increase performance when and where it might be needed FOOWD adds a caching layer to method calls. Commonly accessed methods (like your homepages view method for example) can be set to have their output cached by FOOWD, upon re-request the cache is accessed and returned rather than re-processing the object method. This can be particularly useful if your method does a lot of calculations and yet does not need to produce a freshly updated result each request (for example reading stock values from a remote source). The cache can be set for each object method individually and told to flush the cache after a certain amount of time.</p>\r\n\r\n<a name=\"Distributed Development\"></a>\r\n<h3>Distributed Development</h3>\r\n<p>Classes can be defined dyamically, that is there is a class within the base system that defines objects that define class definitions allowing you to create new class types dynamically in the storage medium.</p>\r\n<p>This coupled with workspaces, version control, and the security system, leads to a fully distributed development environment allowing many developers to work on a live web application without steping on each other toes and with instant results.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Introduction","2003-04-13 10:58:53","0");
INSERT INTO `sm2Object` VALUES("-1815216328","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"Constants\";s:8:\"objectid\";i:-1815216328;s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049720275\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050228033;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:6794:\"<h1>FOOWD System Constants</h1>\r\n\r\n<p>FOOWD uses a number of constants that can be defined in the configuration file to set certain default values, effect behavour, or otherwise configure the system. They are briefly outlined below:</p>\r\n\r\n<h2>System Settings</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>PATH</td><td>Path from lead-in file to FOOWD config file.</td><td>\'\'</td></tr>\r\n<tr><td>FILENAME</td><td>Name of lead-in file.</td><td>$_SERVER[\'PHP_SELF\']</td></tr>\r\n</table>\r\n\r\n<h2>Database</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>DATABASE</td><td>Database type</td><td>\'mysql\'</td></tr>\r\n<tr><td>DB_HOST</td><td>Database address</td><td>\'127.0.0.1\'</td></tr>\r\n<tr><td>DB_NAME</td><td>Database name</td><td>\'foowd\'</td></tr>\r\n<tr><td>DB_USER</td><td>Database username</td><td>\'root\'</td></tr>\r\n<tr><td>DB_PASS</td><td>Database password</td><td>\'\'</td></tr>\r\n<tr><td>DB_TABLE</td><td>Default database table</td><td>\'tblObject\'</td></tr>\r\n<tr><td>DATABASE_DATE</td><td>Database date format (set in db.*.php)</td><td>\'Y-m-d H:i:s\'</td></tr>\r\n<tr><td>DATABASE_DATETIME_DATATYPE</td><td>Database datetime type (set in db.*.php)</td><td>\'DATETIME\'</td></tr>\r\n</table>\r\n\r\n<h2>Object Settings</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>DEFAULT_OBJECTID</td><td>Objectid of default object to retrieve</td><td>-633383736</td></tr>\r\n<tr><td>DEFAULT_CLASSID</td><td>Classid of default class type to retrieve</td><td>-1465013268</td></tr>\r\n<tr><td>DEFAULT_METHOD</td><td>Default method to call on an object.</td><td>\'view\'</td></tr>\r\n<tr><td>DEFAULT_CLASS_METHOD</td><td>Default method to call on a class.</td><td>\'create\'</td></tr>\r\n<tr><td>ALLOW_DUPLICATE_TITLE</td><td>Allow objects to have the same name</td><td>TRUE</td></tr>\r\n</table>\r\n\r\n<h2>Regular Expressions</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>REGEX_TITLE</td><td>Object title regex</td><td>\'/^[a-zA-Z0-9-_ ]{1,32}$/\'</td></tr>\r\n<tr><td>REGEX_ID</td><td>Object id regex</td><td>\'/^[0-9-]{1,10}$/\'</td></tr>\r\n<tr><td>REGEX_DATETIME</td><td>Datetime field regex</td><td>\'/^[0-9-]{1,10}$/\'</td></tr>\r\n<tr><td>REGEX_PASSWORD</td><td>User password regex</td><td>\'/^[A-Za-z0-9]{1,32}$/\'</td></tr>\r\n<tr><td>REGEX_EMAIL</td><td>E-mail address regex</td><td>\'/^[A-Za-z0-9._-]+@[A-Za-z0-9._-]+\\.[A-Za-z]{1,4}$/\'</td></tr>\r\n</table>\r\n\r\n<h2>Display Settings</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>DATETIME_FORMAT</td><td>Formatting string to format dates</td><td>\'D jS F Y \\a\\t h:ia\'</td></tr>\r\n<tr><td>ANONYMOUS_USER_NAME</td><td>Username to give Anonymous user (if using foowd_anonuser class).</td><td>$_SERVER[\'REMOTE_ADDR\']</td></tr>\r\n<tr><td>DEBUG</td><td>Turn on debugging.</td><td>FALSE</td></tr>\r\n<tr><td>CACHE_DIR</td><td>Directory for storing cache files.</td><td>$_ENV[\'tmp\']</td></tr>\r\n</table>\r\n\r\n<h2>Security Settings</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>ANON_GOD</td><td>Anonymous user is a god, set this to TRUE to set up your site then back to FALSE before going live</td><td>FALSE</td></tr>\r\n<tr><td>AUTH_TYPE</td><td>User auth type (\'http\' or \'cookie\').</td><td>\'cookie\'</td></tr>\r\n<tr><td>PASSWORD_SALT</td><td>Salt string to append to user passwords before hashing.</td><td>\'foowd\'</td></tr>\r\n<tr><td>ANONYMOUS_USER_ID</td><td>Objectid of user within database to use as the Anonymous user.</td><td>FALSE</td></tr>\r\n<tr><td>USER_CLASS_ID</td><td>Objectid of class to use as users.</td><td>425464453</td></tr>\r\n<tr><td>SESSION_LENGTH</td><td>Number of seconds before a user session has expired and a new session is started for the user.</td><td>900</td></tr>\r\n<tr><td>DEFAULT_METHOD_PERMISSION</td><td>Default user group for executing methods without permissions explicitly set.</td><td>\'Everyone\'</td></tr>\r\n<tr><td>&lt;className&gt;_&lt;methodName&gt;_PERMISSION</td><td>Default user group for executing class method.</td><td>\'Everyone\'</td></tr>\r\n<tr><td>DEFAULT_VIEW_GROUP</td><td>Default user group for executing view method.</td><td>\'Everyone\'</td></tr>\r\n<tr><td>DEFAULT_ADMIN_GROUP</td><td>Default user group for executing admin method.</td><td>\'Gods\'</td></tr>\r\n<tr><td>DEFAULT_DELETE_GROUP</td><td>Default user group for executing delete method.</td><td>\'Gods\'</td></tr>\r\n</table>\r\n\r\n<h2>History Settings</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>DESTROY_OLDER_THAN</td><td>Time to keep an archive version of an object.</td><td>\'-1 month\'</td></tr>\r\n<tr><td>MINIMUM_NUMBER_OF_ARCHIVED_VERSIONS</td><td>Minimum number of archived versions of an object to keep.</td><td>3</td></tr>\r\n</table>\r\n\r\n<h2>Cookie Settings</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>COOKIE_EXPIRE</td><td>Number of seconds to keep cookie.</td><td>31536000</td></tr>\r\n<tr><td>COOKIE_PATH</td><td>Path cookie should be used for.</td><td></td></tr>\r\n<tr><td>COOKIE_DOMAIN</td><td>Domain cookie should be used for.</td><td></td></tr>\r\n<tr><td>COOKIE_SECURE</td><td>Whether to only send cookie when using https.</td><td>FALSE</td></tr>\r\n</table>\r\n\r\n<h2>Input Settings</h2>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>INPUT_TEXTBOX_SIZE_MIN</td><td>Minimum width of a textbox.</td><td>4</td></tr>\r\n<tr><td>INPUT_TEXTBOX_SIZE_MAX</td><td>Maximum width of a textbox.</td><td>50</td></tr>\r\n<tr><td>INPUT_TEXTAREA_WIDTH_MIN</td><td>Minimum width of a textarea.</td><td>20</td></tr>\r\n<tr><td>INPUT_TEXTAREA_WIDTH_MAX</td><td>Maximum width of a textarea.</td><td>100</td></tr>\r\n<tr><td>INPUT_TEXTAREA_HEIGHT_MIN</td><td>Minimum height of a textarea.</td><td>4</td></tr>\r\n<tr><td>INPUT_TEXTAREA_HEIGHT_MAX</td><td>Maximum height of a textarea.</td><td>30</td></tr>\r\n<tr><td>INPUT_TEXTARRAY_SIZE_MIN</td><td>Minimum width of a textarray.</td><td>4</td></tr>\r\n<tr><td>INPUT_TEXTARRAY_SIZE_MAX</td><td>Maximum width of a textarray.</td><td>20</td></tr>\r\n</table>\r\n\r\n<h2>Diff Settings</h2>\r\n<p>These constants are used by the plain text class for executing it\'s diff method.</p>\r\n<table border=\"1\">\r\n<tr><th>Constant</th><th>Description</th><th>Default Value</th></tr>\r\n<tr><td>DIFF_COMMAND</td><td>Path to execute external diff command.</td><td>\'diff -u3\'</td></tr>\r\n<tr><td>DIFF_ADD_REGEX</td><td>Regex matching added lines in diff response.</td><td>\'/^\\+(.*)/\'</td></tr>\r\n<tr><td>DIFF_MINUS_REGEX</td><td>Regex matching removed lines in diff response.</td><td>\'/^\\-(.*)/\'</td></tr>\r\n</table>\r\n\r\n<p></p>\r\n\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Constants","2003-04-13 11:00:33","0");
INSERT INTO `sm2Object` VALUES("-633383736","2","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:5:\"FOOWD\";s:8:\"objectid\";s:10:\"-633383736\";s:7:\"version\";s:1:\"2\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049314341\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050231036;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:2983:\"<h1>Framework for Object Orientated Web Development</h1>\r\n\r\n<p>FOOWD is a framework for building object orientated (OO) web applications in PHP. It is a collection of base classes ripe for extending that handle object persistency, user authorisation, security, data administration, input handling, all the things required to build OO web applications.</p>\r\n\r\n<p>A good place to start at the moment might be with the <a href=\"?object=Object List\">Object List</a>.</p>\r\n\r\n<h2>Digesting FOOWD - The Beginnings of a FOOWD Manual</h2>\r\n<dl>\r\n<dt>I. Getting Started</dt>\r\n<dd>\r\n1. <a href=\"?object=introduction\">Introduction</a><br />\r\n2. <a href=\"?object=installation\">Installation &amp; Configuration</a><br />\r\n3. <a href=\"?object=definitions\">Definitions / Terminology</a><br />\r\n</dd>\r\n<dt>II. Writing FOOWD Applications</dt>\r\n<dd>\r\n4. <a href=\"?object=writing system classes\">Extending the Base Classes</a><br />\r\n5. <a href=\"?object=writing lead-in documents\">Lead-in Documents</a> - To Be Written<br />\r\n6. <a href=\"?object=writing input classes\">Writing Input Classes</a> - To Be Written<br />\r\n7. <a href=\"?object=examples\">Examples</a> - In Progress<br />\r\n</dd>\r\n<dt>III. FOOWD Internals</dt>\r\n<dd>\r\n8. <a href=\"?object=base classes\">Base Classes</a><br />\r\n9. <a href=\"?object=input classes\">Input Classes</a><br />\r\n10. <a href=\"?object=functions\">System Functions</a><br />\r\n11. <a href=\"?object=constants\">System Constants</a><br />\r\n</dd>\r\n<dt>IV. Using FOOWD</dt>\r\n<dd>\r\n12. <a href=\"?object=authentication\">User Authentication</a> - To Be Written<br />\r\n13. <a href=\"?object=permissions\">Method Permissions &amp; User Groups</a> - To Be Written<br />\r\n14. <a href=\"?object=dynamic class\">Writing Dynamic Classes</a> - To Be Written<br />\r\n15. <a href=\"?object=workspaces\">Using Workspaces</a> - To Be Written<br />\r\n16. <a href=\"?object=cache\">Output Caching</a> - To Be Written<br />\r\n</dd>\r\n</dl>\r\n\r\n<h2>Whatever Happened To Wiki Type Framework (WTF)?</h2>\r\n<p>WTF was the prequal to FOOWD, written between Sept 2001 and July 2002, it had a much narrower scope than FOOWD, that of to create a content management system using <a href=\"http://c2.com/cgi/wiki?WikiWikiWeb\">Wiki</a> principles. FOOWD on the other hand is a OO web application framework and builds upon everything I learnt from writing WTF to create a more flexible and better rounded development framework.</p>\r\n\r\n<h2>Development Progress</h2>\r\n<ul>\r\n<li>Data Persistency - <strong>Complete</strong></li>\r\n<li>Object Access - <strong>Complete</strong></li>\r\n<li>User Authorisation - <strong>Complete</strong></li>\r\n<li>Security - <strong>Complete</strong></li>\r\n<li>Version Control - <strong>Complete</strong></li>\r\n<li>Workspaces - <strong>Complete</strong></li>\r\n<li>Input Handling - <strong>Complete</strong></li>\r\n<li>Output Caching - <strong>Complete</strong></li>\r\n<li>Dynamic Classes - TBD</li>\r\n</ul>\r\n\r\n<h2>Downloads</h2>\r\n<p><a href=\"?object=downloads\">FOOWD downloads can be found here</a>.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","FOOWD","2003-04-13 11:50:36","0");
INSERT INTO `sm2Object` VALUES("481979057","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:12:\"Installation\";s:8:\"objectid\";s:9:\"481979057\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049820390\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050227946;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:7831:\"<h1>Installing &amp Configuring FOOWD</h1>\r\n\r\n<p>This chapter covers installing the FOOWD source and setting up your application. It\'s most likely if you\'re reading this that you are new to FOOWD and thus will just want to get it up and running first to see what it can do, so we\'ll concentrate on getting the base install working \"out of the box\". This will in effect create a clone of this site including a collection of initial objects.</p>\r\n\r\n<p class=\"nb\"><strong>Note:</strong> FOOWD is a PHP development framework so this document expects that you are prolific at writing PHP code and working with PHP source. You don\'t need to be a PHP guru to use FOOWD, but it might help.</p>\r\n\r\n<h2>What Do I Need?</h2>\r\n\r\n<p>Firstly you\'ll need a web server running PHP 4.2.0 or above. Setting up a server is beyond the scope of this document, but you can find out more about the <a href=\"http://httpd.apache.org\">Apache web server here</a> and about <a href=\"http://www.php.net/manual/en/\">installing and configuring PHP here</a>.</p>\r\n\r\n<p>Next you\'ll need a database server, currently FOOWD only supports MySQL, again the installation and configuration of MySQL is outside the scope of this document, but you can find <a href=\"http://www.mysql.com/documentation/\">how to install and configure MySQL here</a>.</p>\r\n\r\n<p>Finally you need the FOOWD source code and data, this is available <a href=\"?object=downloads\">from this site</a> in tar/gzip format.</p>\r\n\r\n<h2>Installation</h2>\r\n\r\n<h3>Extract FOOWD Files</h3>\r\n\r\n<p>Extract the archive into the web root of your web server keeping the directory structure in tact, the archive will create a directory called \"foowd\" which should look something like this:</p>\r\n\r\n<pre>\r\nfoowd\r\n|-config.default.php        Default config file\r\n|-index.php                 Default of the box lead-in file\r\n|-header.php                Document header\r\n|-footer.php                Document footer\r\n|-style.css                 Style sheet\r\n|-mysql.sql                 MySQL database create script\r\n|-lib\r\n| |-class.foowd.php         FOOWD environment class\r\n| |-class.object.php        Base system class\r\n| |-class.text.html.php     HTML text class\r\n| |-class.text.plain.php    Plain text class\r\n| |-class.user.php          User class\r\n| |-db.mysql.php            MySQL database layer\r\n| |-input.checkbox.php    \\\r\n| |-input.checkgroup.php  |\r\n| |-input.cookie.php      |\r\n| |-input.dropdown.php    |\r\n| |-input.file.php        \\\r\n| |-input.form.php         >Input classes\r\n| |-input.querystring.php /\r\n| |-input.radio.php       |\r\n| |-input.textarea.php    |\r\n| |-input.textarray.php   |\r\n| |-input.textbox.php     /\r\n| \\-lib.php                 FOOWD system functions\r\n\\-objects\r\n  \\-objtool.php             XML object import/export/backup tool\r\n</pre>\r\n\r\n<h3>Create Database</h3>\r\n\r\n<p>With the source unpacked, the next set is to set up the database.</p>\r\n\r\n<p>Connect to your MySQL server using your favourite client with a user with the appropriate privileges and either create yourself a new database or use an existing one you already have lying around ready. Use the database creation script mysql.sql to create the FOOWD table tlbObject and populate it with the initial data.</p>\r\n\r\n<p class=\"nb\"><strong>Note:</strong> If you are hiring database services you may only have one database available to use. FOOWD is very happy to share a database with other applications, it only uses a single table \"out of the box\" which can be named in the config file.</p>\r\n\r\n<p>Next, if you feel like it, create a database user for FOOWD to use and give it the privileges it requires to access the database.</p>\r\n\r\n<p class=\"nb\"><strong>Note:</strong> To get full functionality your database user will require the following privileges: Select, Insert, Update, Delete, Index, Alter. Many sysadmins are wary about giving users Alter privilege, without it FOOWD can not automatically restructure the data when objects of new classes are added to the system.</p>\r\n\r\n<h2>Configuration</h2>\r\n\r\n<p>Now that we have the database and the web server set up, we can configure FOOWD and get things rolling.</p>\r\n\r\n<h3>Creating The Config</h3>\r\n\r\n<p>Make a copy of config.default.php and open it in your favourite PHP editor. Most settings can be ignored for the purpose of this introduction, all you need to worry about are the database connection constants at the top of the file. Set the database server hostname, etc. and save the file.</p>\r\n\r\n<p class=\"nb\"><strong>Note:</strong> There are a number of system constants that effect the way FOOWD behaves, a full list of them <a href=\"?object=constants\">can be found here</a>.</p>\r\n\r\n<h3>Adjusting The Lead-In</h3>\r\n\r\n<p>Next open the lead-in document, index.php. The lead-in document is the document that the clients load and which then loads FOOWD and starts the ball rolling. You can write your own lead-in document specific for your own application, but for this guide the one included in the archive will do nicely. The lead-in does five things:</p>\r\n\r\n<ol>\r\n<li>Define system path and load config file (and FOOWD system files).</li>\r\n<li>Get data about object and method to request from HTTP request.</li>\r\n<li>Initialise the FOOWD environment.</li>\r\n<li>Load the object and call the required method.</li>\r\n<li>Clean up.</li>\r\n</ol>\r\n\r\n<p>We need to tell it to use your config file rather than config.default.php. So change the second line to point to your config.</p>\r\n\r\n<blockquote>require(\'config.myconf.php\');</blockquote>\r\n\r\n<p>And that should do it. Fire up a web browser and navigate to your new site, you should be greated by a congratulations page.</p>\r\n\r\n<h3>Setting Up Users</h3>\r\n\r\n<p>Now that FOOWD is up and running and you can access it, you need to take ownership of the system. The data within the archive comes with a single predefined user called \'root\' to help get you started. Use the menu at the foot of the page to execute the log in method on the user class (User::Login) and you will see the log in form. Log in with the username \'root\' giving the password \'root\' and you should find yourself logged in to the site.</p>\r\n\r\n<p>Firstly, before we change your password, we\'ll check out the root user using the object administration method. Click on the new \'Root\' link that has appeared at the foot of the page, this will call the default method on the user (view) which shows you some information about the user (if it\'s not there you are not logged in correctly, make sure your browser is accepting cookies and try again). Then find and click the \'Admin\' method again in the menu at the foot of the page, this will take you to the admin method and display you a huge form with a form widget for each member variable. The interesting thing to notice are the Permissions and Groups textbox arrays. The Permissions array defines which user groups (on the right) have access to which of the objects methods (on the left), you\'ll notice that the update method has permission by the user group \"Author\", a magical user group that contains just the original author of an object. The Groups array lists which user groups the user is a member of, in this case the \'Everyone\' group and the \'Gods\' group. In FOOWD, user groups are simply text strings, a user belongs to a group if its name is in the groups array.</p>\r\n\r\n<p>Right, with that done we need to change roots password to something less obvious, so click on the \'Update\' method again in the menu at the foot of the page. This will display the user update form and allow you to change the password. Once changed you will be required to log in again with the new password.</p>\r\n\r\n<h2>All Done</h2>\r\n\r\n<p>And that\'s it for this little tutorial. You should have a working FOOWD application like this one. Now it\'s time for you to have a little play and then start making your own classes.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Installation","2003-04-13 10:59:06","0");
INSERT INTO `sm2Object` VALUES("2077273413","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:8:\"Examples\";s:8:\"objectid\";s:10:\"2077273413\";s:7:\"version\";s:1:\"1\";s:7:\"classid\";s:10:\"1158898744\";s:11:\"workspaceid\";s:1:\"0\";s:7:\"created\";s:10:\"1049880285\";s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050227982;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:4:\"diff\";s:4:\"Gods\";s:4:\"edit\";s:4:\"Gods\";}s:4:\"body\";s:31832:\"<h1>Examples</h1>\r\n\r\n<p>This chapter contains a number of examples of how to write new FOOWD system classes, new lead-in documents to refect your applications architecture, and new input classes.</p>\r\n\r\n<h2>Example 1. Creating A UBB Page Class</h2>\r\n\r\n<p>In this example we are going to write a new system class for making documents that can be formatted by using the markup language used on UBB message forums.</p>\r\n\r\n<p class=\"nb\"><strong>Note:</strong> The source of this example can be found in the FOOWD archive under examples/class.ubb.php.</p>\r\n\r\n<p>We will create a new class that extends the base system class foowd_object to add a new member variable to hold the content body, a new member function to do the UBB code to HTML translation, and 3 new methods allowing us to create, view and edit instances of the class.</p>\r\n\r\n<p class=\"nb\"><strong>Note:</strong> We could have extended the foowd_text_plain class and borrowed some of it\'s functionality, however I wanted to demonstrate extending the base class so you can see everything involved in it.</p>\r\n\r\n<pre>\r\n<span class=\"code_other\"><span class=\"code_function\">&lt;?php\r\n</span><span class=\"code_comment\">/*\r\nclass.ubb.php\r\nUBB code example class\r\n*/\r\n\r\n/** CLASS DESCRIPTOR **/\r\n</span><span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[-</span><span class=\"code_function\">218942863</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'className\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'foowd_ubb\'</span><span class=\"code_structure\">;\r\n</span><span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[-</span><span class=\"code_function\">218942863</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'description\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'UBB Text Object\'</span><span class=\"code_structure\">;</span></span>\r\n</pre>\r\n\r\n<p>Firstly, before we even define a new class, we must add it to the FOOWD class descriptor array. This array allows FOOWD to get the class name and a text description of any system class. The first index on the array is the classes objectid number, otherwise known as a crc32 of its class name. We\'re going to call our class \"foowd_ubb\", so its objectid is going to be -218942863.</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/** CLASS METHOD PERMISSIONS **/\r\n</span><span class=\"code_function\">define</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'FOOWD_UBB_CREATE_PERMISSION\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Authors\'</span><span class=\"code_structure\">);</span>\r\n</pre>\r\n\r\n<p>Next we define the permissions of any class methods we will define within the class. We\'re going to have a create class method (a method that is called on the class and not on an instantiated object) and I only want people in the Authors group to be able to access that method.</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/** CLASS METHOD PASSTHRU FUNCTION **/\r\n</span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_ubb_classmethod</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">) { </span><span class=\"code_function\">foowd_ubb</span><span class=\"code_structure\">::</span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'foowd_ubb\'</span><span class=\"code_structure\">); }</span>\r\n</pre>\r\n\r\n<p>This passthru function must be defined for all classes that has class methods. This function is used to call the class methods within the class, in PHP it is not possible to have variable class names in static member calls, so this function gets around that limitation. Basically, we need one and all we need to do to it is make sure all the references to our class are set correctly (to foowd_ubb).</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/** CLASS DECLARATION **/\r\n</span><span class=\"code_structure\">class </span><span class=\"code_function\">foowd_ubb </span><span class=\"code_structure\">extends </span><span class=\"code_function\">foowd_object </span><span class=\"code_structure\">{</span>\r\n</pre>\r\n\r\n<p>Right, with all that done we can actually start defining our class. We are extending the base class foowd_object, this gives our class all the base functionality of the FOOWD system class including its all important save() member function.</p>\r\n\r\n<pre>\r\n    <span class=\"code_structure\">var </span><span class=\"code_function\">$body</span><span class=\"code_structure\">;</span>\r\n</pre>\r\n\r\n<p>We\'re going to add one new member variable to our class and its going to hold our pages content text. Later we\'ll define the meta data for this variable so FOOWD knows what type of data it can contain.</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/*** CONSTRUCTOR ***/\r\n\r\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">foowd_ubb</span><span class=\"code_structure\">(\r\n        &amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$title </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$body </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$viewGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$adminGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$deleteGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$editGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL\r\n    </span><span class=\"code_structure\">) {\r\n\r\n</span><span class=\"code_comment\">// base object constructor\r\n        </span><span class=\"code_function\">parent</span><span class=\"code_structure\">::</span><span class=\"code_function\">foowd_object</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$title</span><span class=\"code_structure\">, </span><span class=\"code_function\">$viewGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">$adminGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">$deleteGroup</span><span class=\"code_structure\">);\r\n\r\n</span><span class=\"code_comment\">/* set object vars */\r\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">body </span><span class=\"code_structure\">= </span><span class=\"code_function\">$body</span><span class=\"code_structure\">;\r\n\r\n</span><span class=\"code_comment\">/* set method permissions */\r\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">permissions</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'edit\'</span><span class=\"code_structure\">] = </span><span class=\"code_function\">setVarConstOrDefault</span><span class=\"code_structure\">(</span><span class=\"code_function\">$editGroup</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'DEFAULT_EDIT_GROUP\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Everyone\'</span><span class=\"code_structure\">);\r\n\r\n    }</span>\r\n</pre>\r\n\r\n<p>We\'re going to overwrite the existing foowd_object constructor and write our own since we\'re got a new piece of data and a new permission to set. Firstly our constructor calls the foowd_object constructor which does the bulk of the initialisation for us, and then we set our $body member variable to the passed in value (we\'re not checking its validity, we\'ll leave that to our create method). Finally we\'re setting up a new permission in the objects permissions array for our new edit() method which we\'ll be writing soon. I\'m using setVarConstOrDefault(), one of FOOWDs library functions that\'ll return one of the three parameters depending on which are set and non-zero.</p>\r\n\r\n<pre\r\n><span class=\"code_comment\">/*** SERIALIZE FUNCTIONS ***/\r\n\r\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">__wakeup</span><span class=\"code_structure\">() {\r\n        </span><span class=\"code_function\">parent</span><span class=\"code_structure\">::</span><span class=\"code_function\">__wakeup</span><span class=\"code_structure\">();\r\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'body\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">;\r\n    }</span>\r\n</pre>\r\n\r\n<p>FOOWD needs to know about all member variables so that it knows to include them in object serialization (what happens when an object is saved) and what values it is allowed to contain. We do this by setting an item in the foowd_vars_meta array with the index matching the member variable and the value of a regualr expression matching values allowed within the member variable. In this case we want our body variable to contain any value, so we set the value to the empty string.</p>\r\n\r\n<p>We define our new meta array entry in the special __wakeup() function. Since we don\'t need to save all these meta variables when we save our object to the database, they are dropped upon serialization and re-created (by this special function) upon retrieval and unserialization. If we don\'t have any new items to add to our meta arrays we don\'t need to define a __wakeup() function, but if we do define one the first line must call the parent objects __wakeup() function so that all meta array entries are re-created.</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/*** MEMBER FUNCTIONS ***/\r\n\r\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">processUBB</span><span class=\"code_structure\">(</span><span class=\"code_function\">$text</span><span class=\"code_structure\">) {\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">htmlspecialchars</span><span class=\"code_structure\">(</span><span class=\"code_function\">$text</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// replace special HTML chars with HTML entities\r\n        \r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'|\\[b\\](.*)\\[/b\\]|U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;b&gt;$1&lt;/b&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'|\\[i\\](.*)\\[/i\\]|U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;i&gt;$1&lt;/i&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'|\\[u\\](.*)\\[/u\\]|U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;u&gt;$1&lt;/u&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[img\\]((http|ftp):\\/\\/[a-zA-Z0-9._\\/ -]+)\\[\\/img\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;img src=\"$1\" alt=\"$1\" /&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[img\\]([a-zA-Z0-9._\\/ -]+)\\[\\/img\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;img src=\"http://$1\" alt=\"$1\" /&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[((http|ftp|mailto):\\/\\/[a-zA-Z0-9._\\/ -]+)\\|([A-Za-z0-9 ]+)\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;a href=\"$1\"&gt;$3&lt;/a&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[(ftp.[a-zA-Z0-9._\\/ -]+)\\|([A-Za-z0-9 ]+)\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;a href=\"ftp://$1\"&gt;$2&lt;/a&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/\\[([a-zA-Z0-9._\\/ -]+)\\|([A-Za-z0-9 ]+)\\]/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'&lt;a href=\"http://$1\"&gt;$2&lt;/a&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">preg_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'/(\\s)((http|ftp|mailto):\\/\\/[a-zA-Z0-9._\\/ -]+)(\\s)/U\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'$1&lt;a href=\"$2\"&gt;$2&lt;/a&gt;$4\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">);\r\n        \r\n        </span><span class=\"code_function\">$text </span><span class=\"code_structure\">= </span><span class=\"code_function\">str_replace</span><span class=\"code_structure\">(</span><span class=\"code_string\">\"\\n\"</span><span class=\"code_structure\">, </span><span class=\"code_string\">\"&lt;br /&gt;\\n\"</span><span class=\"code_structure\">, </span><span class=\"code_function\">$text</span><span class=\"code_structure\">); </span><span class=\"code_comment\">// replace new lines with BR tags\r\n        </span><span class=\"code_structure\">return </span><span class=\"code_function\">$text</span><span class=\"code_structure\">;\r\n    }</span>\r\n</pre>\r\n\r\n<p>We have one new member function to define, a function that\'ll change the UBB code in our body variable to HTML we can output.</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/*** CLASS METHODS ***/\r\n\r\n/* create object */\r\n\r\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">class_create</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$className</span><span class=\"code_structure\">) {\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;Create new UBB page&lt;/h1&gt;\'</span><span class=\"code_structure\">;\r\n        </span><span class=\"code_function\">$createForm </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_form</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createForm\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'POST\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Create\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$createTitle </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createTitle\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">REGEX_TITLE</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Title:\'</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$createBody </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textarea</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createBody\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">80</span><span class=\"code_structure\">, </span><span class=\"code_function\">20</span><span class=\"code_structure\">);\r\n        if (!</span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">submitted</span><span class=\"code_structure\">() || </span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value </span><span class=\"code_structure\">== </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">) {\r\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">);\r\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$createBody</span><span class=\"code_structure\">);\r\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">display</span><span class=\"code_structure\">();\r\n        } else {\r\n            </span><span class=\"code_function\">$object </span><span class=\"code_structure\">= new </span><span class=\"code_function\">$className</span><span class=\"code_structure\">(\r\n                </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">,\r\n                </span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\r\n                </span><span class=\"code_function\">$createBody</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value\r\n            </span><span class=\"code_structure\">);\r\n            if (</span><span class=\"code_function\">$object</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">save</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">FALSE</span><span class=\"code_structure\">)) {\r\n                echo </span><span class=\"code_string\">\'&lt;p&gt;UBB page created and saved.&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n            } else {\r\n                echo </span><span class=\"code_string\">\'&lt;p&gt;Could not create UBB page.&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n            }\r\n        }\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n    }\r\n</span>\r\n</pre>\r\n\r\n<p>We have to enable people to create our object, so we need a class method to display a form and get a title and content for our page, then call our constructor to create the instance and to finally save our new object.</p>\r\n\r\n<p>One thing you may notice are the two function calls to foowd_prepend() and foowd_append() at the head and the foot of the method. These functions you\'ll find in your configuration file, all classes call these two functions at the beginning and end of their methods allowing use to add a standard header and footer to all of our output.</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/*** METHODS ***/</span>\r\n</pre>\r\n\r\n<p>Last but not least we have two object methods to define, one for viewing our new object and one for editing its content.</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/* view object */\r\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">method_view</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">) {\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">htmlspecialchars</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">title</span><span class=\"code_structure\">), </span><span class=\"code_string\">\'&lt;/h1&gt;\'</span><span class=\"code_structure\">;\r\n        echo </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">processUBB</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">body</span><span class=\"code_structure\">);\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n    }</span>\r\n</pre>\r\n\r\n<p>Our view method writes the object title and then calls our processUBB() function on the page content.</p>\r\n\r\n<pre>\r\n<span class=\"code_comment\">/* edit object */\r\n    </span><span class=\"code_structure\">function </span><span class=\"code_function\">method_edit</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">) {\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;Editing version \'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">version</span><span class=\"code_structure\">, </span><span class=\"code_string\">\' of \"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">title</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'\"&lt;/h1&gt;\'</span><span class=\"code_structure\">;\r\n        </span><span class=\"code_function\">$editForm </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_form</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'editForm\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'POST\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Save\'</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$editArea </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textarea</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'editArea\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">body</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_function\">80</span><span class=\"code_structure\">, </span><span class=\"code_function\">20</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$editForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$editArea</span><span class=\"code_structure\">);\r\n        if (isset(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">user</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">objectid</span><span class=\"code_structure\">) &amp;&amp; </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">updatorid </span><span class=\"code_structure\">== </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">user</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">objectid</span><span class=\"code_structure\">) { </span><span class=\"code_comment\">// author is same as last author and not anonymous, so can just update\r\n            </span><span class=\"code_function\">$newVersion </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_checkbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'newVersion\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Do not archive previous version?\'</span><span class=\"code_structure\">);\r\n            </span><span class=\"code_function\">$editForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$newVersion</span><span class=\"code_structure\">);\r\n        }\r\n        </span><span class=\"code_function\">$editForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">display</span><span class=\"code_structure\">();\r\n        \r\n        echo </span><span class=\"code_string\">\'&lt;p&gt;[b]bold[/b] [i]italic[/i] [u]underline[/u]&lt;br /&gt;[http://www.example.com|hyperlink]&lt;br /&gt;[img]http://www.example.com/image.jpg[/img]&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n\r\n        if (</span><span class=\"code_function\">$editForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">submitted</span><span class=\"code_structure\">()) {\r\n            </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">body </span><span class=\"code_structure\">= </span><span class=\"code_function\">$editArea</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">;\r\n            if (isset(</span><span class=\"code_function\">$newVersion</span><span class=\"code_structure\">)) {\r\n                </span><span class=\"code_function\">$createNewVersion </span><span class=\"code_structure\">= !</span><span class=\"code_function\">$newVersion</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">;\r\n            } else {\r\n                </span><span class=\"code_function\">$createNewVersion </span><span class=\"code_structure\">= </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">;\r\n            }\r\n            if (</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">save</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$createNewVersion</span><span class=\"code_structure\">)) {\r\n                echo </span><span class=\"code_string\">\'&lt;p&gt;UBB page updated and saved.&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n            } else {\r\n                echo </span><span class=\"code_string\">\'&lt;p&gt;Could not save UBB page.&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n            }\r\n        }\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n    }\r\n</span>\r\n</pre>\r\n\r\n<p>Finally our edit method displays an edit form and handles updating the object.</p>\r\n\r\n<pre>\r\n<span class=\"code_structure\">}\r\n\r\n</span><span class=\"code_function\">?&gt;</span>\r\n</pre>\r\n\r\n<p>Now that our class is written, we need to load it into our FOOWD system and test it out. So we open up our configuration file and add a line to include the new classes file. This then makes the new class and its methods available for use.</p>\";s:8:\"evalCode\";s:1:\"0\";s:14:\"processInclude\";s:1:\"0\";}","Examples","2003-04-13 10:59:42","0");
INSERT INTO `sm2Object` VALUES("1265870005","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:9:\"Downloads\";s:8:\"objectid\";i:1265870005;s:7:\"version\";i:1;s:7:\"classid\";i:1158898744;s:11:\"workspaceid\";i:0;s:7:\"created\";i:1050078501;s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050078501;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:8:\"Everyone\";}s:4:\"body\";s:171:\"<h1>Download FOOWD</h1>\r\n<h2>Latest Version Of FOOWD</h2>\r\n\r\n<p>Sorry nothing here yet.</p>\r\n\r\n<hr />\r\n\r\n<h2>Older Versions Of FOOWD</h2>\r\n\r\n<p>Sorry nothing here yet.</p>\";s:8:\"evalCode\";i:0;s:14:\"processInclude\";i:0;}","Downloads","2003-04-11 17:28:21","0");
INSERT INTO `sm2Object` VALUES("-2015333756","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:22:\"Writing System Classes\";s:8:\"objectid\";i:-2015333756;s:7:\"version\";i:1;s:7:\"classid\";i:1158898744;s:11:\"workspaceid\";i:0;s:7:\"created\";i:1050171653;s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050228617;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:8:\"Everyone\";}s:4:\"body\";s:23019:\"<h1>Extending the Base Classes</h1>\r\n\r\n<p>Now we get down to the real nitty gritty, this chapter covers extending the base class to create objects that behave as you want and yet have all the properties of a FOOWD object.</p>\r\n\r\n<p class=\"nb\"><strong>Note:</strong> If you want an example of extending the base class, please read <a href=\"?object=examples\">Chapter 6</a>, however I\'d recommend reading this chapter first so that you understand the subtleties.</p>\r\n\r\n<h2>The Base Class</h2>\r\n\r\n<p>The base system class is called <a href=\"?object=base%20classes#foowd_object\">foowd_object</a> and is found in the file class.object.php. It contains all the members and methods that are required by FOOWD to create a useless object that can save itself to the database, handle its own version control, delete and clone itself, set its member variables to valid values, and generally do all the stuff that makes FOOWD worth using.</p>\r\n\r\n<p>All classes in the FOOWD system inherit these base properties from the base class foowd_object (all except <a href=\"?object=base%20classes#foowd\">foowd</a> which is the FOOWD environment object and is discussed elsewhere), it is this class that you should extend to create your own classes.</p>\r\n\r\n<p>The base class (and thus all inherited classes) is made up of a number of elements with terminology and uses which you\'ll need to understand before you can start working with it. In this section we\'ll look at the individual structural parts of the class and how and when you should extend or override them.</p>\r\n\r\n<h4>Structure</h4>\r\n<ul>\r\n<li><a href=\"#descriptor\">Class Descriptor</a></li>\r\n<li><a href=\"#method permissions\">Class Method Permissions</a></li>\r\n<li><a href=\"#passthru function\">Class Method Passthru Function</a></li>\r\n<li><a href=\"#class declaration\">Class Declaration</a></li>\r\n<li><a href=\"#member variables\">Member Variables</a></li><li><a href=\"#constructor\">Constructor</a></li>\r\n<li><a href=\"#serialize functions\">Serialize Functions</a></li>\r\n<li><a href=\"#member functions\">Member Functions</a></li>\r\n<li><a href=\"#class methods\">Class Methods</a></li>\r\n<li><a href=\"#object methods\">Object Methods</a></li>\r\n</ul>\r\n\r\n<a name=\"descriptor\"></a>\r\n<h2>The Class Descriptor</h2>\r\n\r\n<p>Every system class has to have a class descriptor. It is two entries in a global scope array that tell FOOWD the class name and a text description of the class.</p>\r\n\r\n<pre>\r\n<span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[</span><span class=\"code_function\">-2121421989</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'className\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'my_class\'</span><span class=\"code_structure\">;\r\n</span><span class=\"code_function\">$foowd_class_meta</span><span class=\"code_structure\">[</span><span class=\"code_function\">-2121421989</span><span class=\"code_structure\">][</span><span class=\"code_string\">\'description\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'My Class I Made\'</span><span class=\"code_structure\">;</span>\r\n</pre>\r\n\r\n<p>As you can see from the example, it is simply an array entry indexed on the classes ID, containing two further indexes, one for the class name and the other for the text description. The classes ID is generated by taking the class name (in this case my_class) and applying the <a href=\"http://www.php.net/crc32\">crc32</a> algorithm to it.</p>\r\n\r\n<a name=\"method permissions\"></a>\r\n<h2>Class Method Permissions</h2>\r\n\r\n<p>Each class method can have a user group permission set, to access that class method a user must belong to that user group.</p>\r\n\r\n<pre>\r\n<span class=\"code_function\">define</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'MY_CLASS_CREATE_PERMISSION\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Gods\'</span><span class=\"code_structure\">);</span>\r\n</pre>\r\n\r\n<p>These permissions are set via a constant defined with the class definition with a name of the class name followed by a \'_\' and then the class method name followed by \'_PERMISSION\'.</p>\r\n\r\n<a name=\"#passthru function\"></a>\r\n<h2>Class Method Passthru Function</h2>\r\n\r\n<p>Next a piece of housekeeping. We can call a regular function with a variable name but not a static member function (since PHP4 does not support this), so to enable us to call class methods we must define a pass through function for each class that\'ll call the static member function for us.</p>\r\n\r\n<pre>\r\n<span class=\"code_structure\">function </span><span class=\"code_function\">my_class_classmethod</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">) { </span><span class=\"code_function\">my_class</span><span class=\"code_structure\">::</span><span class=\"code_function\">$methodName</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'my_class\'</span><span class=\"code_structure\">); }</span>\r\n</pre>\r\n\r\n<p>This function must exist if there are class methods defined.</p>\r\n\r\n<a name=\"#class declaration\"></a>\r\n<h2>Class Declaration</h2>\r\n\r\n<pre>\r\n<span class=\"code_structure\">class </span><span class=\"code_function\">my_class </span><span class=\"code_structure\">extends </span><span class=\"code_function\">foowd_object </span><span class=\"code_structure\">{</span>\r\n</pre>\r\n\r\n<p>Finally we can define our class, remembering to extend our base foowd_object of course.</p>\r\n\r\n<a name=\"#member variables\"></a>\r\n<h2>Member Variables</h2>\r\n\r\n<pre>\r\n    <span class=\"code_structure\">var </span><span class=\"code_function\">$my_var1</span><span class=\"code_structure\">;\r\n    var </span><span class=\"code_function\">$my_var2 </span><span class=\"code_structure\">= </span><span class=\"code_function\">1</span><span class=\"code_structure\">;</span>\r\n</pre>\r\n\r\n<p>First in our class declaration we define any member variables we want our class to possess. We already inherit 15 member vars from foowd_object, to help stop incompatibility in the future any vars beginning with \"foowd\" are reserved for the base class.</p>\r\n\r\n<a name=\"#constructor\"></a>\r\n<h2>Constructor</h2>\r\n\r\n<pre>\r\n    <span class=\"code_structure\">function </span><span class=\"code_function\">my_class </span><span class=\"code_structure\">(\r\n        &amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$title </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$my_var1 </span><span class=\"code_structure\">= </span><span class=\"code_string\">\'Hello\'</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$my_var2 </span><span class=\"code_structure\">= </span><span class=\"code_function\">0</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$viewGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$adminGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">,\r\n        </span><span class=\"code_function\">$deleteGroup </span><span class=\"code_structure\">= </span><span class=\"code_function\">NULL\r\n    </span><span class=\"code_structure\">) {\r\n        </span><span class=\"code_function\">parent</span><span class=\"code_structure\">::</span><span class=\"code_function\">foowd_object</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$title</span><span class=\"code_structure\">, </span><span class=\"code_function\">$viewGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">$adminGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">$deleteGroup</span><span class=\"code_structure\">, </span><span class=\"code_function\">TRUE</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">var1 </span><span class=\"code_structure\">= </span><span class=\"code_function\">$var1</span><span class=\"code_structure\">;\r\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">var2 </span><span class=\"code_structure\">= </span><span class=\"code_function\">$var2</span><span class=\"code_structure\">;\r\n    }</span>\r\n</pre>\r\n\r\n<p>The base classes constructor sets all the base member vars to sensible values, including getting a unique objectid for the object. If you have added your own member vars then you\'ll want to override this constructor with your own and make it set these values as well as call the base constructor.</p>\r\n\r\n<a name=\"#serialize functions\"></a>\r\n<h2>Serialize Functions</h2>\r\n\r\n<p>FOOWD objects store 3 meta arrays, these arrays are:</p>\r\n\r\n<ul>\r\n<li><strong>foowd_vars_meta</strong> - Array of regular expresions, one for each member variable, telling FOOWD valid values for the variable.</li>\r\n<li><strong>foowd_indexes</strong> - Array of database types, one for each member variable that should be an index on the database.</li>\r\n<li><strong>foowd_original_access_vars</strong> - Array of the original values of the four access member variables (objectid, version, classid, and workspaceid), used to find object in case these are changed during processing.</li>\r\n</ul>\r\n\r\n<p>These meta arrays are defined in the classes serialize functions, two special functions (__sleep() and __wakeup()) that are called by PHP just before an object is serialized and just after an object is unserialized.</p>\r\n\r\n<p class=\"nb\"><strong>Jargon Buster: </strong>Serializing is turning a PHP variable (a simple type, an array, or an object) into a text string representation. FOOWD uses this PHP functionality to serialize system objects before writing them to the database as plain text.</p>\r\n\r\n<h3>__sleep()</h3>\r\n\r\n<p>The magic sleep member function is called just before the object is serialized. FOOWD uses this function to unset (remove) the meta arrays since we don\'t want to store lots of constant data within the database.</p>\r\n\r\n<h3>__wakeup()</h3>\r\n\r\n<p>Wakeup, as the name suggests, is called just after the object is unserialized. FOOWD uses it to re-create the meta arrays, and thus the meta arrays are defined within the __wakeup() function. __wakeup() is also called from within the base classes constructor so as to create the meta arrays the when an object is first created.</p>\r\n\r\n<p>If you have added any new member variables to your object, you need to define them within the foowd_vars_meta array so that FOOWD knows what values they can take.</p>\r\n\r\n<pre>\r\n    <span class=\"code_structure\">function </span><span class=\"code_function\">__wakeup</span><span class=\"code_structure\">() {\r\n        </span><span class=\"code_function\">parent</span><span class=\"code_structure\">::</span><span class=\"code_function\">__wakeup</span><span class=\"code_structure\">();\r\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'my_var1\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'/^[a-zA-Z0-9]{1,20}$/\'</span><span class=\"code_structure\">;\r\n        </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'my_var2\'</span><span class=\"code_structure\">] = </span><span class=\"code_string\">\'/^0|1$/\'</span><span class=\"code_structure\">;\r\n    }</span>\r\n</pre>\r\n\r\n<p>As you can see by the example, we define our own __wakeup() function and use it to call our parent classes __wakeup() function. Then we define two new foowd_vars_meta indexes for our two new member variables, the regular expressions show that $my_var1 can take any single alphanumeric string up to 20 characters long, and $my_var2 can contain the value 1 or 0.</p>\r\n\r\n<a name=\"#member functions\"></a>\r\n<h2>Member Functions</h2>\r\n\r\n<p>Here is where you define your member functions, the only previsions are that they must not be named beginning with \"class\" or \"method\", these names are reserved for class and object methods.</p>\r\n\r\n<a name=\"#class methods\"></a>\r\n<h2>Class Methods</h2>\r\n\r\n<p>In FOOWD, methods are defined as member functions that are accessable via the foowd::callmethod() and foowd::callClassmethod() functions, that is they are public functions that are called by the client and return some output to the clients browser.</p>\r\n\r\n<p>Class methods are static methods, methods that are called on the class rather than an instanciated object. These are useful for defining an object create method for example, where an existing object does not exist to call the method upon. They are accessed via the foowd::callClassmethod() function.</p>\r\n\r\n<pre>\r\n    <span class=\"code_structure\">function </span><span class=\"code_function\">class_create</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$className</span><span class=\"code_structure\">) {\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;Create a my_class object&lt;/h1&gt;\'</span><span class=\"code_structure\">;\r\n        </span><span class=\"code_function\">$createForm </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_form</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createForm\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'POST\'</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Create\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$createTitle </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createTitle\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'title\'</span><span class=\"code_structure\">], </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'Object Title:\'</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$createVar1 </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createVar1\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'my_var1\'</span><span class=\"code_structure\">], </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'My Var 1:\'</span><span class=\"code_structure\">);\r\n        </span><span class=\"code_function\">$createVar2 </span><span class=\"code_structure\">= new </span><span class=\"code_function\">input_textbox</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'createVar2\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">foowd_vars_meta</span><span class=\"code_structure\">[</span><span class=\"code_string\">\'my_var2\'</span><span class=\"code_structure\">], </span><span class=\"code_function\">NULL</span><span class=\"code_structure\">, </span><span class=\"code_string\">\'My Var 2:\'</span><span class=\"code_structure\">);\r\n        if (!</span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">submitted</span><span class=\"code_structure\">() || </span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value </span><span class=\"code_structure\">== </span><span class=\"code_string\">\'\'</span><span class=\"code_structure\">) {\r\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">addObject</span><span class=\"code_structure\">(</span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">);\r\n            </span><span class=\"code_function\">$createForm</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">display</span><span class=\"code_structure\">();\r\n        } else {\r\n            </span><span class=\"code_function\">$object </span><span class=\"code_structure\">= new </span><span class=\"code_function\">$className</span><span class=\"code_structure\">(\r\n                </span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">,\r\n                </span><span class=\"code_function\">$createTitle</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\r\n                </span><span class=\"code_function\">$createVar1</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value</span><span class=\"code_structure\">,\r\n                </span><span class=\"code_function\">$createVar2</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">value\r\n            </span><span class=\"code_structure\">);\r\n            if (</span><span class=\"code_function\">$object</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">save</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">FALSE</span><span class=\"code_structure\">)) {\r\n                echo </span><span class=\"code_string\">\'&lt;p&gt;Object created and saved.&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n            } else {\r\n                echo </span><span class=\"code_string\">\'&lt;p&gt;Could not create object.&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n            }\r\n        }\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n    }</span>\r\n</pre>\r\n\r\n<p>This example create method would be called via the method name \"create\", it displays a form to gather the data required to create our object, and then creates it.</p>\r\n\r\n<p>Notice the calls to foowd_prepend() and foowd_append(). These two functions are called at the beginning and end of each method, they allow a header and a footer to be added before and after the method output. They are included within your method rather than automatically during calling the method so as to give the flexibility to output HTML headers first or ignore them completely and output your own header and footer.</p>\r\n\r\n<a name=\"#object methods\"></a>\r\n<h2>Object Methods</h2>\r\n\r\n<p>object methods are non-static methods, methods that are called on an object instance. These are the main grunt of a FOOWD object, opening the internal object functionality to the outside world. They are accessed via the foowd::callMethod() function.</p>\r\n\r\n<pre>\r\n    <span class=\"code_structure\">function </span><span class=\"code_function\">method_view</span><span class=\"code_structure\">(&amp;</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">) {\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_prepend\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_prepend</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n        echo </span><span class=\"code_string\">\'&lt;h1&gt;This Is A My_Class Object Called \"\'</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">getTitle</span><span class=\"code_structure\">(), </span><span class=\"code_string\">\'\"&lt;/h1&gt;\'</span><span class=\"code_structure\">;\r\n        echo </span><span class=\"code_string\">\'&lt;p&gt;my_var1 = \'</span><span class=\"code_structure\">, </span><span class=\"code_function\">htmlspecialchars</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">my_var1</span><span class=\"code_structure\">), </span><span class=\"code_string\">\'&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n        echo </span><span class=\"code_string\">\'&lt;p&gt;my_var2 = \'</span><span class=\"code_structure\">, </span><span class=\"code_function\">htmlspecialchars</span><span class=\"code_structure\">(</span><span class=\"code_function\">$this</span><span class=\"code_structure\">-&gt;</span><span class=\"code_function\">my_var2</span><span class=\"code_structure\">), </span><span class=\"code_string\">\'&lt;/p&gt;\'</span><span class=\"code_structure\">;\r\n        if (</span><span class=\"code_function\">function_exists</span><span class=\"code_structure\">(</span><span class=\"code_string\">\'foowd_append\'</span><span class=\"code_structure\">)) </span><span class=\"code_function\">foowd_append</span><span class=\"code_structure\">(</span><span class=\"code_function\">$foowd</span><span class=\"code_structure\">, </span><span class=\"code_function\">$this</span><span class=\"code_structure\">);\r\n    }</span>\r\n</pre>\r\n\r\n<p>This example view method would be called via the method name \"view\", it displays the values of the two member variables we created.</p>\";s:8:\"evalCode\";i:0;s:14:\"processInclude\";i:0;}","Writing System Classes","2003-04-13 11:10:17","0");
INSERT INTO `sm2Object` VALUES("-1821465150","1","1158898744","0","O:15:\"foowd_text_html\":15:{s:5:\"title\";s:11:\"Definitions\";s:8:\"objectid\";i:-1821465150;s:7:\"version\";i:1;s:7:\"classid\";i:1158898744;s:11:\"workspaceid\";i:0;s:7:\"created\";i:1050229208;s:9:\"creatorid\";s:9:\"385153371\";s:11:\"creatorName\";s:4:\"Root\";s:7:\"updated\";i:1050230598;s:9:\"updatorid\";s:9:\"385153371\";s:11:\"updatorName\";s:4:\"Root\";s:11:\"permissions\";a:5:{s:4:\"view\";s:8:\"Everyone\";s:5:\"admin\";s:4:\"Gods\";s:6:\"delete\";s:4:\"Gods\";s:5:\"clone\";s:4:\"Gods\";s:4:\"edit\";s:8:\"Everyone\";}s:4:\"body\";s:2468:\"<h1>FOOWD Definitions / Terminology</h1>\r\n\r\n<p>Throughout the FOOWD and its documentation we use a number of terms which may be new to you or totally made up by us, below we explain what they mean:</p>\r\n\r\n<dl>\r\n\r\n<dt>The Author Group</dt>\r\n<dd>A magic user group that always contains only one user, the original creator of the object in question. If a user belongs to the author group (ie. has the string \"Author\" within their $groups[] array) then the user can access all methods set to the author user group even if they are not the original creator.</dd>\r\n\r\n<dt>Class Descriptor</dt>\r\n<dd>The global scope array ($foowd_class_meta) that tell FOOWD the class name and a text description of the class.</dd>\r\n\r\n<dt>Class Method</dt>\r\n<dd>A static method, a method that is called upon an uninstantiated class.</dd>\r\n\r\n<dt>FOOWD Environment Class</dt>\r\n<dd>The class \"foowd\" that should have an instance created each time FOOWD is used so as to set up the FOOWD system environment.</dd>\r\n\r\n<dt>Input Class/Object</dt>\r\n<dd>A class that wraps up HTTP I/O into a easy to handle package. Input classes include input validation, data persistancy spanning HTTP requests, and can be complex input types derived from a number of HTML input widgets/controls.</dd>\r\n\r\n<dt>Method</dt>\r\n<dd>A member function that is accessable to connecting client via the foowd::callMethod() or foowd::callClassMethod() functions.</dd>\r\n\r\n<dt>Object Method</dt>\r\n<dd>A non-static method, a method that is called upon an instantiated object.</dd>\r\n\r\n<dt>Object ID</dt>\r\n<dd>An object id is a crc32 checksum of the objects title. This allows an object to be indexed via a numerical value that can be derived directly from the objects title.</dd>\r\n\r\n<dt>System Class/Object</dt>\r\n<dd>A class that extends the base system class \"foowd_object\".</dd>\r\n\r\n<dt>User Group</dt>\r\n<dd>A text string identifier that grants the users with that string in their $groups[] array permission access to methods secured with that that user group via their objects $permissions[] array.</dd>\r\n\r\n<dt>Workspace</dt>\r\n<dd>All system objects belong to a workspace, users within a workspace can only see other objects within that workspace and objects within the \"outside\" workspace (the workspace of the live system). Objects can be cloned (or created) in a new workspace, here changes can be made to them without effecting the live system until the objects are cloned back \"outside\".</dd>\r\n\r\n<dt></dt>\r\n<dd></dd>\r\n\r\n</dl>\";s:8:\"evalCode\";i:0;s:14:\"processInclude\";i:0;}","Definitions","2003-04-13 11:43:18","0");
